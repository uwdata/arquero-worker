!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).aq={})}(this,(function(t){"use strict";var e=Array.isArray;function r(t){return null!=t?e(t)?t:[t]:[]}function i(t){return t<0?`count() + ${t}`:t}class n{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${i(t)} < row_number() && row_number() <= ${i(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,r(t),e)}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,r){return this.__pivot(this,t,e,r)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...r){return this.__lookup(this,t,e,r.flat())}join(t,e,r,i){return this.__join(this,t,e,r,i)}join_left(t,e,r,i){const n={...i,left:!0,right:!1};return this.__join(this,t,e,r,n)}join_right(t,e,r,i){const n={...i,left:!1,right:!0};return this.__join(this,t,e,r,n)}join_full(t,e,r,i){const n={...i,left:!0,right:!0};return this.__join(this,t,e,r,n)}cross(t,e,r){return this.__cross(this,t,e,r)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function s(t){throw Error(t)}function a(t){return"function"==typeof t}function o(t,e){const r=Array(t);if(a(e))for(let i=0;i<t;++i)r[i]=e(i);else r.fill(e);return r}class c extends n{constructor(t,e,r,i,n,s,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=n||null,this._order=s||null}create(t){s("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}get(t,e){s("Not implemented")}getter(t){s("Not implemented")}objects(t){s("Not implemented")}[Symbol.iterator](){s("Not implemented")}print(t={}){"number"==typeof t?t={limit:10}:null==t.limit&&(t.limit=10);const e=this.objects(t),r=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;console.log(r),console.table(e)}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),r=new Uint32Array(e),i=this.isOrdered(),n=this.mask();let s=-1;if(n)for(let t=n.next(0);t>=0;t=n.next(t+1))r[++s]=t;else for(let t=0;t<e;++t)r[++s]=t;if(t&&i){const t=this._order,e=this._data;r.sort(((r,i)=>t(r,i,e)))}return!t&&i||(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:r}=this._group,i=o(r,(()=>[])),n=this._index,s=this.mask(),a=this.numRows();if(n&&this.isOrdered())for(let t,r=0;r<a;++r)t=n[r],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<a;++t)i[e[t]].push(t);if(t&&!n&&this.isOrdered()){const t=this._order,e=this._data;for(let n=0;n<r;++n)i[n].sort(((r,i)=>t(r,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,r=1/0,i=0){const n=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+r),u=()=>o=this._total;if(e&&this.isOrdered()||n&&this._index){const e=this.indices(),r=this._data;for(;o<c;++o)t(e[o],r,u)}else if(n){let e=c-o+1;for(o=n.nth(o);--e;o=n.next(o+1))t(o,a,u)}else for(;o<c;++o)t(o,a,u)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>r.push(t)),!0,e-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}}class u{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}}let h=function(t){return t&&a(t.get)?t:new u(t)};function l(t){return t instanceof Date}function p(t){return t===Object(t)}function d(t){return t instanceof RegExp}function f(t){return"string"==typeof t}function y(t,r){const i=e=>s(`Illegal argument type: ${e||typeof t}`);return t instanceof Map?m(t.entries(),r):l(t)?i("Date"):d(t)?i("RegExp"):f(t)?i():e(t)?function(t,e){const r=t.length,i={},n=t=>i[t]=Array(r);if(r){const i=(e=e||Object.keys(t[0])).map(n),s=i.length;for(let n=0;n<r;++n){const r=t[n];for(let t=0;t<s;++t)i[t][n]=r[e[t]]}}else e&&e.forEach(n);return i}(t,r):a(t[Symbol.iterator])?function(t,e){const r={},i=t=>r[t]=[];let n,s;for(const r of t){n||(n=(e=e||Object.keys(r)).map(i),s=n.length);for(let t=0;t<s;++t)n[t].push(r[e[t]])}!n&&e&&e.forEach(i);return r}(t,r):p(t)?m(Object.entries(t),r):i()}function m(t,e=["key","value"]){const r=[],i=[];for(const[e,n]of t)r.push(e),i.push(n);const n={};return e[0]&&(n[e[0]]=r),e[1]&&(n[e[1]]=i),n}const{hasOwnProperty:b}=Object.prototype;function g(t,e){return b.call(t,e)}function _(t){return t?new v({...t.data()},t.columnNames()):new v}class v{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return g(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var w={NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Dictionary:-1,Int8:-2,Int16:-3,Int32:-4,Int64:-5,Uint8:-6,Uint16:-7,Uint32:-8,Uint64:-9,Float16:-10,Float32:-11,Float64:-12,DateDay:-13,DateMillisecond:-14,TimestampSecond:-15,TimestampMillisecond:-16,TimestampMicrosecond:-17,TimestampNanosecond:-18,TimeSecond:-19,TimeMillisecond:-20,TimeMicrosecond:-21,TimeNanosecond:-22,DenseUnion:-23,SparseUnion:-24,IntervalDayTime:-25,IntervalYearMonth:-26},x={};function I(t,e,r){return e<=t&&t<=r}function S(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}x.SIZEOF_SHORT=2,x.SIZEOF_INT=4,x.FILE_IDENTIFIER_LENGTH=4,x.Encoding={UTF8_BYTES:1,UTF16_STRING:2},x.int32=new Int32Array(2),x.float32=new Float32Array(x.int32.buffer),x.float64=new Float64Array(x.int32.buffer),x.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],x.Long=function(t,e){this.low=0|t,this.high=0|e},x.Long.create=function(t,e){return 0==t&&0==e?x.Long.ZERO:new x.Long(t,e)},x.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},x.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},x.Long.ZERO=new x.Long(0,0),x.Builder=function(t){if(t)e=t;else var e=1024;this.bb=x.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},x.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},x.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},x.Builder.prototype.dataBuffer=function(){return this.bb},x.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},x.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<r+t+e;){var i=this.bb.capacity();this.bb=x.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)},x.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},x.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},x.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},x.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},x.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},x.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},x.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},x.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},x.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},x.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},x.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},x.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},x.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},x.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},x.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},x.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},x.Builder.prototype.addFieldInt64=function(t,e,r){!this.force_defaults&&e.equals(r)||(this.addInt64(e),this.slot(t))},x.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},x.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},x.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},x.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},x.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},x.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},x.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},x.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},x.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,i=x.ByteBuffer.allocate(r);return i.setPosition(r-e),i.bytes().set(t.bytes(),r-e),i},x.Builder.prototype.addOffset=function(t){this.prep(x.SIZEOF_INT,0),this.writeInt32(this.offset()-t+x.SIZEOF_INT)},x.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},x.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var r=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(r+2)*x.SIZEOF_SHORT;this.addInt16(i);var n=0,s=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(a)){for(var o=x.SIZEOF_SHORT;o<i;o+=x.SIZEOF_SHORT)if(this.bb.readInt16(s+o)!=this.bb.readInt16(a+o))continue t;n=this.vtables[e];break}}return n?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,n-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},x.Builder.prototype.finish=function(t,e){if(e){var r=e;if(this.prep(this.minalign,x.SIZEOF_INT+x.FILE_IDENTIFIER_LENGTH),r.length!=x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+x.FILE_IDENTIFIER_LENGTH);for(var i=x.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(r.charCodeAt(i))}this.prep(this.minalign,x.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},x.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},x.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(x.SIZEOF_INT,t*e),this.prep(r,t*e)},x.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},x.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var r=0;r<t.length;){var i,n=t.charCodeAt(r++);if(n<55296||n>=56320)i=n;else i=(n<<10)+t.charCodeAt(r++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);r=0;for(var s=this.space,a=this.bb.bytes();r<e.length;r++)a[s++]=e[r];return this.endVector()},x.Builder.prototype.createLong=function(t,e){return x.Long.create(t,e)},x.ByteBuffer=function(t){this.bytes_=t,this.position_=0},x.ByteBuffer.allocate=function(t){return new x.ByteBuffer(new Uint8Array(t))},x.ByteBuffer.prototype.clear=function(){this.position_=0},x.ByteBuffer.prototype.bytes=function(){return this.bytes_},x.ByteBuffer.prototype.position=function(){return this.position_},x.ByteBuffer.prototype.setPosition=function(t){this.position_=t},x.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},x.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},x.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},x.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},x.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},x.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},x.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},x.ByteBuffer.prototype.readInt64=function(t){return new x.Long(this.readInt32(t),this.readInt32(t+4))},x.ByteBuffer.prototype.readUint64=function(t){return new x.Long(this.readUint32(t),this.readUint32(t+4))},x.ByteBuffer.prototype.readFloat32=function(t){return x.int32[0]=this.readInt32(t),x.float32[0]},x.ByteBuffer.prototype.readFloat64=function(t){return x.int32[x.isLittleEndian?0:1]=this.readInt32(t),x.int32[x.isLittleEndian?1:0]=this.readInt32(t+4),x.float64[0]},x.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},x.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},x.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},x.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},x.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},x.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},x.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},x.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},x.ByteBuffer.prototype.writeFloat32=function(t,e){x.float32[0]=e,this.writeInt32(t,x.int32[0])},x.ByteBuffer.prototype.writeFloat64=function(t,e){x.float64[0]=e,this.writeInt32(t,x.int32[x.isLittleEndian?0:1]),this.writeInt32(t+4,x.int32[x.isLittleEndian?1:0])},x.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+x.SIZEOF_INT+x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<x.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+x.SIZEOF_INT+e));return t},x.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},x.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},x.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),i="",n=0;if(t+=x.SIZEOF_INT,e===x.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;n<r;){var s,a=this.readUint8(t+n++);if(a<192)s=a;else{var o=this.readUint8(t+n++);if(a<224)s=(31&a)<<6|63&o;else{var c=this.readUint8(t+n++);if(a<240)s=(15&a)<<12|(63&o)<<6|63&c;else s=(7&a)<<18|(63&o)<<12|(63&c)<<6|63&this.readUint8(t+n++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i},x.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},x.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+x.SIZEOF_INT},x.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},x.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+x.FILE_IDENTIFIER_LENGTH);for(var e=0;e<x.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+x.SIZEOF_INT+e))return!1;return!0},x.ByteBuffer.prototype.createLong=function(t,e){return x.Long.create(t,e)};function A(t){this.tokens=[].slice.call(t)}A.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var T=-1;function E(t,e){if(t)throw TypeError("Decoder error");return e||65533}var k="utf-8";function B(t,e){if(!(this instanceof B))return new B(t,e);if((t=void 0!==t?String(t).toLowerCase():k)!==k)throw new Error("Encoding not supported. Only utf-8 is supported");e=S(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function D(t,e){if(!(this instanceof D))return new D(t,e);if((t=void 0!==t?String(t).toLowerCase():k)!==k)throw new Error("Encoding not supported. Only utf-8 is supported");e=S(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function C(t){var e=t.fatal,r=0,i=0,n=0,s=128,a=191;this.handler=function(t,o){if(-1===o&&0!==n)return n=0,E(e);if(-1===o)return T;if(0===n){if(I(o,0,127))return o;if(I(o,194,223))n=1,r=o-192;else if(I(o,224,239))224===o&&(s=160),237===o&&(a=159),n=2,r=o-224;else{if(!I(o,240,244))return E(e);240===o&&(s=144),244===o&&(a=143),n=3,r=o-240}return r<<=6*n,null}if(!I(o,s,a))return r=n=i=0,s=128,a=191,t.prepend(o),E(e);if(s=128,a=191,r+=o-128<<6*(n-(i+=1)),i!==n)return null;var c=r;return r=n=i=0,c}}function L(t){t.fatal,this.handler=function(t,e){if(-1===e)return T;if(I(e,0,127))return e;var r,i;I(e,128,2047)?(r=1,i=192):I(e,2048,65535)?(r=2,i=224):I(e,65536,1114111)&&(r=3,i=240);for(var n=[(e>>6*r)+i];r>0;){var s=e>>6*(r-1);n.push(128|63&s),r-=1}return n}}B.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=S(e),this._streaming||(this._decoder=new C({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var i,n=new A(r),s=[];!n.endOfStream()&&(i=this._decoder.handler(n,n.read()))!==T;)null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));if(!this._streaming){do{if((i=this._decoder.handler(n,n.read()))===T)break;null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i))}while(!n.endOfStream());this._decoder=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var i=t[r];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(s)}},D.prototype={encode:function(t,e){t=t?String(t):"",e=S(e),this._streaming||(this._encoder=new L(this._options)),this._streaming=Boolean(e.stream);for(var r,i=[],n=new A(function(t){for(var e=String(t),r=e.length,i=0,n=[];i<r;){var s=e.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319)if(i===r-1)n.push(65533);else{var a=t.charCodeAt(i+1);if(56320<=a&&a<=57343){var o=1023&s,c=1023&a;n.push(65536+(o<<10)+c),i+=1}else n.push(65533)}i+=1}return n}(t));!n.endOfStream()&&(r=this._encoder.handler(n,n.read()))!==T;)Array.isArray(r)?i.push.apply(i,r):i.push(r);if(!this._streaming){for(;(r=this._encoder.handler(n,n.read()))!==T;)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)}};const M="function"==typeof Buffer?Buffer:null,O="function"==typeof TextDecoder&&"function"==typeof TextEncoder,N=(t=>{if(O||!M){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:r,length:i}=lt(t);return M.from(e,r,i).toString()}})("undefined"!=typeof TextDecoder?TextDecoder:B),F=(t=>{if(O||!M){const e=new t;return t=>e.encode(t)}return(t="")=>lt(M.from(t,"utf8"))})("undefined"!=typeof TextEncoder?TextEncoder:D),U=Object.freeze({done:!0,value:void 0});class V{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class P{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class R extends P{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(U);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return bt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return bt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),U}async return(t){return await this.close(),U}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(U)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[j,z]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[$,W]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[q,H]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Y=t=>"boolean"==typeof t,G=t=>"function"==typeof t,K=t=>null!=t&&Object(t)===t,J=t=>K(t)&&G(t.then),Q=t=>K(t)&&G(t[Symbol.iterator]),Z=t=>K(t)&&G(t[Symbol.asyncIterator]),X=t=>K(t)&&K(t.schema),tt=t=>K(t)&&"done"in t&&"value"in t,et=t=>K(t)&&G(t.stat)&&(t=>"number"==typeof t)(t.fd),rt=t=>K(t)&&it(t.body),it=t=>K(t)&&G(t.cancel)&&G(t.getReader)&&!(t instanceof P),nt=t=>K(t)&&G(t.read)&&G(t.pipe)&&Y(t.readable)&&!(t instanceof P);var st=x.ByteBuffer;const at="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function ot(t,e,r=0,i=e.byteLength){const n=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,n),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,n));return s.set(a,r),t}function ct(t,e){let r,i,n,s=function(t){let e,r,i,n,s=t[0]?[t[0]]:[];for(let a,o,c=0,u=0,h=t.length;++c<h;)a=s[u],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(s[++u]=o):(({byteOffset:e,byteLength:i}=a),({byteOffset:r,byteLength:n}=o),e+i<r||r+n<e?o&&(s[++u]=o):s[u]=new Uint8Array(a.buffer,e,r-e+n));return s}(t),a=s.reduce(((t,e)=>t+e.byteLength),0),o=0,c=-1,u=Math.min(e||1/0,a);for(let t=s.length;++c<t;){if(r=s[c],i=r.subarray(0,Math.min(r.length,u-o)),u<=o+i.length){i.length<r.length?s[c]=r.subarray(i.length):i.length===r.length&&c++,n?ot(n,i,o):n=i;break}ot(n||(n=new Uint8Array(u)),i,o),o+=i.length}return[n||new Uint8Array(0),s.slice(c),a-(n?n.byteLength:0)]}function ut(t,e){let r=tt(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?("string"==typeof r&&(r=F(r)),r instanceof ArrayBuffer||r instanceof at?new t(r):r instanceof st?ut(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const ht=t=>ut(Int32Array,t),lt=t=>ut(Uint8Array,t),pt=t=>(t.next(),t);const dt=t=>function*(t,e){const r=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof at?r(e):Q(e)?e:r(e);return yield*pt(function*(e){let r=null;do{r=e.next(yield ut(t,r))}while(!r.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);async function*ft(t,e){if(J(e))return yield*ft(t,await e);const r=async function*(t){yield await t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof at?r(e):Q(e)?async function*(t){yield*pt(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))}(e):Z(e)?e:r(e);return yield*pt(async function*(e){let r=null;do{r=await e.next(yield ut(t,r))}while(!r.done)}(i[Symbol.asyncIterator]())),new t}const yt=t=>ft(Uint8Array,t);function mt(t,e,r){if(0!==t){r=r.slice(0,e+1);for(let i=-1;++i<=e;)r[i]+=t}return r}var bt={fromIterable:t=>gt(function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?ct(a,n)[0]:([r,a,o]=ct(a,n),r)}({cmd:i,size:n}=yield null);let u=dt(t)[Symbol.iterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?u.next(void 0):u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&u.throw(t)}finally{!1===s&&"function"==typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>gt(async function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?ct(a,n)[0]:([r,a,o]=ct(a,n),r)}({cmd:i,size:n}=yield null);let u=yt(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?await u.next(void 0):await u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&await u.throw(t)}finally{!1===s&&"function"==typeof u.return&&await u.return(new Uint8Array(0))}return null}(t)),fromDOMStream:t=>gt(async function*(t){let e,r,i,n=!1,s=!1,a=[],o=0;function c(){return"peek"===r?ct(a,i)[0]:([e,a,o]=ct(a,i),e)}({cmd:r,size:i}=yield null);let u=new _t(t);try{do{if(({done:n,value:e}=isNaN(i-o)?await u.read(void 0):await u.read(i-o)),!n&&e.byteLength>0&&(a.push(lt(e)),o+=e.byteLength),n||i<=o)do{({cmd:r,size:i}=yield c())}while(i<o)}while(!n)}catch(t){(s=!0)&&await u.cancel(t)}finally{!1===s?await u.cancel():t.locked&&u.releaseLock()}return null}(t)),fromNodeStream:t=>gt(async function*(t){let e,r,i,n=[],s="error",a=!1,o=null,c=0,u=[];function h(){return"peek"===e?ct(u,r)[0]:([i,u,c]=ct(u,r),i)}if(({cmd:e,size:r}=yield null),t.isTTY)return yield new Uint8Array(0),null;try{n[0]=wt(t,"end"),n[1]=wt(t,"error");do{if(n[2]=wt(t,"readable"),[s,o]=await Promise.race(n.map((t=>t[2]))),"error"===s)break;if((a="end"===s)||(isFinite(r-c)?(i=lt(t.read(r-c)),i.byteLength<r-c&&(i=lt(t.read(void 0)))):i=lt(t.read(void 0)),i.byteLength>0&&(u.push(i),c+=i.byteLength)),a||r<=c)do{({cmd:e,size:r}=yield h())}while(r<c)}while(!a)}finally{await l(n,"error"===s?o:null)}return null;function l(e,r){return i=u=null,new Promise((async(i,n)=>{for(const[r,i]of e)t.off(r,i);try{const e=t.destroy;e&&e.call(t,r),r=void 0}catch(t){r=t||r}finally{null!=r?n(r):i()}}))}}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const gt=t=>(t.next(),t);class _t{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(t){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:r}=this;e&&await e.cancel(t).catch((()=>{})),r&&r.locked&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"==typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=lt(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch((()=>{}))),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch((()=>{}))),this.reader=this.byobReader}async readFromBYOBReader(t){return await vt(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function vt(t,e,r,i){if(r>=i)return{done:!1,value:new Uint8Array(e,0,i)};const{done:n,value:s}=await t.read(new Uint8Array(e,r,i-r));return(r+=s.byteLength)<i&&!n?await vt(t,s.buffer,r,i):{done:n,value:new Uint8Array(s.buffer,0,r)}}const wt=(t,e)=>{let r,i=t=>r([e,t]);return[e,i,new Promise((n=>(r=n)&&t.once(e,i)))]};class xt{}var It,St;xt.prototype.data=null,function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}((i=r.flatbuf||(r.flatbuf={})).MetadataVersion||(i.MetadataVersion={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}((i=r.flatbuf||(r.flatbuf={})).UnionMode||(i.UnionMode={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}((i=r.flatbuf||(r.flatbuf={})).Precision||(i.Precision={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}((i=r.flatbuf||(r.flatbuf={})).DateUnit||(i.DateUnit={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}((i=r.flatbuf||(r.flatbuf={})).TimeUnit||(i.TimeUnit={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}((i=r.flatbuf||(r.flatbuf={})).IntervalUnit||(i.IntervalUnit={}))}(It||(It={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}((i=r.flatbuf||(r.flatbuf={})).Type||(i.Type={}))}(It||(It={})),function(t){var e,r,i,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),i=r.flatbuf||(r.flatbuf={}),(n=i.Endianness||(i.Endianness={}))[n.Little=0]="Little",n[n.Big=1]="Big"}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}}t.List=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){return t.endObject()}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}}t.FixedSizeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}}t.Map=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,i){return r.startUnion(t),r.addMode(t,e),r.addTypeIds(t,i),r.endUnion(t)}}e.Union=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,r,i){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,i),e.endInt(t)}}t.Int=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return r.startFloatingPoint(t),r.addPrecision(t,e),r.endFloatingPoint(t)}}e.FloatingPoint=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,i){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,i),e.endDecimal(t)}}t.Decimal=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return r.startDate(t),r.addUnit(t,e),r.endDate(t)}}e.Date=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,i){return r.startTime(t),r.addUnit(t,e),r.addBitWidth(t,i),r.endTime(t)}}e.Time=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,i){return r.startTimestamp(t),r.addUnit(t,e),r.addTimezone(t,i),r.endTimestamp(t)}}e.Timestamp=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return r.startInterval(t),r.addUnit(t,e),r.endInterval(t)}}e.Interval=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return r.startDuration(t),r.addUnit(t,e),r.endDuration(t)}}e.Duration=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,i){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,i),e.endKeyValue(t)}}t.KeyValue=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,i,n){return r.startDictionaryEncoding(t),r.addId(t,e),r.addIndexType(t,i),r.addIsOrdered(t,n),r.endDictionaryEncoding(t)}}e.DictionaryEncoding=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(e,r){let i=this.bb.__offset(this.bb_pos,14);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,16);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,r){e.addFieldInt8(2,r,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,i,n,s,a,o,c){return r.startField(t),r.addName(t,e),r.addNullable(t,i),r.addTypeType(t,n),r.addType(t,s),r.addDictionary(t,a),r.addChildren(t,o),r.addCustomMetadata(t,c),r.endField(t)}}e.Field=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,i,n){return r.startSchema(t),r.addEndianness(t,e),r.addFields(t,i),r.addCustomMetadata(t,n),r.endSchema(t)}}e.Schema=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(It||(It={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Schema=It.apache.arrow.flatbuf.Schema}(St||(St={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}((i=r.flatbuf||(r.flatbuf={})).MessageHeader||(i.MessageHeader={}))}(St||(St={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(St||(St={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new It.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,i,n){return r.startRecordBatch(t),r.addLength(t,e),r.addNodes(t,i),r.addBuffers(t,n),r.endRecordBatch(t)}}e.RecordBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(St||(St={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,i,n){return r.startDictionaryBatch(t),r.addId(t,e),r.addData(t,i),r.addIsDelta(t,n),r.endDictionaryBatch(t)}}e.DictionaryBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(St||(St={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):It.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new It.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,It.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,r){e.addFieldInt8(1,r,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,i,n,s,a){return r.startMessage(t),r.addVersion(t,e),r.addHeaderType(t,i),r.addHeader(t,n),r.addBodyLength(t,s),r.addCustomMetadata(t,a),r.endMessage(t)}}e.Message=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(St||(St={})),It.apache.arrow.flatbuf.Type;var At,Tt,Et=It.apache.arrow.flatbuf.DateUnit,kt=It.apache.arrow.flatbuf.TimeUnit,Bt=It.apache.arrow.flatbuf.Precision,Dt=It.apache.arrow.flatbuf.UnionMode,Ct=It.apache.arrow.flatbuf.IntervalUnit,Lt=St.apache.arrow.flatbuf.MessageHeader,Mt=It.apache.arrow.flatbuf.MetadataVersion;function Ot(t,e,r,i){return 0!=(r&1<<i)}function Nt(t,e,r,i){return(r&1<<i)>>i}function Ft(t,e,r){const i=r.byteLength+7&-8;if(t>0||r.byteLength<i){const n=new Uint8Array(i);return n.set(t%8==0?r.subarray(t>>3):Ut(Vt(r,t,e,null,Ot)).subarray(0,i)),n}return r}function Ut(t){let e=[],r=0,i=0,n=0;for(const s of t)s&&(n|=1<<i),8==++i&&(e[r++]=n,n=i=0);(0===r||i>0)&&(e[r++]=n);let s=new Uint8Array(e.length+7&-8);return s.set(e),s}function*Vt(t,e,r,i,n){let s=e%8,a=e>>3,o=0,c=r;for(;c>0;s=0){let e=t[a++];do{yield n(i,o++,e,s)}while(--c>0&&++s<8)}}function Pt(t,e,r){if(r-e<=0)return 0;if(r-e<8){let i=0;for(const n of Vt(t,e,r-e,t,Nt))i+=n;return i}const i=r>>3<<3,n=e+(e%8==0?0:8-e%8);return Pt(t,e,n)+Pt(t,i,r)+function(t,e,r){let i=0,n=0|e;const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===r?t.byteLength:n+r;for(;a-n>=4;)i+=Rt(s.getUint32(n)),n+=4;for(;a-n>=2;)i+=Rt(s.getUint16(n)),n+=2;for(;a-n>=1;)i+=Rt(s.getUint8(n)),n+=1;return i}(t,n>>3,i-n>>3)}function Rt(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(At||(At={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(Tt||(Tt={}));class jt{visitMany(t,...e){return t.map(((t,r)=>this.visit(t,...e.map((t=>t[r])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,r=!0){let i=null,n=At.NONE;e instanceof je||e instanceof xt?n=zt(e.type):e instanceof te?n=zt(e):"number"!=typeof(n=e)&&(n=At[e]);switch(n){case At.Null:i=t.visitNull;break;case At.Bool:i=t.visitBool;break;case At.Int:i=t.visitInt;break;case At.Int8:i=t.visitInt8||t.visitInt;break;case At.Int16:i=t.visitInt16||t.visitInt;break;case At.Int32:i=t.visitInt32||t.visitInt;break;case At.Int64:i=t.visitInt64||t.visitInt;break;case At.Uint8:i=t.visitUint8||t.visitInt;break;case At.Uint16:i=t.visitUint16||t.visitInt;break;case At.Uint32:i=t.visitUint32||t.visitInt;break;case At.Uint64:i=t.visitUint64||t.visitInt;break;case At.Float:i=t.visitFloat;break;case At.Float16:i=t.visitFloat16||t.visitFloat;break;case At.Float32:i=t.visitFloat32||t.visitFloat;break;case At.Float64:i=t.visitFloat64||t.visitFloat;break;case At.Utf8:i=t.visitUtf8;break;case At.Binary:i=t.visitBinary;break;case At.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case At.Date:i=t.visitDate;break;case At.DateDay:i=t.visitDateDay||t.visitDate;break;case At.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case At.Timestamp:i=t.visitTimestamp;break;case At.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case At.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case At.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case At.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case At.Time:i=t.visitTime;break;case At.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case At.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case At.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case At.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case At.Decimal:i=t.visitDecimal;break;case At.List:i=t.visitList;break;case At.Struct:i=t.visitStruct;break;case At.Union:i=t.visitUnion;break;case At.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case At.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case At.Dictionary:i=t.visitDictionary;break;case At.Interval:i=t.visitInterval;break;case At.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case At.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case At.FixedSizeList:i=t.visitFixedSizeList;break;case At.Map:i=t.visitMap}if("function"==typeof i)return i;if(!r)return()=>null;throw new Error(`Unrecognized type '${At[n]}'`)}(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function zt(t){switch(t.typeId){case At.Null:return At.Null;case At.Int:const{bitWidth:e,isSigned:r}=t;switch(e){case 8:return r?At.Int8:At.Uint8;case 16:return r?At.Int16:At.Uint16;case 32:return r?At.Int32:At.Uint32;case 64:return r?At.Int64:At.Uint64}return At.Int;case At.Float:switch(t.precision){case Bt.HALF:return At.Float16;case Bt.SINGLE:return At.Float32;case Bt.DOUBLE:return At.Float64}return At.Float;case At.Binary:return At.Binary;case At.Utf8:return At.Utf8;case At.Bool:return At.Bool;case At.Decimal:return At.Decimal;case At.Time:switch(t.unit){case kt.SECOND:return At.TimeSecond;case kt.MILLISECOND:return At.TimeMillisecond;case kt.MICROSECOND:return At.TimeMicrosecond;case kt.NANOSECOND:return At.TimeNanosecond}return At.Time;case At.Timestamp:switch(t.unit){case kt.SECOND:return At.TimestampSecond;case kt.MILLISECOND:return At.TimestampMillisecond;case kt.MICROSECOND:return At.TimestampMicrosecond;case kt.NANOSECOND:return At.TimestampNanosecond}return At.Timestamp;case At.Date:switch(t.unit){case Et.DAY:return At.DateDay;case Et.MILLISECOND:return At.DateMillisecond}return At.Date;case At.Interval:switch(t.unit){case Ct.DAY_TIME:return At.IntervalDayTime;case Ct.YEAR_MONTH:return At.IntervalYearMonth}return At.Interval;case At.Map:return At.Map;case At.List:return At.List;case At.Struct:return At.Struct;case At.Union:switch(t.mode){case Dt.Dense:return At.DenseUnion;case Dt.Sparse:return At.SparseUnion}return At.Union;case At.FixedSizeBinary:return At.FixedSizeBinary;case At.FixedSizeList:return At.FixedSizeList;case At.Dictionary:return At.Dictionary}throw new Error(`Unrecognized type '${At[t.typeId]}'`)}jt.prototype.visitInt8=null,jt.prototype.visitInt16=null,jt.prototype.visitInt32=null,jt.prototype.visitInt64=null,jt.prototype.visitUint8=null,jt.prototype.visitUint16=null,jt.prototype.visitUint32=null,jt.prototype.visitUint64=null,jt.prototype.visitFloat16=null,jt.prototype.visitFloat32=null,jt.prototype.visitFloat64=null,jt.prototype.visitDateDay=null,jt.prototype.visitDateMillisecond=null,jt.prototype.visitTimestampSecond=null,jt.prototype.visitTimestampMillisecond=null,jt.prototype.visitTimestampMicrosecond=null,jt.prototype.visitTimestampNanosecond=null,jt.prototype.visitTimeSecond=null,jt.prototype.visitTimeMillisecond=null,jt.prototype.visitTimeMicrosecond=null,jt.prototype.visitTimeNanosecond=null,jt.prototype.visitDenseUnion=null,jt.prototype.visitSparseUnion=null,jt.prototype.visitIntervalDayTime=null,jt.prototype.visitIntervalYearMonth=null;class $t extends jt{compareSchemas(t,e){return t===e||e instanceof t.constructor&&Xt.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,r)=>Xt.compareField(t,e[r])))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&Xt.visit(t.type,e.type)}}function Wt(t,e){return e instanceof t.constructor}function qt(t,e){return t===e||Wt(t,e)}function Ht(t,e){return t===e||Wt(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Yt(t,e){return t===e||Wt(t,e)&&t.precision===e.precision}function Gt(t,e){return t===e||Wt(t,e)&&t.unit===e.unit}function Kt(t,e){return t===e||Wt(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Jt(t,e){return t===e||Wt(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Qt(t,e){return t===e||Wt(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,r)=>t===e.typeIds[r]))&&Xt.compareFields(t.children,e.children)}function Zt(t,e){return t===e||Wt(t,e)&&t.unit===e.unit}$t.prototype.visitNull=qt,$t.prototype.visitBool=qt,$t.prototype.visitInt=Ht,$t.prototype.visitInt8=Ht,$t.prototype.visitInt16=Ht,$t.prototype.visitInt32=Ht,$t.prototype.visitInt64=Ht,$t.prototype.visitUint8=Ht,$t.prototype.visitUint16=Ht,$t.prototype.visitUint32=Ht,$t.prototype.visitUint64=Ht,$t.prototype.visitFloat=Yt,$t.prototype.visitFloat16=Yt,$t.prototype.visitFloat32=Yt,$t.prototype.visitFloat64=Yt,$t.prototype.visitUtf8=qt,$t.prototype.visitBinary=qt,$t.prototype.visitFixedSizeBinary=function(t,e){return t===e||Wt(t,e)&&t.byteWidth===e.byteWidth},$t.prototype.visitDate=Gt,$t.prototype.visitDateDay=Gt,$t.prototype.visitDateMillisecond=Gt,$t.prototype.visitTimestamp=Kt,$t.prototype.visitTimestampSecond=Kt,$t.prototype.visitTimestampMillisecond=Kt,$t.prototype.visitTimestampMicrosecond=Kt,$t.prototype.visitTimestampNanosecond=Kt,$t.prototype.visitTime=Jt,$t.prototype.visitTimeSecond=Jt,$t.prototype.visitTimeMillisecond=Jt,$t.prototype.visitTimeMicrosecond=Jt,$t.prototype.visitTimeNanosecond=Jt,$t.prototype.visitDecimal=qt,$t.prototype.visitList=function(t,e){return t===e||Wt(t,e)&&t.children.length===e.children.length&&Xt.compareFields(t.children,e.children)},$t.prototype.visitStruct=function(t,e){return t===e||Wt(t,e)&&t.children.length===e.children.length&&Xt.compareFields(t.children,e.children)},$t.prototype.visitUnion=Qt,$t.prototype.visitDenseUnion=Qt,$t.prototype.visitSparseUnion=Qt,$t.prototype.visitDictionary=function(t,e){return t===e||Wt(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Xt.visit(t.indices,e.indices)&&Xt.visit(t.dictionary,e.dictionary)},$t.prototype.visitInterval=Zt,$t.prototype.visitIntervalDayTime=Zt,$t.prototype.visitIntervalYearMonth=Zt,$t.prototype.visitFixedSizeList=function(t,e){return t===e||Wt(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Xt.compareFields(t.children,e.children)},$t.prototype.visitMap=function(t,e){return t===e||Wt(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Xt.compareFields(t.children,e.children)};const Xt=new $t;class te{static isNull(t){return t&&t.typeId===At.Null}static isInt(t){return t&&t.typeId===At.Int}static isFloat(t){return t&&t.typeId===At.Float}static isBinary(t){return t&&t.typeId===At.Binary}static isUtf8(t){return t&&t.typeId===At.Utf8}static isBool(t){return t&&t.typeId===At.Bool}static isDecimal(t){return t&&t.typeId===At.Decimal}static isDate(t){return t&&t.typeId===At.Date}static isTime(t){return t&&t.typeId===At.Time}static isTimestamp(t){return t&&t.typeId===At.Timestamp}static isInterval(t){return t&&t.typeId===At.Interval}static isList(t){return t&&t.typeId===At.List}static isStruct(t){return t&&t.typeId===At.Struct}static isUnion(t){return t&&t.typeId===At.Union}static isFixedSizeBinary(t){return t&&t.typeId===At.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===At.FixedSizeList}static isMap(t){return t&&t.typeId===At.Map}static isDictionary(t){return t&&t.typeId===At.Dictionary}get typeId(){return At.NONE}compareTo(t){return Xt.visit(this,t)}}te[Symbol.toStringTag]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(te.prototype);class ee extends te{toString(){return"Null"}get typeId(){return At.Null}}ee[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(ee.prototype);class re extends te{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return At.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}re[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(re.prototype);class ie extends re{constructor(){super(!0,8)}}class ne extends re{constructor(){super(!0,16)}}class se extends re{constructor(){super(!0,32)}}class ae extends re{constructor(){super(!0,64)}}class oe extends re{constructor(){super(!1,8)}}class ce extends re{constructor(){super(!1,16)}}class ue extends re{constructor(){super(!1,32)}}class he extends re{constructor(){super(!1,64)}}Object.defineProperty(ie.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(ne.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(se.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(ae.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(oe.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(ce.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ue.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(he.prototype,"ArrayType",{value:Uint32Array});class le extends te{constructor(t){super(),this.precision=t}get typeId(){return At.Float}get ArrayType(){switch(this.precision){case Bt.HALF:return Uint16Array;case Bt.SINGLE:return Float32Array;case Bt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}le[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(le.prototype);class pe extends le{constructor(){super(Bt.HALF)}}class de extends le{constructor(){super(Bt.SINGLE)}}class fe extends le{constructor(){super(Bt.DOUBLE)}}Object.defineProperty(pe.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(de.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(fe.prototype,"ArrayType",{value:Float64Array});class ye extends te{constructor(){super()}get typeId(){return At.Binary}toString(){return"Binary"}}ye[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ye.prototype);class me extends te{constructor(){super()}get typeId(){return At.Utf8}toString(){return"Utf8"}}me[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(me.prototype);class be extends te{constructor(){super()}get typeId(){return At.Bool}toString(){return"Bool"}}be[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(be.prototype);class ge extends te{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return At.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}ge[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(ge.prototype);class _e extends te{constructor(t){super(),this.unit=t}get typeId(){return At.Date}toString(){return`Date${32*(this.unit+1)}<${Et[this.unit]}>`}}_e[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(_e.prototype);class ve extends _e{constructor(){super(Et.DAY)}}class we extends _e{constructor(){super(Et.MILLISECOND)}}class xe extends te{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return At.Time}toString(){return`Time${this.bitWidth}<${kt[this.unit]}>`}}xe[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(xe.prototype);class Ie extends xe{constructor(){super(kt.SECOND,32)}}class Se extends xe{constructor(){super(kt.MILLISECOND,32)}}class Ae extends xe{constructor(){super(kt.MICROSECOND,64)}}class Te extends xe{constructor(){super(kt.NANOSECOND,64)}}class Ee extends te{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return At.Timestamp}toString(){return`Timestamp<${kt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Ee[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Ee.prototype);class ke extends te{constructor(t){super(),this.unit=t}get typeId(){return At.Interval}toString(){return`Interval<${Ct[this.unit]}>`}}ke[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(ke.prototype);class Be extends ke{constructor(){super(Ct.DAY_TIME)}}class De extends ke{constructor(){super(Ct.YEAR_MONTH)}}class Ce extends te{constructor(t){super(),this.children=[t]}get typeId(){return At.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Ce[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Ce.prototype);class Le extends te{constructor(t){super(),this.children=t}get typeId(){return At.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Le[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Le.prototype);class Me extends te{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,r)=>(t[e]=r)&&t||t),Object.create(null))}get typeId(){return At.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}Me[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Me.prototype);class Oe extends te{constructor(t){super(),this.byteWidth=t}get typeId(){return At.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Oe[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Oe.prototype);class Ne extends te{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return At.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Ne[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Ne.prototype);class Fe extends te{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return At.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Fe[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Fe.prototype);const Ue=(Ve=-1,()=>++Ve);var Ve;class Pe extends te{constructor(t,e,r,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==r?Ue():"number"==typeof r?r:r.low}get typeId(){return At.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function Re(t){let e=t;switch(t.typeId){case At.Decimal:return 4;case At.Timestamp:return 2;case At.Date:case At.Interval:return 1+e.unit;case At.Int:case At.Time:return+(e.bitWidth>32)+1;case At.FixedSizeList:return e.listSize;case At.FixedSizeBinary:return e.byteWidth;default:return 1}}Pe[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Pe.prototype);class je{constructor(t,e,r,i,n,s,a){let o;this.type=t,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),this.childData=(s||[]).map((t=>t instanceof je?t:t.data)),n instanceof je?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=Re(t),n&&((o=n[0])&&(this.valueOffsets=o),(o=n[1])&&(this.values=o),(o=n[2])&&(this.nullBitmap=o),(o=n[3])&&(this.typeIds=o)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:r,nullBitmap:i,typeIds:n}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),n&&(t+=n.byteLength),this.childData.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Pt(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,r=this.length,i=this._nullCount,n=this,s=this.childData){return new je(t,e,r,i,n,s,this.dictionary)}slice(t,e){const{stride:r,typeId:i,childData:n}=this,s=+(0===this._nullCount)-1,a=16===i?r:1,o=this._sliceBuffers(t,e,r,i);return this.clone(this.type,this.offset+t,e,s,o,!n.length||this.valueOffsets?n:this._sliceChildren(n,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===At.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,r>0&&i.set(Ft(this.offset,e,this.nullBitmap),0);const n=this.buffers;return n[Tt.VALIDITY]=i,this.clone(this.type,0,t,r+(t-e),n)}_sliceBuffers(t,e,r,i){let n,{buffers:s}=this;return(n=s[Tt.TYPE])&&(s[Tt.TYPE]=n.subarray(t,t+e)),(n=s[Tt.OFFSET])&&(s[Tt.OFFSET]=n.subarray(t,t+e+1))||(n=s[Tt.DATA])&&(s[Tt.DATA]=6===i?n:n.subarray(r*t,r*(t+e))),s}_sliceChildren(t,e,r){return t.map((t=>t.slice(e,r)))}static new(t,e,r,i,n,s,a){switch(n instanceof je?n=n.buffers:n||(n=[]),t.typeId){case At.Null:return je.Null(t,e,r);case At.Int:return je.Int(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Dictionary:return je.Dictionary(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[],a);case At.Float:return je.Float(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Bool:return je.Bool(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Decimal:return je.Decimal(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Date:return je.Date(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Time:return je.Time(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Timestamp:return je.Timestamp(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Interval:return je.Interval(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.FixedSizeBinary:return je.FixedSizeBinary(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.DATA]||[]);case At.Binary:return je.Binary(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.OFFSET]||[],n[Tt.DATA]||[]);case At.Utf8:return je.Utf8(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.OFFSET]||[],n[Tt.DATA]||[]);case At.List:return je.List(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.OFFSET]||[],(s||[])[0]);case At.FixedSizeList:return je.FixedSizeList(t,e,r,i||0,n[Tt.VALIDITY],(s||[])[0]);case At.Struct:return je.Struct(t,e,r,i||0,n[Tt.VALIDITY],s||[]);case At.Map:return je.Map(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.OFFSET]||[],(s||[])[0]);case At.Union:return je.Union(t,e,r,i||0,n[Tt.VALIDITY],n[Tt.TYPE]||[],n[Tt.OFFSET]||s,s)}throw new Error(`Unrecognized typeId ${t.typeId}`)}static Null(t,e,r){return new je(t,e,r,0)}static Int(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Dictionary(t,e,r,i,n,s,a){return new je(t,e,r,i,[void 0,ut(t.indices.ArrayType,s),lt(n)],[],a)}static Float(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Bool(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Decimal(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Date(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Time(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Timestamp(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Interval(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static FixedSizeBinary(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,ut(t.ArrayType,s),lt(n)])}static Binary(t,e,r,i,n,s,a){return new je(t,e,r,i,[ht(s),lt(a),lt(n)])}static Utf8(t,e,r,i,n,s,a){return new je(t,e,r,i,[ht(s),lt(a),lt(n)])}static List(t,e,r,i,n,s,a){return new je(t,e,r,i,[ht(s),void 0,lt(n)],a?[a]:[])}static FixedSizeList(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,void 0,lt(n)],s?[s]:[])}static Struct(t,e,r,i,n,s){return new je(t,e,r,i,[void 0,void 0,lt(n)],s)}static Map(t,e,r,i,n,s,a){return new je(t,e,r,i,[ht(s),void 0,lt(n)],a?[a]:[])}static Union(t,e,r,i,n,s,a,o){const c=[void 0,void 0,lt(n),ut(t.ArrayType,s)];return t.mode===Dt.Sparse?new je(t,e,r,i,c,a):(c[Tt.OFFSET]=ht(a),new je(t,e,r,i,c,o))}}je.prototype.childData=Object.freeze([]);function ze(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}function $e(t){if(!t||t.length<=0)return function(t){return!0};let e="",r=t.filter((t=>t==t));return r.length>0&&(e=`\n    switch (x) {${r.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return ze(t);if(z)return`${ze(t)}n`;return`"${ze(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==r.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const We=(t,e)=>(t*e+63&-64||64)/e;class qe{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,r=this.length*e,i=this.buffer.length;r>=i&&this._resize(We(0===i?1*r:2*r,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=We(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):ot(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=ot(new this.ArrayType(t),this.buffer)}}qe.prototype.offset=0;class He extends qe{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Ye extends He{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,n=t%8,s=r[i]>>n&1;return e?0===s&&(r[i]|=1<<n,++this.numValid):1===s&&(r[i]&=~(1<<n),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Ge extends He{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Ke extends qe{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?$:q)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),r=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return z&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,r)),e}}class Je{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=Re(t),this._nulls=new Ye,e&&e.length>0&&(this._isValid=$e(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return function*(e){let n=0,s=Je.new(t);for(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}static throughAsyncIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return async function*(e){let n=0,s=Je.new(t);for await(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}toVector(){return xt.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,r=this._offsets,i=this._typeIds,{length:n,nullCount:s}=this;i?(t[Tt.TYPE]=i.flush(n),r&&(t[Tt.OFFSET]=r.flush(n))):r?(e&&(t[Tt.DATA]=e.flush(r.last())),t[Tt.OFFSET]=r.flush(n)):e&&(t[Tt.DATA]=e.flush(n)),s>0&&(t[Tt.VALIDITY]=this._nulls.flush(n));const a=je.new(this.type,0,n,s,t,this.children.map((t=>t.flush())));return this.clear(),a}finish(){return this.finished=!0,this.children.forEach((t=>t.finish())),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach((t=>t.clear())),this}}Je.prototype.length=1,Je.prototype.stride=1,Je.prototype.children=null,Je.prototype.finished=!1,Je.prototype.nullValues=null,Je.prototype._isValid=()=>!0;class Qe extends Je{constructor(t){super(t),this._values=new He(new this.ArrayType(0),this.stride)}setValue(t,e){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,e)}}class Ze extends Je{constructor(t){super(t),this._pendingLength=0,this._offsets=new Ge}setValue(t,e){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e.length,r.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class Xe extends Je{constructor(t){super(t),this._values=new Ye}setValue(t,e){this._values.set(t,+e)}}class tr extends Je{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class er extends Qe{}class rr extends er{}class ir extends er{}class nr extends Qe{}class sr extends Je{constructor({type:t,nullValues:e,dictionaryHashFunction:r}){super({type:new Pe(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Je.new({type:this.type.indices,nullValues:e}),this.dictionary=Je.new({type:this.type.dictionary,nullValues:null}),"function"==typeof r&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const r=this.indices;return e=r.setValid(t,e),this.length=r.length,e}setValue(t,e){let r=this._keysToIndices,i=this.valueToKey(e),n=r[i];return void 0===n&&(r[i]=n=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,n)}flush(){const t=this.type,e=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class ar extends Qe{}const or=new Float64Array(1),cr=new Uint32Array(or.buffer);function ur(t){if(t!=t)return 32256;or[0]=t;let e=(2147483648&cr[1])>>16&65535,r=2146435072&cr[1],i=0;return r>=1089470464?cr[0]>0?r=31744:(r=(2080374784&r)>>16,i=(1048575&cr[1])>>10):r<=1056964608?(i=1048576+(1048575&cr[1]),i=1048576+(i<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,i=512+(1048575&cr[1])>>10),e|r|65535&i}class hr extends Qe{}class lr extends hr{setValue(t,e){this._values.set(t,ur(e))}}class pr extends hr{setValue(t,e){this._values.set(t,e)}}class dr extends hr{setValue(t,e){this._values.set(t,e)}}const fr=Symbol.for("isArrowBigNum");function yr(t,...e){return 0===e.length?Object.setPrototypeOf(ut(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function mr(...t){return yr.apply(this,t)}function br(...t){return yr.apply(this,t)}function gr(...t){return yr.apply(this,t)}function _r(t){let e,r,{buffer:i,byteOffset:n,length:s,signed:a}=t,o=new Int32Array(i,n,s),c=0,u=0,h=o.length;for(;u<h;)r=o[u++],e=o[u++],a||(e>>>=0),c+=(r>>>0)+e*u**32;return c}let vr,wr;function xr(t){let e="",r=new Uint32Array(2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=new Uint32Array((i=new Uint16Array(i).reverse()).buffer),s=-1,a=i.length-1;do{for(r[0]=i[s=0];s<a;)i[s++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+i[s];i[s]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],e=`${r[0]}${e}`}while(n[0]||n[1]||n[2]||n[3]);return e||"0"}yr.prototype[fr]=!0,yr.prototype.toJSON=function(){return`"${vr(this)}"`},yr.prototype.valueOf=function(){return _r(this)},yr.prototype.toString=function(){return vr(this)},yr.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return _r(this);case"string":return vr(this);case"default":return wr(this)}return vr(this)},Object.setPrototypeOf(mr.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(br.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(gr.prototype,Object.create(Uint32Array.prototype)),Object.assign(mr.prototype,yr.prototype,{constructor:mr,signed:!0,TypedArray:Int32Array,BigIntArray:$}),Object.assign(br.prototype,yr.prototype,{constructor:br,signed:!1,TypedArray:Uint32Array,BigIntArray:q}),Object.assign(gr.prototype,yr.prototype,{constructor:gr,signed:!0,TypedArray:Uint32Array,BigIntArray:q}),z?(wr=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:xr(t),vr=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:xr(t)):(vr=xr,wr=vr);class Ir{static new(t,e){switch(e){case!0:return new mr(t);case!1:return new br(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case $:return new mr(t)}return 16===t.byteLength?new gr(t):new br(t)}static signed(t){return new mr(t)}static unsigned(t){return new br(t)}static decimal(t){return new gr(t)}constructor(t,e){return Ir.new(t,e)}}class Sr extends Qe{setValue(t,e){this._values.set(t,e)}}class Ar extends Sr{}class Tr extends Sr{}class Er extends Sr{}class kr extends Sr{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(Mr)),super(t),this._values=new Ke(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(Mr(t))}}class Br extends Sr{}class Dr extends Sr{}class Cr extends Sr{}class Lr extends Sr{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(Mr)),super(t),this._values=new Ke(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(Mr(t))}}const Mr=(Or={BigIntArray:$},t=>(ArrayBuffer.isView(t)&&(Or.buffer=t.buffer,Or.byteOffset=t.byteOffset,Or.byteLength=t.byteLength,t=wr(Or),Or.buffer=null),t));var Or;class Nr extends Qe{}class Fr extends Nr{}class Ur extends Nr{}class Vr extends Nr{}class Pr extends Nr{}class Rr extends Qe{}class jr extends Rr{}class zr extends Rr{}class $r extends Rr{}class Wr extends Rr{}class qr extends Qe{}class Hr extends qr{}class Yr extends qr{}class Gr extends Ze{constructor(t){super(t),this._values=new qe(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,lt(e))}_flushPending(t,e){const r=this._offsets,i=this._values.reserve(e).buffer;let n,s=0,a=0,o=0;for([s,n]of t)void 0===n?r.set(s,0):(a=n.length,i.set(n,o),r.set(s,a),o+=a)}}class Kr extends Ze{constructor(t){super(t),this._values=new qe(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,F(e))}_flushPending(t,e){}}Kr.prototype._flushPending=Gr.prototype._flushPending;class Jr{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof xt?t:(this._values=t,this)}}const Qr=Symbol.for("parent"),Zr=Symbol.for("rowIndex"),Xr=Symbol.for("keyToIdx"),ti=Symbol.for("idxToVal"),ei=Symbol.for("nodejs.util.inspect.custom");class ri{constructor(t,e){this[Qr]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e;if(null!=t){const r=this[Xr]||(this[Xr]=new Map);let i=r.get(t);if(void 0!==i){const t=this[ti]||(this[ti]=new Array(this.size));void 0!==(e=t[i])||(t[i]=e=this.getValue(i))}else if((i=this.getIndex(t))>-1){r.set(t,i);const n=this[ti]||(this[ti]=new Array(this.size));void 0!==(e=n[i])||(n[i]=e=this.getValue(i))}}return e}set(t,e){if(null!=t){const r=this[Xr]||(this[Xr]=new Map);let i=r.get(t);if(void 0===i&&r.set(t,i=this.getIndex(t)),i>-1){(this[ti]||(this[ti]=new Array(this.size)))[i]=this.setValue(i,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),r=this[Xr]||(this[Xr]=new Map),i=this[ti]||(this[ti]=new Array(this.size));for(let n,s,a,o,c=0;!(a=t.next()).done&&!(o=e.next()).done;++c)n=a.value,s=o.value,i[c]=s,r.has(n)||r.set(n,c),yield[n,s]}forEach(t,e){const r=this.keys(),i=this.values(),n=void 0===e?t:(r,i,n)=>t.call(e,r,i,n),s=this[Xr]||(this[Xr]=new Map),a=this[ti]||(this[ti]=new Array(this.size));for(let t,e,o,c,u=0;!(o=r.next()).done&&!(c=i.next()).done;++u)t=o.value,e=c.value,a[u]=e,s.has(t)||s.set(t,u),n(e,t,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach(((e,r)=>t[r]=e)),t}inspect(){return this.toString()}[ei](){return this.toString()}toString(){const t=[];return this.forEach(((e,r)=>{r=ze(r),e=ze(e),t.push(`${r}: ${e}`)})),`{ ${t.join(", ")} }`}}ri[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Qr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Zr]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(ri.prototype);class ii extends ri{constructor(t){return super(t,t.length),ai(this)}keys(){return this[Qr].getChildAt(0)[Symbol.iterator]()}values(){return this[Qr].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[Qr].getChildAt(0).get(t)}getIndex(t){return this[Qr].getChildAt(0).indexOf(t)}getValue(t){return this[Qr].getChildAt(1).get(t)}setValue(t,e){this[Qr].getChildAt(1).set(t,e)}}class ni extends ri{constructor(t){return super(t,t.type.children.length),si(this)}*keys(){for(const t of this[Qr].type.children)yield t.name}*values(){for(const t of this[Qr].type.children)yield this[t.name]}getKey(t){return this[Qr].type.children[t].name}getIndex(t){return this[Qr].type.children.findIndex((e=>e.name===t))}getValue(t){return this[Qr].getChildAt(t).get(this[Zr])}setValue(t,e){return this[Qr].getChildAt(t).set(this[Zr],e)}}Object.setPrototypeOf(ri.prototype,Map.prototype);const si=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let r=-1,i=e[Xr]||(e[Xr]=new Map);const n=t=>function(){return this.get(t)},s=t=>function(e){return this.set(t,e)};for(const a of e.keys())i.set(a,++r),t.get=n(a),t.set=s(a),e.hasOwnProperty(a)||(t.enumerable=!0,Object.defineProperty(e,a,t)),e.hasOwnProperty(r)||(t.enumerable=!1,Object.defineProperty(e,r,t));return t.get=t.set=null,e}})(),ai=(()=>{if("undefined"==typeof Proxy)return si;const t=ri.prototype.has,e=ri.prototype.get,r=ri.prototype.set,i=ri.prototype.getKey,n={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map((t=>`${t}`)),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Qr:case Zr:case ti:case Xr:case ei:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(r,n,s){switch(n){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Qr:case Zr:case ti:case Xr:case ei:return Reflect.get(r,n,s)}return"number"!=typeof n||t.call(s,n)||(n=i.call(s,n)),e.call(s,n)},set(e,n,s,a){switch(n){case Qr:case Zr:case ti:case Xr:return Reflect.set(e,n,s,a);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof n||t.call(a,n)||(n=i.call(a,n)),!!t.call(a,n)&&!!r.call(a,n,s)}};return t=>new Proxy(t,n)})();let oi;function ci(t,e,r,i){let{length:n=0}=t,s="number"!=typeof e?0:e,a="number"!=typeof r?n:r;return s<0&&(s=(s%n+n)%n),a<0&&(a=(a%n+n)%n),a<s&&(oi=s,s=a,a=oi),a>n&&(a=n),i?i(t,s,a):[s,a]}const ui=z?j(0):0,hi=t=>t!=t;function li(t){let e=typeof t;if("object"!==e||null===t)return hi(t)?hi:"bigint"!==e?e=>e===t:e=>ui+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let r=0,i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[r]!==e[r])return!1}while(++r<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const r=[];return t.forEach((t=>r[++e]=li(t))),pi(r)}(t):Array.isArray(t)?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=li(t[r]);return pi(e)}(t):t instanceof xt?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=li(t.get(r));return pi(e)}(t):function(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const r=[];for(let i=-1,n=e.length;++i<n;)r[i]=li(t[e[i]]);return pi(r,e)}(t)}function pi(t,e){return r=>{if(!r||"object"!=typeof r)return!1;switch(r.constructor){case Array:return function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e[i]))return!1;return!0}(t,r);case Map:case ii:case ni:return di(t,r,r.keys());case Object:case void 0:return di(t,r,e||Object.keys(r))}return r instanceof xt&&function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e.get(i)))return!1;return!0}(t,r)}}function di(t,e,r){const i=r[Symbol.iterator](),n=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0,o=t.length,c=s.next(),u=i.next(),h=n.next();for(;a<o&&!u.done&&!h.done&&!c.done&&(u.value===h.value&&t[a](c.value));++a,u=i.next(),h=n.next(),c=s.next());return!!(a===o&&u.done&&h.done&&c.done)||(i.return&&i.return(),n.return&&n.return(),s.return&&s.return(),!1)}class fi extends xt{constructor(t,e=[],r=function(t){let e=new Uint32Array((t||[]).length+1),r=e[0]=0,i=e.length;for(let n=0;++n<i;)e[n]=r+=t[n-1].length;return e}(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=r,this._length=r[r.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return xi(xt,t)}static concat(...t){const e=fi.flatten(...t);return new fi(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce(((t,e)=>t+e.byteLength),0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce(((t,{nullCount:e})=>t+e),0)),t}get indices(){if(te.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:fi.concat(...t.map((t=>t.indices)))}return this._indices}return null}get dictionary(){return te.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new fi(this._type,t)}concat(...t){return this.clone(fi.flatten(this,...t))}slice(t,e){return ci(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this._type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new fi(r.type,i):null}search(t,e){let r=t,i=this._chunkOffsets,n=i.length-1;if(r<0)return null;if(r>=i[n])return null;if(n<=1)return e?e(this,0,r):[0,r];let s=0,a=0,o=0;do{if(s+1===n)return e?e(this,s,r-a):[s,r-a];o=s+(n-s)/2|0,r>=i[o]?s=o:n=o}while(r<i[n]&&r>=(a=i[s]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,(({chunks:t},r,i)=>t[r].set(i,e)))}indexOf(t,e){return e&&"number"==typeof e?this.search(e,((e,r,i)=>this.indexOfInternal(e,r,i,t))):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let r=this._type.ArrayType;if(e<=0)return new r(0);if(e<=1)return t[0].toArray();let i=0,n=new Array(e);for(let r=-1;++r<e;)i+=(n[r]=t[r].toArray()).length;r!==n[0].constructor&&(r=n[0].constructor);let s=new r(i),a=r===Array?mi:yi;for(let t=-1,r=0;++t<e;)r=a(n[t],s,r);return s}getInternal({_chunks:t},e,r){return t[e].get(r)}isValidInternal({_chunks:t},e,r){return t[e].isValid(r)}indexOfInternal({_chunks:t},e,r,i){let n=e-1,s=t.length,a=r,o=0,c=-1;for(;++n<s;){if(~(c=t[n].indexOf(i,a)))return o+c;a=0,o+=t[n].length}return-1}_sliceInternal(t,e,r){const i=[],{chunks:n,_chunkOffsets:s}=t;for(let t=-1,a=n.length;++t<a;){const a=n[t],o=a.length,c=s[t];if(c>=r)break;if(e>=c+o)continue;if(c>=e&&c+o<=r){i.push(a);continue}const u=Math.max(0,e-c),h=Math.min(r-c,o);i.push(a.slice(u,h))}return t.clone(i)}}const yi=(t,e,r)=>(e.set(t,r),r+t.length),mi=(t,e,r)=>{let i=r;for(let r=-1,n=t.length;++r<n;)e[i++]=t[r];return i};class bi extends fi{constructor(t,e=[],r){if(e=fi.flatten(...e),super(t.type,e,r),this._field=t,1===e.length&&!(this instanceof gi))return new gi(t,e[0],this._chunkOffsets)}static new(...t){let[e,r,...i]=t;"string"==typeof e||e instanceof Di||(r=e,e="");const n=fi.flatten(Array.isArray(r)?[...r,...i]:r instanceof xt?[r,...i]:[xt.new(r,...i)]);if("string"==typeof e){const t=n[0].data.type;e=new Di(e,t,!0)}else!e.nullable&&n.some((({nullCount:t})=>t>0))&&(e=e.clone({nullable:!0}));return new bi(e,n)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new bi(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this.type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new bi(r,i):null}}class gi extends bi{constructor(t,e,r){super(t,[e],r),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const _i=Array.isArray,vi=(t,e)=>Si(t,e,[],0),wi=t=>ki(t,[[],[]]),xi=(t,e)=>Ai(t,e,[],0),Ii=(t,e)=>Ti(t,e,[],0);function Si(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)_i(n=e[a])?s=Si(t,n,r,s).length:n instanceof t&&(r[s++]=n);return r}function Ai(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)_i(n=e[a])?s=Ai(t,n,r,s).length:n instanceof fi?s=Ai(t,n.chunks,r,s).length:n instanceof t&&(r[s++]=n);return r}function Ti(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)_i(n=e[a])?s=Ti(t,n,r,s).length:n instanceof t?s=Si(xt,n.schema.fields.map(((t,e)=>n.getChildAt(e))),r,s).length:n instanceof xt&&(r[s++]=n);return r}const Ei=(t,[e,r],i)=>(t[0][i]=e,t[1][i]=r,t);function ki(t,e){let r,i;switch(i=t.length){case 0:return e;case 1:if(r=e[0],!t[0])return e;if(_i(t[0]))return ki(t[0],e);t[0]instanceof je||t[0]instanceof xt||t[0]instanceof te||([r,t]=Object.entries(t[0]).reduce(Ei,e));break;default:_i(r=t[i-1])?t=_i(t[0])?t[0]:t.slice(0,i-1):(t=_i(t[0])?t[0]:t,r=[])}let n,s,a=-1,o=-1,c=-1,u=t.length,[h,l]=e;for(;++c<u;)s=t[c],s instanceof bi&&(l[++o]=s)?h[++a]=s.field.clone(r[c],s.type,!0):(({[c]:n=c}=r),s instanceof te&&(l[++o]=s)?h[++a]=Di.new(n,s,!0):s&&s.type&&(l[++o]=s)&&(s instanceof je&&(l[o]=s=xt.new(s)),h[++a]=Di.new(n,s.type,!0)));return e}class Bi{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=Li(t)),this.dictionaries=r}static from(...t){return Bi.new(t[0],t[1])}static new(...t){return new Bi(wi(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}compareTo(t){return Xt.compareSchemas(this,t)}select(...t){const e=t.reduce(((t,e)=>(t[e]=!0)&&t),Object.create(null));return new Bi(this.fields.filter((t=>e[t.name])),this.metadata)}selectAt(...t){return new Bi(t.map((t=>this.fields[t])).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof Bi?t[0]:new Bi(vi(Di,t)),r=[...this.fields],i=Ci(Ci(new Map,this.metadata),e.metadata),n=e.fields.filter((t=>{const e=r.findIndex((e=>e.name===t.name));return!~e||(r[e]=t.clone({metadata:Ci(Ci(new Map,r[e].metadata),t.metadata)}))&&!1})),s=Li(n,new Map);return new Bi([...r,...n],i,new Map([...this.dictionaries,...s]))}}class Di{constructor(t,e,r=!1,i){this.name=t,this.type=e,this.nullable=r,this.metadata=i||new Map}static new(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===r&&(r=t[0].type),void 0===i&&(i=t[0].nullable),void 0===n&&(n=t[0].metadata)),new Di(`${e}`,r,i,n)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return Xt.compareField(this,t)}clone(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:r=this.type,nullable:i=this.nullable,metadata:n=this.metadata}=t[0]):[e=this.name,r=this.type,i=this.nullable,n=this.metadata]=t,Di.new(e,r,i,n)}}function Ci(t,e){return new Map([...t||new Map,...e||new Map])}function Li(t,e=new Map){for(let r=-1,i=t.length;++r<i;){const i=t[r].type;if(te.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&Li(i.children,e)}return e}Bi.prototype.fields=null,Bi.prototype.metadata=null,Bi.prototype.dictionaries=null,Di.prototype.type=null,Di.prototype.name=null,Di.prototype.nullable=null,Di.prototype.metadata=null;class Mi extends Ze{constructor(t){super(t),this._run=new Jr,this._offsets=new Ge}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ce(new Di(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,r=this._offsets,i=this._setValue;let n,s=0;for([s,n]of t)void 0===n?r.set(s,0):(r.set(s,n.length),i(this,s,e.bind(n)))}}class Oi extends Je{constructor(){super(...arguments),this._run=new Jr}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Ne(this.type.listSize,new Di(e,t.type,!0)),r}clear(){return this._run.clear(),super.clear()}}class Ni extends Ze{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.size),this._pendingLength+=e.size,r.set(t,e)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Fe(new Di(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,r=this._setValue;t.forEach(((t,i)=>{void 0===t?e.set(i,0):(e.set(i,t.size),r(this,i,t))}))}}class Fi extends Je{addChild(t,e=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Le([...this.type.children,new Di(e,t.type,!0)]),r}}class Ui extends Je{constructor(t){super(t),this._typeIds=new He(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,r){return void 0===r&&(r=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,r),this}setValue(t,e,r){this._typeIds.set(t,r),super.setValue(t,e)}addChild(t,e=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:n,typeIds:s}}=this,a=[...i,new Di(e,t.type)];return this.type=new Me(n,[...s,r],a),r}_valueToChildTypeId(t,e,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Vi extends Ui{}class Pi extends Ui{constructor(t){super(t),this._offsets=new He(new Int32Array(0))}setValue(t,e,r){const i=this.type.typeIdToChildIndex[r];return this._offsets.set(t,this.getChildAt(i).length),super.setValue(t,e,r)}}class Ri extends jt{}const ji=(t,e,r)=>{t[e]=r%4294967296|0,t[e+1]=r/4294967296|0},zi=(t,e,r,i)=>{const{[r]:n,[r+1]:s}=e;null!=n&&null!=s&&t.set(i.subarray(0,s-n),n)},$i=({values:t},e,r)=>{((t,e,r)=>{t[e]=r/864e5|0})(t,e,r.valueOf())},Wi=({values:t},e,r)=>{ji(t,2*e,r.valueOf())},qi=({stride:t,values:e},r,i)=>{e[t*r]=i},Hi=({stride:t,values:e},r,i)=>{e[t*r]=ur(i)},Yi=(t,e,r)=>{switch(typeof r){case"bigint":t.values64[e]=r;break;case"number":t.values[e*t.stride]=r;break;default:const i=r,{stride:n,ArrayType:s}=t,a=ut(s,i);t.values.set(a.subarray(0,n),n*e)}},Gi=({values:t},e,r)=>ji(t,2*e,r/1e3),Ki=({values:t},e,r)=>ji(t,2*e,r),Ji=({values:t},e,r)=>((t,e,r)=>{t[e]=1e3*r%4294967296|0,t[e+1]=1e3*r/4294967296|0})(t,2*e,r),Qi=({values:t},e,r)=>((t,e,r)=>{t[e]=1e6*r%4294967296|0,t[e+1]=1e6*r/4294967296|0})(t,2*e,r),Zi=({values:t,stride:e},r,i)=>{t[e*r]=i},Xi=({values:t,stride:e},r,i)=>{t[e*r]=i},tn=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},en=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},rn=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(t.valueOffsets[e],r)},nn=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(e,r)},sn=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},an=({values:t},e,r)=>{t[e]=12*r[0]+r[1]%12};Ri.prototype.visitBool=({offset:t,values:e},r,i)=>{const n=t+r;i?e[n>>3]|=1<<n%8:e[n>>3]&=~(1<<n%8)},Ri.prototype.visitInt=(t,e,r)=>{t.type.bitWidth<64?qi(t,e,r):Yi(t,e,r)},Ri.prototype.visitInt8=qi,Ri.prototype.visitInt16=qi,Ri.prototype.visitInt32=qi,Ri.prototype.visitInt64=Yi,Ri.prototype.visitUint8=qi,Ri.prototype.visitUint16=qi,Ri.prototype.visitUint32=qi,Ri.prototype.visitUint64=Yi,Ri.prototype.visitFloat=(t,e,r)=>{t.type.precision!==Bt.HALF?qi(t,e,r):Hi(t,e,r)},Ri.prototype.visitFloat16=Hi,Ri.prototype.visitFloat32=qi,Ri.prototype.visitFloat64=qi,Ri.prototype.visitUtf8=({values:t,valueOffsets:e},r,i)=>{zi(t,e,r,F(i))},Ri.prototype.visitBinary=({values:t,valueOffsets:e},r,i)=>zi(t,e,r,i),Ri.prototype.visitFixedSizeBinary=({stride:t,values:e},r,i)=>{e.set(i.subarray(0,t),t*r)},Ri.prototype.visitDate=(t,e,r)=>{t.type.unit===Et.DAY?$i(t,e,r):Wi(t,e,r)},Ri.prototype.visitDateDay=$i,Ri.prototype.visitDateMillisecond=Wi,Ri.prototype.visitTimestamp=(t,e,r)=>{switch(t.type.unit){case kt.SECOND:return Gi(t,e,r);case kt.MILLISECOND:return Ki(t,e,r);case kt.MICROSECOND:return Ji(t,e,r);case kt.NANOSECOND:return Qi(t,e,r)}},Ri.prototype.visitTimestampSecond=Gi,Ri.prototype.visitTimestampMillisecond=Ki,Ri.prototype.visitTimestampMicrosecond=Ji,Ri.prototype.visitTimestampNanosecond=Qi,Ri.prototype.visitTime=(t,e,r)=>{switch(t.type.unit){case kt.SECOND:return Zi(t,e,r);case kt.MILLISECOND:return Xi(t,e,r);case kt.MICROSECOND:return tn(t,e,r);case kt.NANOSECOND:return en(t,e,r)}},Ri.prototype.visitTimeSecond=Zi,Ri.prototype.visitTimeMillisecond=Xi,Ri.prototype.visitTimeMicrosecond=tn,Ri.prototype.visitTimeNanosecond=en,Ri.prototype.visitDecimal=({values:t},e,r)=>{t.set(r.subarray(0,4),4*e)},Ri.prototype.visitList=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets;for(let t=-1,s=n[e],a=n[e+1];s<a;)i.set(s++,r.get(++t))},Ri.prototype.visitStruct=(t,e,r)=>{const i=r instanceof Map?(n=e,s=r,(t,e,r)=>t&&t.set(n,s.get(e.name))):r instanceof xt?((t,e)=>(r,i,n)=>r&&r.set(t,e.get(n)))(e,r):Array.isArray(r)?((t,e)=>(r,i,n)=>r&&r.set(t,e[n]))(e,r):((t,e)=>(r,i,n)=>r&&r.set(t,e[i.name]))(e,r);var n,s;t.type.children.forEach(((e,r)=>i(t.getChildAt(r),e,r)))},Ri.prototype.visitUnion=(t,e,r)=>{t.type.mode===Dt.Dense?rn(t,e,r):nn(t,e,r)},Ri.prototype.visitDenseUnion=rn,Ri.prototype.visitSparseUnion=nn,Ri.prototype.visitDictionary=(t,e,r)=>{const i=t.getKey(e);null!==i&&t.setValue(i,r)},Ri.prototype.visitInterval=(t,e,r)=>{t.type.unit===Ct.DAY_TIME?sn(t,e,r):an(t,e,r)},Ri.prototype.visitIntervalDayTime=sn,Ri.prototype.visitIntervalYearMonth=an,Ri.prototype.visitFixedSizeList=(t,e,r)=>{const i=t.getChildAt(0),{stride:n}=t;for(let t=-1,s=e*n;++t<n;)i.set(s+t,r.get(t))},Ri.prototype.visitMap=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets,s=r instanceof Map?[...r]:Object.entries(r);for(let t=-1,r=n[e],a=n[e+1];r<a;)i.set(r++,s[++t])};const on=new Ri;const cn=new class extends jt{visitNull(){return tr}visitBool(){return Xe}visitInt(){return Sr}visitInt8(){return Ar}visitInt16(){return Tr}visitInt32(){return Er}visitInt64(){return kr}visitUint8(){return Br}visitUint16(){return Dr}visitUint32(){return Cr}visitUint64(){return Lr}visitFloat(){return hr}visitFloat16(){return lr}visitFloat32(){return pr}visitFloat64(){return dr}visitUtf8(){return Kr}visitBinary(){return Gr}visitFixedSizeBinary(){return ar}visitDate(){return er}visitDateDay(){return rr}visitDateMillisecond(){return ir}visitTimestamp(){return Rr}visitTimestampSecond(){return jr}visitTimestampMillisecond(){return zr}visitTimestampMicrosecond(){return $r}visitTimestampNanosecond(){return Wr}visitTime(){return Nr}visitTimeSecond(){return Fr}visitTimeMillisecond(){return Ur}visitTimeMicrosecond(){return Vr}visitTimeNanosecond(){return Pr}visitDecimal(){return nr}visitList(){return Mi}visitStruct(){return Fi}visitUnion(){return Ui}visitDenseUnion(){return Pi}visitSparseUnion(){return Vi}visitDictionary(){return sr}visitInterval(){return qr}visitIntervalDayTime(){return Hr}visitIntervalYearMonth(){return Yr}visitFixedSizeList(){return Oi}visitMap(){return Ni}};var un;Je.new=function t(e){const r=e.type,i=new(cn.getVisitFn(r)())(e);if(r.children&&r.children.length>0){const n=e.children||[],s={nullValues:e.nullValues},a=Array.isArray(n)?(t,e)=>n[e]||s:({name:t})=>n[t]||s;r.children.forEach(((e,r)=>{const{type:n}=e,s=a(e,r);i.children.push(t({...s,type:n}))}))}return i},Object.keys(At).map((t=>At[t])).filter((t=>"number"==typeof t&&t!==At.NONE)).forEach((t=>{cn.visit(t).prototype._setValue=on.getVisitFn(t)})),Kr.prototype._setValue=on.visitBinary,function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):It.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new It.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,r){let i=this.bb.__offset(this.bb_pos,10);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,It.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,i,n,s){return r.startFooter(t),r.addVersion(t,e),r.addSchema(t,i),r.addDictionaries(t,n),r.addRecordBatches(t,s),r.endFooter(t)}}e.Footer=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(un||(un={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}}(un||(un={}));var hn=x.Long,ln=x.Builder,pn=x.ByteBuffer,dn=un.apache.arrow.flatbuf.Block,fn=un.apache.arrow.flatbuf.Footer;class yn{constructor(t,e=Mt.V4,r,i){this.schema=t,this.version=e,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new pn(lt(t));const e=fn.getRootAsFooter(t),r=Bi.decode(e.schema());return new mn(r,e)}static encode(t){const e=new ln,r=Bi.encode(e,t.schema);fn.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach((t=>bn.encode(e,t)));const i=e.endVector();fn.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach((t=>bn.encode(e,t)));const n=e.endVector();return fn.startFooter(e),fn.addSchema(e,r),fn.addVersion(e,Mt.V4),fn.addRecordBatches(e,i),fn.addDictionaries(e,n),fn.finishFooterBuffer(e,fn.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class mn extends yn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return bn.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return bn.decode(e)}return null}}class bn{constructor(t,e,r){this.metaDataLength=t,this.offset="number"==typeof r?r:r.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new bn(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,i=new hn(e.offset,0),n=new hn(e.bodyLength,0);return dn.createBlock(t,i,r,n)}}class gn extends R{write(t){if((t=lt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?N(this.toUint8Array(!0)):this.toUint8Array(!1).then(N)}toUint8Array(t=!1){return t?ct(this._values)[0]:(async()=>{let t=[],e=0;for await(const r of this)t.push(r),e+=r.byteLength;return ct(t,e)[0]})()}}class _n{constructor(t){t&&(this.source=new wn(bt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class vn{constructor(t){t instanceof vn?this.source=t.source:t instanceof gn?this.source=new xn(bt.fromAsyncIterable(t)):nt(t)?this.source=new xn(bt.fromNodeStream(t)):it(t)?this.source=new xn(bt.fromDOMStream(t)):rt(t)?this.source=new xn(bt.fromDOMStream(t.body)):Q(t)?this.source=new xn(bt.fromIterable(t)):(J(t)||Z(t))&&(this.source=new xn(bt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class wn{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||U)}return(t){return Object.create(this.source.return&&this.source.return(t)||U)}}class xn{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||U;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||U;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class In extends _n{constructor(t,e){super(),this.position=0,this.buffer=lt(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:i}=this;return e&&i<r?("number"!=typeof t&&(t=1/0),this.position=Math.min(r,i+Math.min(r-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const r=this.buffer,i=Math.min(this.size,t+e);return r?r.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Sn extends vn{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:r}=await this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:r,position:i}=this;if(e&&i<r){"number"!=typeof t&&(t=1/0);let n=i,s=0,a=0,o=Math.min(r,n+Math.min(r-n,t)),c=new Uint8Array(Math.max(0,(this.position=o)-n));for(;(n+=a)<o&&(s+=a)<c.byteLength;)({bytesRead:a}=await e.read(c,s,c.byteLength-s,n));return c}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:r,size:i}=this;if(r&&t+e<i){const n=Math.min(i,t+e),s=new Uint8Array(n-t);return(await r.read(s,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}function An(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Tn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class En{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*r[3];this.buffer[0]=65535&i;let n=i>>>16;return i=e[2]*r[3],n+=i,i=e[3]*r[2]>>>0,n+=i,this.buffer[0]+=n<<16,this.buffer[1]=n>>>0<i?65536:0,this.buffer[1]+=n>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${An(this.buffer[1])} ${An(this.buffer[0])}`}}class kn extends En{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return kn.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return kn.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length;let i=new kn(e);for(let e=0;e<r;){const n=8<r-e?8:r-e,s=new kn(new Uint32Array([parseInt(t.substr(e,n),10),0])),a=new kn(new Uint32Array([Tn[n],0]));i.times(a),i.plus(s),e+=n}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)kn.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new kn(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new kn(new Uint32Array(t.buffer)).plus(e)}}class Bn extends En{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return Bn.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Bn.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length;let n=new Bn(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new Bn(new Uint32Array([parseInt(t.substr(e,r),10),0])),a=new Bn(new Uint32Array([Tn[r],0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)Bn.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new Bn(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Bn(new Uint32Array(t.buffer)).plus(e)}}class Dn{constructor(t){this.buffer=t}high(){return new Bn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Bn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new kn(new Uint32Array([this.buffer[3],0])),r=new kn(new Uint32Array([this.buffer[2],0])),i=new kn(new Uint32Array([this.buffer[1],0])),n=new kn(new Uint32Array([this.buffer[0],0])),s=new kn(new Uint32Array([t.buffer[3],0])),a=new kn(new Uint32Array([t.buffer[2],0])),o=new kn(new Uint32Array([t.buffer[1],0])),c=new kn(new Uint32Array([t.buffer[0],0]));let u=kn.multiply(n,c);this.buffer[0]=u.low();let h=new kn(new Uint32Array([u.high(),0]));return u=kn.multiply(i,c),h.plus(u),u=kn.multiply(n,o),h.plus(u),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(u)?1:0,this.buffer[2]=h.high(),new kn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(kn.multiply(r,c)).plus(kn.multiply(i,o)).plus(kn.multiply(n,a)),this.buffer[3]+=kn.multiply(e,c).plus(kn.multiply(r,o)).plus(kn.multiply(i,a)).plus(kn.multiply(n,s)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${An(this.buffer[3])} ${An(this.buffer[2])} ${An(this.buffer[1])} ${An(this.buffer[0])}`}static multiply(t,e){return new Dn(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Dn(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return Dn.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return Dn.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length;let n=new Dn(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new Dn(new Uint32Array([parseInt(t.substr(e,r),10),0,0,0])),a=new Dn(new Uint32Array([Tn[r],0,0,0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(4*t.length);for(let r=-1,i=t.length;++r<i;)Dn.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class Cn extends jt{constructor(t,e,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof Di?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return je.Null(t,0,e)}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Bool(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Int(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Float(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Utf8(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Binary(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.FixedSizeBinary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Date(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Timestamp(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Time(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Decimal(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.List(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Struct(t,0,e,r,this.readNullBitmap(t,r),this.visitMany(t.children))}visitUnion(t){return t.mode===Dt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Dictionary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Interval(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.FixedSizeList(t,0,e,r,this.readNullBitmap(t,r),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return je.Map(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Ln extends Cn{constructor(t,e,r,i){super(new Uint8Array(0),e,r,i),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Ut(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return ut(Uint8Array,ut(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return ut(Uint8Array,ut(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return te.isTimestamp(t)||(te.isInt(t)||te.isTime(t))&&64===t.bitWidth||te.isDate(t)&&t.unit===Et.MILLISECOND?ut(Uint8Array,Bn.convertArray(r[e])):te.isDecimal(t)?ut(Uint8Array,Dn.convertArray(r[e])):te.isBinary(t)||te.isFixedSizeBinary(t)?function(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t>>1]=parseInt(e.substr(t,2),16);return r}(r[e]):te.isBool(t)?Ut(r[e]):te.isUtf8(t)?F(r[e].join("")):ut(Uint8Array,ut(t.ArrayType,r[e].map((t=>+t))))}}var Mn=x.Long,On=It.apache.arrow.flatbuf.Null,Nn=It.apache.arrow.flatbuf.Int,Fn=It.apache.arrow.flatbuf.FloatingPoint,Un=It.apache.arrow.flatbuf.Binary,Vn=It.apache.arrow.flatbuf.Bool,Pn=It.apache.arrow.flatbuf.Utf8,Rn=It.apache.arrow.flatbuf.Decimal,jn=It.apache.arrow.flatbuf.Date,zn=It.apache.arrow.flatbuf.Time,$n=It.apache.arrow.flatbuf.Timestamp,Wn=It.apache.arrow.flatbuf.Interval,qn=It.apache.arrow.flatbuf.List,Hn=It.apache.arrow.flatbuf.Struct_,Yn=It.apache.arrow.flatbuf.Union,Gn=It.apache.arrow.flatbuf.DictionaryEncoding,Kn=It.apache.arrow.flatbuf.FixedSizeBinary,Jn=It.apache.arrow.flatbuf.FixedSizeList,Qn=It.apache.arrow.flatbuf.Map;const Zn=new class extends jt{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return On.startNull(e),On.endNull(e)}visitInt(t,e){return Nn.startInt(e),Nn.addBitWidth(e,t.bitWidth),Nn.addIsSigned(e,t.isSigned),Nn.endInt(e)}visitFloat(t,e){return Fn.startFloatingPoint(e),Fn.addPrecision(e,t.precision),Fn.endFloatingPoint(e)}visitBinary(t,e){return Un.startBinary(e),Un.endBinary(e)}visitBool(t,e){return Vn.startBool(e),Vn.endBool(e)}visitUtf8(t,e){return Pn.startUtf8(e),Pn.endUtf8(e)}visitDecimal(t,e){return Rn.startDecimal(e),Rn.addScale(e,t.scale),Rn.addPrecision(e,t.precision),Rn.endDecimal(e)}visitDate(t,e){return jn.startDate(e),jn.addUnit(e,t.unit),jn.endDate(e)}visitTime(t,e){return zn.startTime(e),zn.addUnit(e,t.unit),zn.addBitWidth(e,t.bitWidth),zn.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return $n.startTimestamp(e),$n.addUnit(e,t.unit),void 0!==r&&$n.addTimezone(e,r),$n.endTimestamp(e)}visitInterval(t,e){return Wn.startInterval(e),Wn.addUnit(e,t.unit),Wn.endInterval(e)}visitList(t,e){return qn.startList(e),qn.endList(e)}visitStruct(t,e){return Hn.startStruct_(e),Hn.endStruct_(e)}visitUnion(t,e){Yn.startTypeIdsVector(e,t.typeIds.length);const r=Yn.createTypeIdsVector(e,t.typeIds);return Yn.startUnion(e),Yn.addMode(e,t.mode),Yn.addTypeIds(e,r),Yn.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return Gn.startDictionaryEncoding(e),Gn.addId(e,new Mn(t.id,0)),Gn.addIsOrdered(e,t.isOrdered),void 0!==r&&Gn.addIndexType(e,r),Gn.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Kn.startFixedSizeBinary(e),Kn.addByteWidth(e,t.byteWidth),Kn.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Jn.startFixedSizeList(e),Jn.addListSize(e,t.listSize),Jn.endFixedSizeList(e)}visitMap(t,e){return Qn.startMap(e),Qn.addKeysSorted(e,t.keysSorted),Qn.endMap(e)}};function Xn(t){return new vs(t.count,es(t.columns),rs(t.columns))}function ts(t,e){return(t.children||[]).filter(Boolean).map((t=>Di.fromJSON(t,e)))}function es(t){return(t||[]).reduce(((t,e)=>{return[...t,new Is(e.count,(r=e.VALIDITY,(r||[]).reduce(((t,e)=>t+ +(0===e)),0))),...es(e.children)];var r}),[])}function rs(t,e=[]){for(let r=-1,i=(t||[]).length;++r<i;){const i=t[r];i.VALIDITY&&e.push(new xs(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new xs(e.length,i.TYPE.length)),i.OFFSET&&e.push(new xs(e.length,i.OFFSET.length)),i.DATA&&e.push(new xs(e.length,i.DATA.length)),e=rs(i.children,e)}return e}function is(t){return new Map(Object.entries(t||{}))}function ns(t){return new re(t.isSigned,t.bitWidth)}function ss(t,e){const r=t.type.name;switch(r){case"NONE":case"null":return new ee;case"binary":return new ye;case"utf8":return new me;case"bool":return new be;case"list":return new Ce((e||[])[0]);case"struct":case"struct_":return new Le(e||[])}switch(r){case"int":{const e=t.type;return new re(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new le(Bt[e.precision])}case"decimal":{const e=t.type;return new ge(e.scale,e.precision)}case"date":{const e=t.type;return new _e(Et[e.unit])}case"time":{const e=t.type;return new xe(kt[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new Ee(kt[e.unit],e.timezone)}case"interval":{const e=t.type;return new ke(Ct[e.unit])}case"union":{const r=t.type;return new Me(Dt[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new Oe(e.byteWidth)}case"fixedsizelist":{const r=t.type;return new Ne(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new Fe((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var as=x.Long,os=x.Builder,cs=x.ByteBuffer,us=It.apache.arrow.flatbuf.Type,hs=It.apache.arrow.flatbuf.Field,ls=It.apache.arrow.flatbuf.Schema,ps=It.apache.arrow.flatbuf.Buffer,ds=St.apache.arrow.flatbuf.Message,fs=It.apache.arrow.flatbuf.KeyValue,ys=St.apache.arrow.flatbuf.FieldNode,ms=It.apache.arrow.flatbuf.Endianness,bs=St.apache.arrow.flatbuf.RecordBatch,gs=St.apache.arrow.flatbuf.DictionaryBatch;class _s{constructor(t,e,r,i){this._version=e,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const r=new _s(0,Mt.V4,e);return r._createHeader=function(t,e){return()=>{switch(e){case Lt.Schema:return Bi.fromJSON(t);case Lt.RecordBatch:return vs.fromJSON(t);case Lt.DictionaryBatch:return ws.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Lt[e]}, type: ${e} }`)}}(t,e),r}static decode(t){t=new cs(lt(t));const e=ds.getRootAsMessage(t),r=e.bodyLength(),i=e.version(),n=e.headerType(),s=new _s(r,i,n);return s._createHeader=function(t,e){return()=>{switch(e){case Lt.Schema:return Bi.decode(t.header(new ls));case Lt.RecordBatch:return vs.decode(t.header(new bs),t.version());case Lt.DictionaryBatch:return ws.decode(t.header(new gs),t.version())}throw new Error(`Unrecognized Message type: { name: ${Lt[e]}, type: ${e} }`)}}(e,n),s}static encode(t){let e=new os,r=-1;return t.isSchema()?r=Bi.encode(e,t.header()):t.isRecordBatch()?r=vs.encode(e,t.header()):t.isDictionaryBatch()&&(r=ws.encode(e,t.header())),ds.startMessage(e),ds.addVersion(e,Mt.V4),ds.addHeader(e,r),ds.addHeaderType(e,t.headerType),ds.addBodyLength(e,new as(t.bodyLength,0)),ds.finishMessageBuffer(e,ds.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Bi)return new _s(0,Mt.V4,Lt.Schema,t);if(t instanceof vs)return new _s(e,Mt.V4,Lt.RecordBatch,t);if(t instanceof ws)return new _s(e,Mt.V4,Lt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Lt.Schema}isRecordBatch(){return this.headerType===Lt.RecordBatch}isDictionaryBatch(){return this.headerType===Lt.DictionaryBatch}}class vs{constructor(t,e,r){this._nodes=e,this._buffers=r,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ws{constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class xs{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class Is{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function Ss(t,e){const r=[];for(let i,n=-1,s=-1,a=t.childrenLength();++n<a;)(i=t.children(n))&&(r[++s]=Di.decode(i,e));return r}function As(t){const e=new Map;if(t)for(let r,i,n=-1,s=0|t.customMetadataLength();++n<s;)(r=t.customMetadata(n))&&null!=(i=r.key())&&e.set(i,r.value());return e}function Ts(t){return new re(t.isSigned(),t.bitWidth())}function Es(t,e){const r=t.typeType();switch(r){case us.NONE:case us.Null:return new ee;case us.Binary:return new ye;case us.Utf8:return new me;case us.Bool:return new be;case us.List:return new Ce((e||[])[0]);case us.Struct_:return new Le(e||[])}switch(r){case us.Int:{const e=t.type(new It.apache.arrow.flatbuf.Int);return new re(e.isSigned(),e.bitWidth())}case us.FloatingPoint:{const e=t.type(new It.apache.arrow.flatbuf.FloatingPoint);return new le(e.precision())}case us.Decimal:{const e=t.type(new It.apache.arrow.flatbuf.Decimal);return new ge(e.scale(),e.precision())}case us.Date:{const e=t.type(new It.apache.arrow.flatbuf.Date);return new _e(e.unit())}case us.Time:{const e=t.type(new It.apache.arrow.flatbuf.Time);return new xe(e.unit(),e.bitWidth())}case us.Timestamp:{const e=t.type(new It.apache.arrow.flatbuf.Timestamp);return new Ee(e.unit(),e.timezone())}case us.Interval:{const e=t.type(new It.apache.arrow.flatbuf.Interval);return new ke(e.unit())}case us.Union:{const r=t.type(new It.apache.arrow.flatbuf.Union);return new Me(r.mode(),r.typeIdsArray()||[],e||[])}case us.FixedSizeBinary:{const e=t.type(new It.apache.arrow.flatbuf.FixedSizeBinary);return new Oe(e.byteWidth())}case us.FixedSizeList:{const r=t.type(new It.apache.arrow.flatbuf.FixedSizeList);return new Ne(r.listSize(),(e||[])[0])}case us.Map:{const r=t.type(new It.apache.arrow.flatbuf.Map);return new Fe((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${us[r]}" (${r})`)}Di.encode=function(t,e){let r=-1,i=-1,n=-1,s=e.type,a=e.typeId;te.isDictionary(s)?(a=s.dictionary.typeId,n=Zn.visit(s,t),i=Zn.visit(s.dictionary,t)):i=Zn.visit(s,t);const o=(s.children||[]).map((e=>Di.encode(t,e))),c=hs.createChildrenVector(t,o),u=e.metadata&&e.metadata.size>0?hs.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return fs.startKeyValue(t),fs.addKey(t,i),fs.addValue(t,n),fs.endKeyValue(t)}))):-1;e.name&&(r=t.createString(e.name));hs.startField(t),hs.addType(t,i),hs.addTypeType(t,a),hs.addChildren(t,c),hs.addNullable(t,!!e.nullable),-1!==r&&hs.addName(t,r);-1!==n&&hs.addDictionary(t,n);-1!==u&&hs.addCustomMetadata(t,u);return hs.endField(t)},Di.decode=function(t,e){let r,i,n,s,a,o;e&&(o=t.dictionary())?e.has(r=o.id().low)?(s=(s=o.indexType())?Ts(s):new se,a=new Pe(e.get(r),s,r,o.isOrdered()),i=new Di(t.name(),a,t.nullable(),As(t))):(s=(s=o.indexType())?Ts(s):new se,e.set(r,n=Es(t,Ss(t,e))),a=new Pe(n,s,r,o.isOrdered()),i=new Di(t.name(),a,t.nullable(),As(t))):(n=Es(t,Ss(t,e)),i=new Di(t.name(),n,t.nullable(),As(t)));return i||null},Di.fromJSON=function(t,e){let r,i,n,s,a,o;return e&&(s=t.dictionary)?e.has(r=s.id)?(i=(i=s.indexType)?ns(i):new se,o=new Pe(e.get(r),i,r,s.isOrdered),n=new Di(t.name,o,t.nullable,is(t.customMetadata))):(i=(i=s.indexType)?ns(i):new se,e.set(r,a=ss(t,ts(t,e))),o=new Pe(a,i,r,s.isOrdered),n=new Di(t.name,o,t.nullable,is(t.customMetadata))):(a=ss(t,ts(t,e)),n=new Di(t.name,a,t.nullable,is(t.customMetadata))),n||null},Bi.encode=function(t,e){const r=e.fields.map((e=>Di.encode(t,e)));ls.startFieldsVector(t,r.length);const i=ls.createFieldsVector(t,r),n=e.metadata&&e.metadata.size>0?ls.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return fs.startKeyValue(t),fs.addKey(t,i),fs.addValue(t,n),fs.endKeyValue(t)}))):-1;ls.startSchema(t),ls.addFields(t,i),ls.addEndianness(t,ks?ms.Little:ms.Big),-1!==n&&ls.addCustomMetadata(t,n);return ls.endSchema(t)},Bi.decode=function(t,e=new Map){const r=function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.fieldsLength();++n<a;)(i=t.fields(n))&&(r[++s]=Di.decode(i,e));return r}(t,e);return new Bi(r,As(t),e)},Bi.fromJSON=function(t,e=new Map){return new Bi(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>Di.fromJSON(t,e)))}(t,e),is(t.customMetadata),e)},vs.encode=function(t,e){const r=e.nodes||[],i=e.buffers||[];bs.startNodesVector(t,r.length),r.slice().reverse().forEach((e=>Is.encode(t,e)));const n=t.endVector();bs.startBuffersVector(t,i.length),i.slice().reverse().forEach((e=>xs.encode(t,e)));const s=t.endVector();return bs.startRecordBatch(t),bs.addLength(t,new as(e.length,0)),bs.addNodes(t,n),bs.addBuffers(t,s),bs.endRecordBatch(t)},vs.decode=function(t,e=Mt.V4){return new vs(t.length(),function(t){const e=[];for(let r,i=-1,n=-1,s=t.nodesLength();++i<s;)(r=t.nodes(i))&&(e[++n]=Is.decode(r));return e}(t),function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.buffersLength();++n<a;)(i=t.buffers(n))&&(e<Mt.V4&&(i.bb_pos+=8*(n+1)),r[++s]=xs.decode(i));return r}(t,e))},vs.fromJSON=Xn,ws.encode=function(t,e){const r=vs.encode(t,e.data);return gs.startDictionaryBatch(t),gs.addId(t,new as(e.id,0)),gs.addIsDelta(t,e.isDelta),gs.addData(t,r),gs.endDictionaryBatch(t)},ws.decode=function(t,e=Mt.V4){return new ws(vs.decode(t.data(),e),t.id(),t.isDelta())},ws.fromJSON=function(t){return new ws(Xn(t.data),t.id,t.isDelta)},Is.encode=function(t,e){return ys.createFieldNode(t,new as(e.length,0),new as(e.nullCount,0))},Is.decode=function(t){return new Is(t.length(),t.nullCount())},xs.encode=function(t,e){return ps.createBuffer(t,new as(e.offset,0),new as(e.length,0))},xs.decode=function(t){return new xs(t.offset(),t.length())};const ks=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var Bs=x.ByteBuffer;const Ds=t=>`Expected ${Lt[t]} Message in stream, but was null or length 0.`,Cs=t=>`Header pointer of flatbuffer-encoded ${Lt[t]} Message is null or length 0.`,Ls=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Ms=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Os{constructor(t){this.source=t instanceof _n?t:new _n(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?U:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ds(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=lt(this.source.read(t));if(e.byteLength<t)throw new Error(Ms(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=Lt.Schema,r=this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(Cs(e));return i}readMetadataLength(){const t=this.source.read(Us),e=t&&new Bs(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return U;if(e.byteLength<t)throw new Error(Ls(t,e.byteLength));return{done:!1,value:_s.decode(e)}}}class Ns{constructor(t,e){this.source=t instanceof vn?t:et(t)?new Sn(t,e):new vn(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?U:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ds(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=lt(await this.source.read(t));if(e.byteLength<t)throw new Error(Ms(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=Lt.Schema,r=await this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(Cs(e));return i}async readMetadataLength(){const t=await this.source.read(Us),e=t&&new Bs(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}async readMetadata(t){const e=await this.source.read(t);if(!e)return U;if(e.byteLength<t)throw new Error(Ls(t,e.byteLength));return{done:!1,value:_s.decode(e)}}}class Fs extends Os{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof V?t:new V(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:_s.fromJSON(t.schema,Lt.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:_s.fromJSON(e,Lt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:_s.fromJSON(e,Lt.RecordBatch)}}return this._body=[],U}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,r)=>[...e,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE&&[r.TYPE]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...t(r.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ds(t));return e.value}readSchema(){const t=Lt.Schema,e=this.readMessage(t),r=e&&e.header();if(!e||!r)throw new Error(Cs(t));return r}}const Us=4,Vs="ARROW1",Ps=new Uint8Array(Vs.length);for(let t=0;t<Vs.length;t+=1)Ps[t]=Vs.charCodeAt(t);function Rs(t,e=0){for(let r=-1,i=Ps.length;++r<i;)if(Ps[r]!==t[e+r])return!1;return!0}const js=Ps.length,zs=js+Us,$s=2*js+Us;class Ws extends jt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new Ws,r=Ii($o,t),[i=e]=e.visitMany(r);return i}visit(t){if(!te.isDictionary(t.type)){const{data:e,length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");te.isNull(t.type)||qs.call(this,i<=0?new Uint8Array(0):Ft(e.offset,r,e.nullBitmap)),this.nodes.push(new Is(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function qs(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new xs(this._byteLength,e)),this._byteLength+=e,this}function Hs(t){return qs.call(this,t.values.subarray(0,t.length*t.stride))}function Ys(t){const{length:e,values:r,valueOffsets:i}=t,n=i[0],s=i[e],a=Math.min(s-n,r.byteLength-n);return qs.call(this,mt(-i[0],e,i)),qs.call(this,r.subarray(n,n+a)),this}function Gs(t){const{length:e,valueOffsets:r}=t;return r&&qs.call(this,mt(r[0],e,r)),this.visit(t.getChildAt(0))}function Ks(t){return this.visitMany(t.type.children.map(((e,r)=>t.getChildAt(r))).filter(Boolean))[0]}Ws.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?qs.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?qs.call(this,Ft(t.offset,t.length,e)):qs.call(this,Ut(t))},Ws.prototype.visitInt=Hs,Ws.prototype.visitFloat=Hs,Ws.prototype.visitUtf8=Ys,Ws.prototype.visitBinary=Ys,Ws.prototype.visitFixedSizeBinary=Hs,Ws.prototype.visitDate=Hs,Ws.prototype.visitTimestamp=Hs,Ws.prototype.visitTime=Hs,Ws.prototype.visitDecimal=Hs,Ws.prototype.visitList=Gs,Ws.prototype.visitStruct=Ks,Ws.prototype.visitUnion=function(t){const{type:e,length:r,typeIds:i,valueOffsets:n}=t;if(qs.call(this,i),e.mode===Dt.Sparse)return Ks.call(this,t);if(e.mode===Dt.Dense){if(t.offset<=0)return qs.call(this,n),Ks.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(r),u=mt(-n[0],r,n);for(let t,e,n=-1;++n<r;)-1===(e=o[t=i[n]])&&(e=o[t]=u[t]),c[n]=u[n]-e,++a[t];qs.call(this,c);for(let i,n=-1,s=e.children.length;++n<s;)if(i=t.getChildAt(n)){const t=e.typeIds[n],s=Math.min(r,a[t]);this.visit(i.slice(o[t],s))}}}return this},Ws.prototype.visitInterval=Hs,Ws.prototype.visitFixedSizeList=Gs,Ws.prototype.visitMap=Gs;class Js extends P{constructor(t){super(),this._position=0,this._started=!1,this._sink=new gn,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,K(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return J(t)?t.then((t=>this.writeAll(t))):Z(t)?ta(this,t):Xs(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var r;return t===this._sink||t instanceof gn?this._sink=t:(this._sink=new gn,t&&(K(r=t)&&G(r.abort)&&G(r.getWriter)&&!(r instanceof P))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>K(t)&&G(t.end)&&G(t.write)&&Y(t.writable)&&!(t instanceof P))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof zo&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof $o&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof $o?t instanceof Wo||this._writeRecordBatch(t):t instanceof zo?this.writeAll(t.chunks):Q(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,i=_s.encode(t),n=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=n+s+r&~r,o=a-n-s;return t.headerType===Lt.RecordBatch?this._recordBatchBlocks.push(new bn(a,t.bodyLength,this._position)):t.headerType===Lt.DictionaryBatch&&this._dictionaryBlocks.push(new bn(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),n>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=lt(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(_s.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ps)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:i,buffers:n}=Ws.assemble(t),s=new vs(t.length,r,i),a=_s.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(n)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:n,bufferRegions:s,buffers:a}=Ws.assemble(t),o=new vs(t.length,n,s),c=new ws(o,e,r),u=_s.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,r,i;for(let n=-1,s=t.length;++n<s;)(e=t[n])&&(r=e.byteLength)>0&&(this._write(e),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(r=r.slice(t)).length>0){const i="chunks"in r?r.chunks:[r];for(const r of i)this._writeDictionaryBatch(r,e,t>0),t+=r.length}}return this}}class Qs extends Js{static writeAll(t,e){const r=new Qs(e);return J(t)?t.then((t=>r.writeAll(t))):Z(t)?ta(r,t):Xs(r,t)}}class Zs extends Js{static writeAll(t){const e=new Zs;return J(t)?t.then((t=>e.writeAll(t))):Z(t)?ta(e,t):Xs(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=yn.encode(new yn(t,Mt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Xs(t,e){let r=e;e instanceof zo&&(r=e.chunks,t.reset(void 0,e.schema));for(const e of r)t.write(e);return t.finish()}async function ta(t,e){for await(const r of e)t.write(r);return t.finish()}const ea=new Uint8Array(0),ra=t=>[ea,ea,new Uint8Array(t),ea];function ia(t,e){return function(t,e){const r=[...t.fields],i=[],n={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s,a=0,o=0,c=-1,u=e.length,h=[];for(;n.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,c=-1;++c<u;)h[c]=s=e[c].shift(),o=Math.min(o,s?s.length:o);isFinite(o)&&(h=na(r,o,h,e,n),o>0&&(i[a++]=[o,h.slice()]))}return[t=new Bi(r,t.metadata),i.map((e=>new $o(t,...e)))]}(t,e.map((t=>t instanceof fi?t.chunks.map((t=>t.data)):[t.data])))}function na(t,e,r,i,n){let s,a,o=0,c=-1,u=i.length;const h=(e+63&-64)>>3;for(;++c<u;)(s=r[c])&&(o=s.length)>=e?o===e?r[c]=s:(r[c]=s.slice(0,e),s=s.slice(e,o-e),n.numBatches=Math.max(n.numBatches,i[c].unshift(s))):((a=t[c]).nullable||(t[c]=a.clone({nullable:!0})),r[c]=s?s._changeLengthAndBackfillNullBitmap(e):je.new(a.type,0,e,e,ra(h)));return r}class sa extends xt{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${At[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return xt.new(t,e)}concat(...t){return fi.concat(this,...t)}slice(t,e){return ci(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=xt.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,r){return t.clone(t.data.slice(e,r-e),null)}_bindDataAccessors(t){}}sa.prototype[Symbol.isConcatSpreadable]=!0;class aa extends sa{asUtf8(){return xt.new(this.data.clone(new me))}}class oa extends sa{static from(t){return jo((()=>new be),t)}}class ca extends sa{static from(...t){return 2===t.length?jo((()=>t[1]===Et.DAY?new ve:new we),t[0]):jo((()=>new we),t[0])}}class ua extends ca{}class ha extends ca{}class la extends sa{}class pa extends sa{constructor(t){super(t),this.indices=xt.new(t.clone(this.type.indices))}static from(...t){if(3===t.length){const[e,r,i]=t,n=new Pe(e.type,r,null,null);return xt.new(je.Dictionary(n,0,i.length,0,null,i,e))}return jo((()=>t[0].type),t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}pa.prototype.indices=null;class da extends sa{}class fa extends sa{}class ya extends sa{static from(t){let e=wa(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let r=va(t.constructor)||e;if(null===e&&(e=r),e&&e===r){let r=new e,i=t.byteLength/r.ArrayType.BYTES_PER_ELEMENT;if(!_a(e,t.constructor))return xt.new(je.Float(r,0,i,0,null,t))}}if(e)return jo((()=>new e),t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError(`Cannot infer float type from instance of ${t.constructor.name}`);throw new TypeError("Unrecognized FloatVector input")}}class ma extends ya{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class ba extends ya{}class ga extends ya{}const _a=(t,e)=>t===pe&&e!==Uint16Array,va=t=>{switch(t){case Uint16Array:return pe;case Float32Array:return de;case Float64Array:return fe;default:return null}},wa=t=>{switch(t){case ma:return pe;case ba:return de;case ga:return fe;default:return null}};class xa extends sa{}class Ia extends xa{}class Sa extends xa{}class Aa extends sa{static from(...t){let[e,r=!1]=t,i=Fa(this,r);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t=Na(e.constructor,r)||i;if(null===i&&(i=t),i&&i===t){let t=new i,r=e.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return Oa(i,e.constructor)&&(r*=.5),xt.new(je.Int(t,0,r,0,null,e))}}if(i)return jo((()=>new i),e);if(e instanceof DataView||e instanceof ArrayBuffer)throw new TypeError(`Cannot infer integer type from instance of ${e.constructor.name}`);throw new TypeError("Unrecognized IntVector input")}}class Ta extends Aa{}class Ea extends Aa{}class ka extends Aa{}class Ba extends Aa{toBigInt64Array(){return t=this.values,ut($,t);var t}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class Da extends Aa{}class Ca extends Aa{}class La extends Aa{}class Ma extends Aa{toBigUint64Array(){return t=this.values,ut(q,t);var t}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const Oa=(t,e)=>!(t!==ae&&t!==he||e!==Int32Array&&e!==Uint32Array),Na=(t,e)=>{switch(t){case Int8Array:return ie;case Int16Array:return ne;case Int32Array:return e?ae:se;case $:return ae;case Uint8Array:return oe;case Uint16Array:return ce;case Uint32Array:return e?he:ue;case q:return he;default:return null}},Fa=(t,e)=>{switch(t){case Ta:return ie;case Ea:return ne;case ka:return e?ae:se;case Ba:return ae;case Da:return oe;case Ca:return ce;case La:return e?he:ue;case Ma:return he;default:return null}};class Ua extends sa{}class Va extends sa{asList(){const t=this.type.children[0];return xt.new(this.data.clone(new Ce(t)))}bind(t){const e=this.getChildAt(0),{[t]:r,[t+1]:i}=this.valueOffsets;return new ii(e.slice(r,i))}}class Pa extends sa{}const Ra=Symbol.for("rowIndex");class ja extends sa{bind(t){const e=this._row||(this._row=new ni(this)),r=Object.create(e);return r[Ra]=t,r}}class za extends sa{}class $a extends za{}class Wa extends za{}class qa extends za{}class Ha extends za{}class Ya extends sa{}class Ga extends Ya{}class Ka extends Ya{}class Ja extends Ya{}class Qa extends Ya{}class Za extends sa{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Xa extends Za{get valueOffsets(){return this.data.valueOffsets}}class to extends Za{}class eo extends sa{static from(t){return jo((()=>new me),t)}asBinary(){return xt.new(this.data.clone(new ye))}}function ro(t){return function(){return t(this)}}function io(t){return function(e,r){return t(this,e,r)}}class no extends jt{}const so=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),ao=t=>new Date(t),oo=(t,e,r)=>{const{[r]:i,[r+1]:n}=e;return null!=i&&null!=n?t.subarray(i,n):null},co=({values:t},e)=>((t,e)=>ao(((t,e)=>864e5*t[e])(t,e)))(t,e),uo=({values:t},e)=>((t,e)=>ao(so(t,e)))(t,2*e),ho=({stride:t,values:e},r)=>e[t*r],lo=({stride:t,values:e},r)=>function(t){let e=(31744&t)>>10,r=(1023&t)/1024,i=(-1)**((32768&t)>>15);switch(e){case 31:return i*(r?NaN:1/0);case 0:return i*(r?6103515625e-14*r:0)}return i*2**(e-15)*(1+r)}(e[t*r]),po=({stride:t,values:e,type:r},i)=>Ir.new(e.subarray(t*i,t*(i+1)),r.isSigned),fo=({values:t},e)=>1e3*so(t,2*e),yo=({values:t},e)=>so(t,2*e),mo=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),bo=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),go=({values:t,stride:e},r)=>t[e*r],_o=({values:t,stride:e},r)=>t[e*r],vo=({values:t},e)=>Ir.signed(t.subarray(2*e,2*(e+1))),wo=({values:t},e)=>Ir.signed(t.subarray(2*e,2*(e+1))),xo=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(t.valueOffsets[e]):null},Io=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(e):null},So=({values:t},e)=>t.subarray(2*e,2*(e+1)),Ao=({values:t},e)=>{const r=t[e],i=new Int32Array(2);return i[0]=r/12|0,i[1]=r%12|0,i};no.prototype.visitNull=(t,e)=>null,no.prototype.visitBool=({offset:t,values:e},r)=>{const i=t+r;return 0!=(e[i>>3]&1<<i%8)},no.prototype.visitInt=(t,e)=>t.type.bitWidth<64?ho(t,e):po(t,e),no.prototype.visitInt8=ho,no.prototype.visitInt16=ho,no.prototype.visitInt32=ho,no.prototype.visitInt64=po,no.prototype.visitUint8=ho,no.prototype.visitUint16=ho,no.prototype.visitUint32=ho,no.prototype.visitUint64=po,no.prototype.visitFloat=(t,e)=>t.type.precision!==Bt.HALF?ho(t,e):lo(t,e),no.prototype.visitFloat16=lo,no.prototype.visitFloat32=ho,no.prototype.visitFloat64=ho,no.prototype.visitUtf8=({values:t,valueOffsets:e},r)=>{const i=oo(t,e,r);return null!==i?N(i):null},no.prototype.visitBinary=({values:t,valueOffsets:e},r)=>oo(t,e,r),no.prototype.visitFixedSizeBinary=({stride:t,values:e},r)=>e.subarray(t*r,t*(r+1)),no.prototype.visitDate=(t,e)=>t.type.unit===Et.DAY?co(t,e):uo(t,e),no.prototype.visitDateDay=co,no.prototype.visitDateMillisecond=uo,no.prototype.visitTimestamp=(t,e)=>{switch(t.type.unit){case kt.SECOND:return fo(t,e);case kt.MILLISECOND:return yo(t,e);case kt.MICROSECOND:return mo(t,e);case kt.NANOSECOND:return bo(t,e)}},no.prototype.visitTimestampSecond=fo,no.prototype.visitTimestampMillisecond=yo,no.prototype.visitTimestampMicrosecond=mo,no.prototype.visitTimestampNanosecond=bo,no.prototype.visitTime=(t,e)=>{switch(t.type.unit){case kt.SECOND:return go(t,e);case kt.MILLISECOND:return _o(t,e);case kt.MICROSECOND:return vo(t,e);case kt.NANOSECOND:return wo(t,e)}},no.prototype.visitTimeSecond=go,no.prototype.visitTimeMillisecond=_o,no.prototype.visitTimeMicrosecond=vo,no.prototype.visitTimeNanosecond=wo,no.prototype.visitDecimal=({values:t},e)=>Ir.decimal(t.subarray(4*e,4*(e+1))),no.prototype.visitList=(t,e)=>{const r=t.getChildAt(0),{valueOffsets:i,stride:n}=t;return r.slice(i[e*n],i[e*n+1])},no.prototype.visitStruct=(t,e)=>t.bind(e),no.prototype.visitUnion=(t,e)=>t.type.mode===Dt.Dense?xo(t,e):Io(t,e),no.prototype.visitDenseUnion=xo,no.prototype.visitSparseUnion=Io,no.prototype.visitDictionary=(t,e)=>t.getValue(t.getKey(e)),no.prototype.visitInterval=(t,e)=>t.type.unit===Ct.DAY_TIME?So(t,e):Ao(t,e),no.prototype.visitIntervalDayTime=So,no.prototype.visitIntervalYearMonth=Ao,no.prototype.visitFixedSizeList=(t,e)=>{const r=t.getChildAt(0),{stride:i}=t;return r.slice(e*i,(e+1)*i)},no.prototype.visitMap=(t,e)=>t.bind(e);const To=new no;class Eo extends jt{}function ko(t,e,r){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:r}=t.data;if(!r||t.nullCount<=0)return-1;let i=0;for(const n of Vt(r,t.data.offset+(e||0),t.length,r,Ot)){if(!n)return i;++i}return-1}(t,r);const i=li(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}function Bo(t,e,r){const i=li(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}Eo.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Eo.prototype.visitBool=ko,Eo.prototype.visitInt=ko,Eo.prototype.visitInt8=ko,Eo.prototype.visitInt16=ko,Eo.prototype.visitInt32=ko,Eo.prototype.visitInt64=ko,Eo.prototype.visitUint8=ko,Eo.prototype.visitUint16=ko,Eo.prototype.visitUint32=ko,Eo.prototype.visitUint64=ko,Eo.prototype.visitFloat=ko,Eo.prototype.visitFloat16=ko,Eo.prototype.visitFloat32=ko,Eo.prototype.visitFloat64=ko,Eo.prototype.visitUtf8=ko,Eo.prototype.visitBinary=ko,Eo.prototype.visitFixedSizeBinary=ko,Eo.prototype.visitDate=ko,Eo.prototype.visitDateDay=ko,Eo.prototype.visitDateMillisecond=ko,Eo.prototype.visitTimestamp=ko,Eo.prototype.visitTimestampSecond=ko,Eo.prototype.visitTimestampMillisecond=ko,Eo.prototype.visitTimestampMicrosecond=ko,Eo.prototype.visitTimestampNanosecond=ko,Eo.prototype.visitTime=ko,Eo.prototype.visitTimeSecond=ko,Eo.prototype.visitTimeMillisecond=ko,Eo.prototype.visitTimeMicrosecond=ko,Eo.prototype.visitTimeNanosecond=ko,Eo.prototype.visitDecimal=ko,Eo.prototype.visitList=ko,Eo.prototype.visitStruct=ko,Eo.prototype.visitUnion=ko,Eo.prototype.visitDenseUnion=Bo,Eo.prototype.visitSparseUnion=Bo,Eo.prototype.visitDictionary=ko,Eo.prototype.visitInterval=ko,Eo.prototype.visitIntervalDayTime=ko,Eo.prototype.visitIntervalYearMonth=ko,Eo.prototype.visitFixedSizeList=ko,Eo.prototype.visitMap=ko;const Do=new Eo;class Co extends jt{}function Lo(t){if(t.nullCount>0)return function(t){const e=To.getVisitFn(t);return Vt(t.data.nullBitmap,t.data.offset,t.length,t,((t,r,i,n)=>0!=(i&1<<n)?e(t,r):null))}(t);const{type:e,typeId:r,length:i}=t;return 1===t.stride&&(r===At.Timestamp||r===At.Int&&64!==e.bitWidth||r===At.Time&&64!==e.bitWidth||r===At.Float&&e.precision>0)?t.data.values.subarray(0,i)[Symbol.iterator]():function*(e){for(let r=-1;++r<i;)yield e(t,r)}(To.getVisitFn(t))}Co.prototype.visitNull=Lo,Co.prototype.visitBool=Lo,Co.prototype.visitInt=Lo,Co.prototype.visitInt8=Lo,Co.prototype.visitInt16=Lo,Co.prototype.visitInt32=Lo,Co.prototype.visitInt64=Lo,Co.prototype.visitUint8=Lo,Co.prototype.visitUint16=Lo,Co.prototype.visitUint32=Lo,Co.prototype.visitUint64=Lo,Co.prototype.visitFloat=Lo,Co.prototype.visitFloat16=Lo,Co.prototype.visitFloat32=Lo,Co.prototype.visitFloat64=Lo,Co.prototype.visitUtf8=Lo,Co.prototype.visitBinary=Lo,Co.prototype.visitFixedSizeBinary=Lo,Co.prototype.visitDate=Lo,Co.prototype.visitDateDay=Lo,Co.prototype.visitDateMillisecond=Lo,Co.prototype.visitTimestamp=Lo,Co.prototype.visitTimestampSecond=Lo,Co.prototype.visitTimestampMillisecond=Lo,Co.prototype.visitTimestampMicrosecond=Lo,Co.prototype.visitTimestampNanosecond=Lo,Co.prototype.visitTime=Lo,Co.prototype.visitTimeSecond=Lo,Co.prototype.visitTimeMillisecond=Lo,Co.prototype.visitTimeMicrosecond=Lo,Co.prototype.visitTimeNanosecond=Lo,Co.prototype.visitDecimal=Lo,Co.prototype.visitList=Lo,Co.prototype.visitStruct=Lo,Co.prototype.visitUnion=Lo,Co.prototype.visitDenseUnion=Lo,Co.prototype.visitSparseUnion=Lo,Co.prototype.visitDictionary=Lo,Co.prototype.visitInterval=Lo,Co.prototype.visitIntervalDayTime=Lo,Co.prototype.visitIntervalYearMonth=Lo,Co.prototype.visitFixedSizeList=Lo,Co.prototype.visitMap=Lo;const Mo=new Co;class Oo extends jt{}function No(t){const{type:e,length:r,stride:i}=t;switch(e.typeId){case At.Int:case At.Float:case At.Decimal:case At.Time:case At.Timestamp:return t.data.values.subarray(0,r*i)}return[...Mo.visit(t)]}Oo.prototype.visitNull=No,Oo.prototype.visitBool=No,Oo.prototype.visitInt=No,Oo.prototype.visitInt8=No,Oo.prototype.visitInt16=No,Oo.prototype.visitInt32=No,Oo.prototype.visitInt64=No,Oo.prototype.visitUint8=No,Oo.prototype.visitUint16=No,Oo.prototype.visitUint32=No,Oo.prototype.visitUint64=No,Oo.prototype.visitFloat=No,Oo.prototype.visitFloat16=No,Oo.prototype.visitFloat32=No,Oo.prototype.visitFloat64=No,Oo.prototype.visitUtf8=No,Oo.prototype.visitBinary=No,Oo.prototype.visitFixedSizeBinary=No,Oo.prototype.visitDate=No,Oo.prototype.visitDateDay=No,Oo.prototype.visitDateMillisecond=No,Oo.prototype.visitTimestamp=No,Oo.prototype.visitTimestampSecond=No,Oo.prototype.visitTimestampMillisecond=No,Oo.prototype.visitTimestampMicrosecond=No,Oo.prototype.visitTimestampNanosecond=No,Oo.prototype.visitTime=No,Oo.prototype.visitTimeSecond=No,Oo.prototype.visitTimeMillisecond=No,Oo.prototype.visitTimeMicrosecond=No,Oo.prototype.visitTimeNanosecond=No,Oo.prototype.visitDecimal=No,Oo.prototype.visitList=No,Oo.prototype.visitStruct=No,Oo.prototype.visitUnion=No,Oo.prototype.visitDenseUnion=No,Oo.prototype.visitSparseUnion=No,Oo.prototype.visitDictionary=No,Oo.prototype.visitInterval=No,Oo.prototype.visitIntervalDayTime=No,Oo.prototype.visitIntervalYearMonth=No,Oo.prototype.visitFixedSizeList=No,Oo.prototype.visitMap=No;const Fo=new Oo,Uo=(t,e)=>t+e,Vo=t=>`Cannot compute the byte width of variable-width column ${t}`;const Po=new class extends jt{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(Vo(t))}visitUtf8(t){throw new Error(Vo(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===kt.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(Vo(t))}visitStruct(t){return this.visitFields(t.children).reduce(Uo,0)}visitUnion(t){return this.visitFields(t.children).reduce(Uo,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(Uo,0)}visitMap(t){return this.visitFields(t.children).reduce(Uo,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map((t=>this.visit(t.type)))}visitSchema(t){return this.visitFields(t.fields).reduce(Uo,0)}};const Ro=new class extends jt{visitNull(){return Pa}visitBool(){return oa}visitInt(){return Aa}visitInt8(){return Ta}visitInt16(){return Ea}visitInt32(){return ka}visitInt64(){return Ba}visitUint8(){return Da}visitUint16(){return Ca}visitUint32(){return La}visitUint64(){return Ma}visitFloat(){return ya}visitFloat16(){return ma}visitFloat32(){return ba}visitFloat64(){return ga}visitUtf8(){return eo}visitBinary(){return aa}visitFixedSizeBinary(){return da}visitDate(){return ca}visitDateDay(){return ua}visitDateMillisecond(){return ha}visitTimestamp(){return za}visitTimestampSecond(){return $a}visitTimestampMillisecond(){return Wa}visitTimestampMicrosecond(){return qa}visitTimestampNanosecond(){return Ha}visitTime(){return Ya}visitTimeSecond(){return Ga}visitTimeMillisecond(){return Ka}visitTimeMicrosecond(){return Ja}visitTimeNanosecond(){return Qa}visitDecimal(){return la}visitList(){return Ua}visitStruct(){return ja}visitUnion(){return Za}visitDenseUnion(){return Xa}visitSparseUnion(){return to}visitDictionary(){return pa}visitInterval(){return xa}visitIntervalDayTime(){return Ia}visitIntervalYearMonth(){return Sa}visitFixedSizeList(){return fa}visitMap(){return Va}};function jo(t,e){if(Q(e))return xt.from({nullValues:[null,void 0],type:t(),values:e});if(Z(e))return xt.from({nullValues:[null,void 0],type:t(),values:e});const{values:r=[],type:i=t(),nullValues:n=[null,void 0]}={...e};return Q(r),xt.from({nullValues:n,...e,type:i})}xt.new=function(t,...e){return new(Ro.getVisitFn(t)())(t,...e)},xt.from=function(t){const{values:e=[],...r}={nullValues:[null,void 0],...t};if(Q(e)){const t=[...Je.throughIterable(r)(e)];return 1===t.length?t[0]:fi.concat(t)}return(async t=>{const i=Je.throughAsyncIterable(r);for await(const r of i(e))t.push(r);return 1===t.length?t[0]:fi.concat(t)})([])},sa.prototype.get=function(t){return To.visit(this,t)},sa.prototype.set=function(t,e){return on.visit(this,t,e)},sa.prototype.indexOf=function(t,e){return Do.visit(this,t,e)},sa.prototype.toArray=function(){return Fo.visit(this)},sa.prototype.getByteWidth=function(){return Po.visit(this.type)},sa.prototype[Symbol.iterator]=function(){return Mo.visit(this)},sa.prototype._bindDataAccessors=function(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,r){var i,n;i=this.nullBitmap,n=this.offset+e,(!(null==r)?(i[n>>3]|=1<<n%8,1):(i[n>>3]&=~(1<<n%8),0))&&t.call(this,e,r)}}(this.set));var e},Object.keys(At).map((t=>At[t])).filter((t=>"number"==typeof t)).filter((t=>t!==At.NONE)).forEach((t=>{const e=Ro.visit(t);e.prototype.get=function(t){return function(e){return t(this,e)}}(To.getVisitFn(t)),e.prototype.set=io(on.getVisitFn(t)),e.prototype.indexOf=io(Do.getVisitFn(t)),e.prototype.toArray=ro(Fo.getVisitFn(t)),e.prototype.getByteWidth=function(t){return function(){return t(this.type)}}(Po.getVisitFn(t)),e.prototype[Symbol.iterator]=ro(Mo.getVisitFn(t))}));class zo extends fi{constructor(...t){let e=null;t[0]instanceof Bi&&(e=t.shift());let r=vi($o,t);if(!e&&!(e=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Wo(e)),super(new Le(e.fields),r),this._schema=e,this._chunks=r}static empty(t=new Bi([])){return new zo(t,[])}static from(t){if(!t)return zo.empty();if("object"==typeof t){let e=Q(t.values)?function(t){const{type:e}=t;if(e instanceof Le)return zo.fromStruct(ja.from(t));return null}(t):Z(t.values)?function(t){const{type:e}=t;if(e instanceof Le)return ja.from(t).then((t=>zo.fromStruct(t)));return null}(t):null;if(null!==e)return e}let e=Ho.from(t);return J(e)?(async()=>await zo.from(await e))():e.isSync()&&(e=e.open())?e.schema?new zo(e.schema,[...e]):zo.empty():(async t=>{const e=await t,r=e.schema,i=[];if(r){for await(let t of e)i.push(t);return new zo(r,i)}return zo.empty()})(e.open())}static async fromAsync(t){return await zo.from(t)}static fromStruct(t){return zo.new(t.data.childData,t.type.children)}static new(...t){return new zo(...function(t){return ia(new Bi(t.map((({field:t})=>t))),t)}((t=>{const[e,r]=ki(t,[[],[]]);return r.map(((t,r)=>t instanceof bi?bi.new(t.field.clone(e[r]),t):t instanceof xt?bi.new(e[r],t):bi.new(e[r],[])))})(t)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new zo(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex((e=>e.name===t))}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r;const i=this._schema.fields,n=this._children||(this._children=[]);if(r=n[t])return r;if(e=i[t]){const r=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t));if(r.length>0)return n[t]=new bi(e,r)}return null}serialize(t="binary",e=!0){return(e?Qs:Zs).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t);return new zo(e,this._chunks.map((({length:r,data:{childData:i}})=>new $o(e,r,t.map((t=>i[t])).filter(Boolean)))))}assign(t){const e=this._schema.fields,[r,i]=t.schema.fields.reduce(((t,r,i)=>{const[n,s]=t,a=e.findIndex((t=>t.name===r.name));return~a?s[a]=i:n.push(i),t}),[[],[]]),n=this._schema.assign(t.schema),s=[...e.map(((e,r,n,s=i[r])=>void 0===s?this.getColumnAt(r):t.getColumnAt(s))),...r.map((e=>t.getColumnAt(e)))].filter(Boolean);return new zo(...ia(n,s))}}class $o extends ja{constructor(...t){let e,r,i=t[0];if(t[1]instanceof je)[,e,r]=t;else{const r=i.fields,[,n,s]=t;e=je.Struct(new Le(r),0,n,0,null,s)}super(e,r),this._schema=i}static from(t){return Q(t.values),zo.from(t)}static new(...t){const[e,r]=wi(t),i=r.filter((t=>t instanceof xt));return new $o(...function(t,e,r=e.reduce(((t,e)=>Math.max(t,e.length)),0)){let i,n,s=-1,a=e.length;const o=[...t.fields],c=[],u=(r+63&-64)>>3;for(;++s<a;)(i=e[s])&&i.length===r?c[s]=i:((n=o[s]).nullable||(o[s]=o[s].clone({nullable:!0})),c[s]=i?i._changeLengthAndBackfillNullBitmap(r):je.new(n.type,0,r,r,ra(u)));return[new Bi(o),r,c]}(new Bi(e),i.map((t=>t.data))))}clone(t,e=this._children){return new $o(this._schema,t,e)}concat(...t){const e=this._schema,r=fi.flatten(this,...t);return new zo(e,r.map((({data:t})=>new $o(e,t))))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=qo.collect(this))}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t),r=t.map((t=>this.data.childData[t])).filter(Boolean);return new $o(e,this.length,r)}}class Wo extends $o{constructor(t){super(t,0,t.fields.map((t=>je.new(t.type,0,0,0))))}}class qo extends jt{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new qo).visit(t.data,new Le(t.schema.fields)).dictionaries}visit(t,e){return te.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach(((t,r)=>this.visit(t,e.children[r].type))),this)}visitDictionary(t,e){const r=t.dictionary;return r&&r.length>0&&this.dictionaries.set(e.id,r),this}}class Ho extends P{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return J(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return bt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return bt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ho?t:X(t)?function(t){return new Yo(new rc(t))}(t):et(t)?async function(t){const{size:e}=await t.stat(),r=new Sn(t,e);if(e>=$s&&Rs(await r.readAt(0,js+7&-8)))return new Jo(new ec(r));return new Go(new Xo(r))}(t):J(t)?(async()=>await Ho.from(await t))():rt(t)||it(t)||nt(t)||Z(t)?async function(t){const e=await t.peek(js+7&-8);return e&&e.byteLength>=4?Rs(e)?new Ko(new tc(await t.read())):new Go(new Xo(t)):new Go(new Xo(async function*(){}()))}(new vn(t)):function(t){const e=t.peek(js+7&-8);return e&&e.byteLength>=4?Rs(e)?new Ko(new tc(t.read())):new Yo(new Zo(t)):new Yo(new Zo(function*(){}()))}(new _n(t))}static readAll(t){return t instanceof Ho?t.isSync()?nc(t):sc(t):X(t)||ArrayBuffer.isView(t)||Q(t)||tt(t)?nc(t):sc(t)}}class Yo extends Ho{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Go extends Ho{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Ko extends Yo{constructor(t){super(t),this._impl=t}}class Jo extends Go{constructor(t){super(t),this._impl=t}}class Qo{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new $o(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:r,isDelta:i,data:n}=t,{dictionaries:s,schema:a}=this,o=s.get(r);if(i||!o){const t=a.dictionaries.get(r);return o&&i?o.concat(xt.new(this._loadVectors(n,e,[t])[0])):xt.new(this._loadVectors(n,e,[t])[0])}return o}_loadVectors(t,e,r){return new Cn(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class Zo extends Qo{constructor(t,e){super(e),this._reader=X(t)?new Fs(this._handle=t):new Os(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=ic(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):U}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):U}next(){if(this.closed)return U;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Wo(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Xo extends Qo{constructor(t,e){super(e),this._reader=new Ns(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=ic(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):U}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):U}async next(){if(this.closed)return U;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Wo(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class tc extends Zo{constructor(t,e){super(t instanceof In?t:new In(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Lt.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Lt.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-zs,r=t.readInt32(e),i=t.readAt(e-r,r);return yn.decode(i)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class ec extends Xo{constructor(t,...e){const r="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof Sn?t:new Sn(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Lt.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Lt.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-zs,r=await t.readInt32(e),i=await t.readAt(e-r,r);return yn.decode(i)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class rc extends Zo{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new Ln(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function ic(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*nc(t){const e=Ho.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*sc(t){const e=await Ho.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}class ac{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:e,writableStrategy:r,queueingStrategy:i="count",...n}=t;this._controller=null,this._builder=Je.new(n),this._getSize="bytes"!==i?oc:cc;const{highWaterMark:s=("bytes"===i?16384:1e3)}={...e},{highWaterMark:a=("bytes"===i?16384:1e3)}={...r};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:t=>{this._maybeFlush(this._builder,this._controller=t)},start:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:s,size:"bytes"!==i?oc:cc}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const oc=t=>t.length,cc=t=>t.byteLength;class uc{eq(t){return t instanceof uc||(t=new hc(t)),new bc(this,t)}le(t){return t instanceof uc||(t=new hc(t)),new gc(this,t)}ge(t){return t instanceof uc||(t=new hc(t)),new _c(this,t)}lt(t){return new vc(this.ge(t))}gt(t){return new vc(this.le(t))}ne(t){return new vc(this.eq(t))}}class hc extends uc{constructor(t){super(),this.v=t}}class lc extends uc{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class pc{and(...t){return new yc(this,...t)}or(...t){return new mc(this,...t)}not(){return new vc(this)}}class dc extends pc{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof hc?this.right instanceof hc?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof hc?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class fc extends pc{constructor(...t){super(),this.children=t}}fc.prototype.children=Object.freeze([]);class yc extends fc{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof yc?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.every((e=>e(t,r)))}}class mc extends fc{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof mc?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.some((e=>e(t,r)))}}class bc extends dc{_bindLitLit(t,e,r){const i=e.v==r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)==n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);if(e.vector instanceof pa){let t;const i=e.vector;return i.dictionary!==this.lastDictionary?(t=i.reverseLookup(r.v),this.lastDictionary=i.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>i.getKey(e)===t}return(t,e)=>i(t,e)==r.v}_bindLitCol(t,e,r){return this._bindColLit(t,r,e)}}class gc extends dc{_bindLitLit(t,e,r){const i=e.v<=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)<=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)<=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v<=i(t,r)}}class _c extends dc{_bindLitLit(t,e,r){const i=e.v>=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)>=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)>=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v>=i(t,r)}}class vc extends pc{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,r)=>!e(t,r)}}zo.prototype.countBy=function(t){return new wc(this.chunks).countBy(t)},zo.prototype.scan=function(t,e){return new wc(this.chunks).scan(t,e)},zo.prototype.scanReverse=function(t,e){return new wc(this.chunks).scanReverse(t,e)},zo.prototype.filter=function(t){return new wc(this.chunks).filter(t)};class wc extends zo{filter(t){return new Ic(this.chunks,t)}scan(t,e){const r=this.chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n];e&&e(i);for(let e=-1,r=i.length;++e<r;)t(e,i)}}scanReverse(t,e){const r=this.chunks;for(let i=r.length;--i>=0;){const n=r[i];e&&e(n);for(let e=n.length;--e>=0;)t(e,n)}}countBy(t){const e=this.chunks,r=e.length,i="string"==typeof t?new lc(t):t;i.bind(e[r-1]);const n=i.vector;if(!te.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t];i.bind(r);const n=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=n.get(t);null!==e&&a[e]++}}return new xc(n.dictionary,Aa.from(a))}}class xc extends zo{constructor(t,e){const r=new Bi([new Di("values",t.type),new Di("counts",e.type)]);super(new $o(r,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),r={};for(let i=-1;++i<this.length;)r[t.get(i)]=e.get(i);return r}}class Ic extends wc{constructor(t,e){super(t),this._predicate=e}scan(t,e){const r=this._chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n],s=this._predicate.bind(i);let a=!1;for(let r=-1,n=i.length;++r<n;)s(r,i)&&(e&&!a&&(e(i),a=!0),t(r,i))}}scanReverse(t,e){const r=this._chunks;for(let i=r.length;--i>=0;){const n=r[i],s=this._predicate.bind(n);let a=!1;for(let r=n.length;--r>=0;)s(r,n)&&(e&&!a&&(e(n),a=!0),t(r,n))}}count(){let t=0;const e=this._chunks,r=e.length;for(let i=-1;++i<r;){const r=e[i],n=this._predicate.bind(r);for(let e=-1,i=r.length;++e<i;)n(e,r)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let r=-1;++r<e;){const e=t[r],i=this._predicate.bind(e);for(let t=-1,r=e.length;++t<r;)i(t,e)&&(yield e.get(t))}}filter(t){return new Ic(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,r=e.length,i="string"==typeof t?new lc(t):t;i.bind(e[r-1]);const n=i.vector;if(!te.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t],n=this._predicate.bind(r);i.bind(r);const s=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=s.get(t);null!==e&&n(t,r)&&a[e]++}}return new xc(n.dictionary,Aa.from(a))}}function Sc(t,e=1){return(t*e+63&-64||64)/e}function Ac(t,e,r=t.BYTES_PER_ELEMENT){return new t(Sc(e,r))}function Tc(t){return t instanceof je?t:je.new(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}bt.toDOMStream=function(t,e){if(Z(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await s(e,r||(r=t[Symbol.asyncIterator]()))},async pull(t){r?await s(t,r):t.close()},async cancel(){r&&r.return&&await r.return(),r=null}},{highWaterMark:i?n:void 0,...e});async function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=await e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=lt(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);if(Q(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){s(e,r||(r=t[Symbol.iterator]()))},pull(t){r?s(t,r):t.close()},cancel(){r&&r.return&&r.return(),r=null}},{highWaterMark:i?n:void 0,...e});function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=lt(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},Je.throughDOM=function(t){return new ac(t)},Ho.throughDOM=function(t,e){const r=new gn;let i=null;const n=new ReadableStream({async cancel(){await r.close()},async start(t){await s(t,i||(i=await async function(){return await(await Ho.from(r)).open(e)}()))},async pull(t){i?await s(t,i):t.close()}});return{writable:new WritableStream(r,{highWaterMark:16384,...t}),readable:n};async function s(t,e){let r=t.desiredSize,i=null;for(;!(i=await e.next()).done;)if(t.enqueue(i.value),null!=r&&--r<=0)return;t.close()}},Js.throughDOM=function(t,e){const r=new this(t),i=new vn(r),n=new ReadableStream({type:"bytes",async cancel(){await i.cancel()},async pull(t){await s(t)},async start(t){await s(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(r,t),readable:n};async function s(t){let e=null,r=t.desiredSize;for(;e=await i.read(r||null);)if(t.enqueue(e),null!=r&&(r-=e.byteLength)<=0)return;t.close()}};const Ec=new TextEncoder;const kc=Ec.encodeInto?function(t,e,r){return Ec.encodeInto(r,t.subarray(e)).written}:function(t,e,r){const i=Ec.encode(r);return t.set(i,e),i.length};function Bc(t,e){const r=Ac(t.ArrayType,e);return{set(t,e){r[e]=t},data:()=>({type:t,length:e,buffers:[null,r]})}}function Dc(t,e){const r=Ac(t.ArrayType,e/8);return{set(t,e){t&&(r[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,r]})}}function Cc(t,e){const r=Ac(t.ArrayType,e);return{set(t,e){r[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function Lc(t,e){const r=Ac(t.ArrayType,e);return{set(t,e){const i=e<<1;r[i]=t%4294967296|0,r[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function Mc(t,e){const r=[],i=Ac(t.indices.ArrayType,e),n=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=n[o];void 0===c&&(a+=o.length,n[o]=c=++s,r.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:Oc(t.dictionary,r,a)})}}function Oc(t,e,r){const i=function(t,e,r){const i=Ac(Int32Array,e+1),n=Ac(Uint8Array,3*r);let s=0;return{set(t,e){s+=kc(n,s,t),i[e+1]=s},data:()=>{const r=Sc(s),a=n.length>r?n.subarray(0,r):n;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,r);return e.forEach(i.set),function(t){return xt.new(Tc(t))}(i.data())}function Nc(t,e,r=!0){let i;switch(t.typeId){case w.Int:i=t.bitWidth<64?Bc:null;break;case w.Float:i=t.precision>0?Bc:null;break;case w.Dictionary:i=t.dictionary.typeId===w.Utf8&&t.indices.typeId===w.Int&&t.indices.bitWidth<64?Mc:null;break;case w.Bool:i=Dc;break;case w.Date:i=t.unit?Lc:Cc}return null==i?function(t){const e=Je.new({type:t,nullValues:[null,void 0],highWaterMark:1/0});return{set(t,r){e.set(r,t)},data:()=>e.finish().flush()}}(t):r?function(t,e){const r=Ac(Uint8Array,e/8);let i=0;return{set(e,n){null==e?++i:(t.set(e,n),r[n>>3]|=1<<n%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=r),e}}}(i(t,e),e):i(t,e)}function Fc(t,e,r,i,n=!0){const s=Nc(i,t,n);return e(r,s.set),Tc(s.data())}function Uc(t){return"bigint"==typeof t}function Vc(t){return void 0===t?t+"":Uc(t)?t+"n":JSON.stringify(t)}function Pc(t){if(t instanceof te||null==t)return t;switch(t){case w.Binary:return new ye;case w.Bool:return new be;case w.DateDay:return new ve;case w.DateMillisecond:case w.Date:return new we;case w.Dictionary:return new Pe(new me,new se);case w.Float16:return new pe;case w.Float32:return new de;case w.Float64:case w.Float:return new fe;case w.Int8:return new ie;case w.Int16:return new ne;case w.Int32:case w.Int:return new se;case w.Int64:return new ae;case w.IntervalDayTime:return new Be;case w.Interval:case w.IntervalYearMonth:return new De;case w.Null:return new ee;case w.TimeMicrosecond:return new Ae;case w.TimeMillisecond:case w.Time:return new Se;case w.TimeNanosecond:return new Te;case w.TimeSecond:return new Ie;case w.Uint8:return new oe;case w.Uint16:return new ce;case w.Uint32:return new ue;case w.Uint64:return new he;case w.Utf8:return new me;default:s(`Unsupported type code: ${Vc(t)}. Use a data type constructor instead?`)}}const Rc=Object.getPrototypeOf(Int8Array);function jc(t){return t instanceof Rc}function zc(t){return e(t)||jc(t)}function $c(t,e){const r=Wc();return t(e,r.add),r}function Wc(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const r=typeof e;if("string"===r)++t.strings;else if("number"===r)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===r)++t.bools;else if("object"===r)if(l(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(zc(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const r=t.array_prof||(t.array_prof=Wc());e.forEach(r.add)}else{++t.structs;const r=t.struct_prof||(t.struct_prof={});for(const t in e){(r[t]||(r[t]=Wc())).add(e[t])}}else"bigint"===r&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>Pc(function(t){const e=t.count-t.nulls;if(0===e)return w.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?w.Float64:e<128?w.Int8:e<32768?w.Int16:w.Int32:e>=2**32?w.Float64:e<256?w.Uint8:e<65536?w.Uint16:w.Uint32}if(t.nums===e)return w.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?w.Int64:s(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?w.Uint64:s(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return w.Bool;if(t.utcdays===e)return w.DateDay;if(t.dates===e)return w.DateMillisecond;if(t.arrays===e){const e=Di.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new Ne(t.minlen,e):new Ce(e)}if(t.structs===e){const e=t.struct_prof;return new Le(Object.keys(e).map((t=>Di.new(t,e[t].type(),!0))))}if(t.strings>0)return w.Dictionary;s("Type inference failure")}(t))};return t}function qc(t,e,r,i,n,s=!0){if(!(n=Pc(n))){const t=$c(i,e);s=t.nulls>0,n=t.type()}return Fc(r,i,e,n,s)}function Hc(t,e,r,i,n,s=!0){n=Pc(n);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=(u=a)instanceof xt?u:u.vector instanceof xt?u.vector:null;var u;if(c&&o&&Yc(c.type,n))return c;const h=a.data;if(jc(h)){const t=function(t){const e={Float32Array:de,Float64Array:fe,Int8Array:ie,Int16Array:ne,Int32Array:se,Uint8Array:oe,Uint16Array:ce,Uint32Array:ue,BigInt64Array:ae,BigUint64Array:he}[t.constructor.name];return e?new e:null}(h);if(o&&t&&Yc(t,n))return function(t,e){const r=t.length,i=Sc(r,t.BYTES_PER_ELEMENT);let n=t;return r!==i&&(n=new t.constructor(i),n.set(t)),Tc({type:e,length:r,buffers:[null,n]})}(h,t);n=n||t,s=!1}if(!n){const t=$c(i,a);s=t.nulls>0,n=t.type()}return Fc(r,i,a,n,s)}function Yc(t,e){return!t||!e||t.compareTo(e)}function Gc(t,e,r){const i=Math.min(t.length,r+e);return(e,n)=>{for(let s=r;s<i;++s)n(t[s][e],s)}}function Kc(t,e,r){const i=0===r&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(n,s)=>{let a=-1;i&&zc(n.data)?n.data.forEach(s):t.scan((t=>s(n.get(t),++a)),!0,e,r)}}function Jc(){try{return zo}catch(t){s("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage")}}function Qc(t,r={}){const{types:i={}}=r,{dataFrom:n,names:o,nrows:c,scan:u}=function(t,r){const{columns:i,limit:n=1/0,offset:o=0}=r,c=a(i)?i(t):e(i)?i:null;if(e(t))return{dataFrom:qc,names:c||Object.keys(t[0]),nrows:Math.min(n,t.length-o),scan:Gc(t,n,o)};if(function(t){return t&&a(t.reify)}(t))return{dataFrom:Hc,names:c||t.columnNames(),nrows:Math.min(n,t.numRows()-o),scan:Kc(t,n,o)};s("Unsupported input data type")}(t,r);return Jc().new(o.map((e=>{const r=n(t,e,c,u,i[e]);return r.length===c?r:s("Column length mismatch")})),o)}function Zc(t,e){return a(e)?e(t):e||t.columnNames()}function Xc(t,e,r){const i=r.format||{},n=r.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let r=0,i=0,n=0,s=0,a=0,o=0;return t((t=>{if(++r,null==t)return void++i;const e=typeof t;if("object"===e&&l(t))++n,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",r=e.indexOf(".");if(r>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-r-1)}}var c})),{align:(i+a+n)/r>.5?"r":"l",format:{utc:n===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const r=t.column(e);return e=>t.scan((t=>e(r.get(t))))}(t,e),r);a[e]=n[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function tu(t,e,r,i,n){const s=t.data(),a=e.length;t.scan((t=>{n.row(t);for(let r=0;r<a;++r){const i=e[r];n.cell(s[e[r]].get(t),i,r)}}),!0,r,i)}function eu(t,e,r="0"){const i=t+"",n=i.length;return n<e?Array(e-n+1).join(r)+i:i}const ru=t=>(t<10?"0":"")+t;function iu(t,e,r,i,n,s,a,o,c){const u=o?"Z":"";return(t=>t<0?"-"+eu(-t,6):t>9999?"+"+eu(t,6):eu(t,4))(t)+"-"+ru(e+1)+"-"+ru(r)+(!c||a?"T"+ru(i)+":"+ru(n)+":"+ru(s)+"."+eu(a,3)+u:s?"T"+ru(i)+":"+ru(n)+":"+ru(s)+u:n||i||!o?"T"+ru(i)+":"+ru(n)+u:"")}function nu(t,e){return isNaN(t)?"Invalid Date":iu(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function su(t,e){return isNaN(t)?"Invalid Date":iu(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}function au(t,e={}){if(a(e))return e(t)+"";const r=typeof t;if("object"===r){if(l(t))return e.utc?su(t):nu(t);{const r=JSON.stringify(t,((t,e)=>jc(e)?Array.from(e):e)),i=e.maxlen||30;return r.length>i?r.slice(0,28)+""+("["===r[0]?"]":"}"):r}}if("number"===r){const r=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-r))?t.toExponential(r):t.toFixed(r)}return t+""}function ou(t,e,r={}){for(const i in t)r[i]=e(t[i],i);return r}function cu(t,e={}){const r=Zc(t,e.columns),{align:i,format:n}=Xc(t,r,e),s=function(t){return ou(t.style,(t=>a(t)?t:()=>t))}(e),o=e.null,c=(t,e)=>au(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=o?(t,e)=>null==t?o(t):c(t,e):c;let h=-1,l=-1;const p=(t,e)=>{const r=l>=0&&e?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",n=s[t]&&s[t](e,l,h)||"",a=(r?`text-align: ${r};`+(n?" ":""):"")+n;return`<${t}${a?` style="${a}"`:""}>`};let d=p("table")+p("thead")+p("tr",h)+r.map((t=>`${p("th",t)}${t}</th>`)).join("")+"</tr></thead>"+p("tbody");return tu(t,r,e.limit,e.offset,{row(t){h=t,d+=(++l?"</tr>":"")+p("tr")},cell(t,e){d+=p("td",e)+u(t,n[e])+"</td>"}}),d+"</tr></tbody></table>"}function uu(t,e=!0,r=!1){return void 0===t||t?e:r}const hu=t=>l(t)?su(t,!0):t;function lu(t,e,...r){const i=["_","$"],n=i.slice(0,r.length);return n.push('"use strict"; const '+r.map(((t,e)=>t.map(((t,r)=>`${i[e]}${r} = ${i[e]}[${r}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...n)(...r)}function pu(t,e){return lu("row","({"+(e=e||t.columnNames()).map(((t,e)=>`${JSON.stringify(t)}:_${e}.get(row)`))+"})",e.map((e=>t.column(e))))}class du extends c{static from(t,e){return new du(y(t,e),e)}constructor(t,e,r,i,n,s){ou(t,h,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,r,i,n,s)}create({data:t,names:e,filter:r,groups:i,order:n}){const s=void 0!==r?r:this.mask();return new du(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:r,rows:i,size:n}=t,s=new Int32Array(n);e.scan((t=>s[r[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===n)return t;const o=Array(a);let c=0;for(let t=0;t<n;++t)s[t]&&(o[s[t]=c++]=i[t]);const u=new Uint32Array(r.length);return e.scan((t=>u[t]=s[r[t]])),{...t,keys:u,rows:o,size:c}}(this._group,r&&s),void 0!==n?n:this._order,this._params)}assign(...t){const e=this.numRows(),r=_(this.reify());return t.forEach((t=>{t.numRows()!==e&&s("Assign row counts do not match"),(t=t.reify()).columnNames((e=>r.add(e,t.column(e))))})),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}get(t,e){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[e]):r.get(e)}getter(t){const e=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?t=>e.get(r[t]):e?t=>e.get(t):s(`Unrecognized column: ${t}`)}objects(t={}){const e=pu(this),r=[];return this.scan((t=>{r.push(e(t))}),!0,t.limit,t.offset),r}*[Symbol.iterator](){const t=pu(this),e=this.numRows();if(this.isOrdered()||this.isFiltered()){const r=this.indices();for(let i=0;i<e;++i)yield t(r[i])}else for(let r=0;r<e;++r)yield t(r)}reify(t){const e=t?t.length:this.numRows(),r=this._names;let i,n;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=r.length;i={};for(let t=0;t<o;++t){const n=r[t],o=this.column(n),c=i[n]=new(jc((s=o).data)?s.data.constructor:Array)(e);let u=-1;a((t=>c[++u]=o.get(t)))}this.isGrouped()&&(n=function(t,e,r,i){const{keys:n,rows:s,size:a}=t;let o=s,c=a,u=null;if(r){u=new Int32Array(a),e((t=>u[n[t]]=1));const t=u.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)u[t]&&(o[u[t]=c++]=s[t])}}let h=-1;const l=new Uint32Array(i);return e(c!==a?t=>l[++h]=u[n[t]]:t=>l[++h]=n[t]),{...t,keys:l,rows:o,size:c}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:r,groups:n,filter:null,order:null})}toArrow(t){return Qc(this,t)}toArrowBuffer(t){return Qc(this,t).serialize()}toCSV(t){return function(t,e={}){const r=Zc(t,e.columns),i=e.format||{},n=e.delimiter||",",s=new RegExp(`["${n}\n\r]`),a=t=>null==t?"":l(t)?su(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=r.map(a);let c="";return tu(t,r,e.limit,e.offset,{row(){c+=o.join(n)+"\n"},cell(t,e,r){o[r]=a(i[e]?i[e](t):t)}}),c+o.join(n)}(this,t)}toHTML(t){return cu(this,t)}toJSON(t){return function(t,e={}){const r=uu(e.schema),i=e.format||{},n=Zc(t,e.columns);let s="{";return r&&(s+='"schema":{"fields":'+JSON.stringify(n.map((t=>({name:t}))))+'},"data":{'),n.forEach(((r,n)=>{s+=(n?",":"")+JSON.stringify(r)+":[";const a=t.column(r),o=i[r]||hu;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(r?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const r=Zc(t,e.columns),{align:i,format:n}=Xc(t,r,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+r.map(s).join("|")+"|\n|"+r.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return tu(t,r,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(au(t,n[e]))+"|"}}),a+"\n"}(this,t)}}class fu{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}var yu={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},mu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",bu={5:mu,"5module":mu+" export import",6:mu+" const class extends export import super"},gu=/^in(stanceof)?$/,_u="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",vu="----------------------------------------------------------------------------------------------------------------------------------------------------",wu=new RegExp("["+_u+"]"),xu=new RegExp("["+_u+vu+"]");_u=vu=null;var Iu=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Su=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Au(t,e){for(var r=65536,i=0;i<e.length;i+=2){if((r+=e[i])>t)return!1;if((r+=e[i+1])>=t)return!0}}function Tu(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&wu.test(String.fromCharCode(t)):!1!==e&&Au(t,Iu)))}function Eu(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&xu.test(String.fromCharCode(t)):!1!==e&&(Au(t,Iu)||Au(t,Su)))))}var ku=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function Bu(t,e){return new ku(t,{beforeExpr:!0,binop:e})}var Du={beforeExpr:!0},Cu={startsExpr:!0},Lu={};function Mu(t,e){return void 0===e&&(e={}),e.keyword=t,Lu[t]=new ku(t,e)}var Ou={num:new ku("num",Cu),regexp:new ku("regexp",Cu),string:new ku("string",Cu),name:new ku("name",Cu),eof:new ku("eof"),bracketL:new ku("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ku("]"),braceL:new ku("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ku("}"),parenL:new ku("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ku(")"),comma:new ku(",",Du),semi:new ku(";",Du),colon:new ku(":",Du),dot:new ku("."),question:new ku("?",Du),questionDot:new ku("?."),arrow:new ku("=>",Du),template:new ku("template"),invalidTemplate:new ku("invalidTemplate"),ellipsis:new ku("...",Du),backQuote:new ku("`",Cu),dollarBraceL:new ku("${",{beforeExpr:!0,startsExpr:!0}),eq:new ku("=",{beforeExpr:!0,isAssign:!0}),assign:new ku("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ku("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ku("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Bu("||",1),logicalAND:Bu("&&",2),bitwiseOR:Bu("|",3),bitwiseXOR:Bu("^",4),bitwiseAND:Bu("&",5),equality:Bu("==/!=/===/!==",6),relational:Bu("</>/<=/>=",7),bitShift:Bu("<</>>/>>>",8),plusMin:new ku("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Bu("%",10),star:Bu("*",10),slash:Bu("/",10),starstar:new ku("**",{beforeExpr:!0}),coalesce:Bu("??",1),_break:Mu("break"),_case:Mu("case",Du),_catch:Mu("catch"),_continue:Mu("continue"),_debugger:Mu("debugger"),_default:Mu("default",Du),_do:Mu("do",{isLoop:!0,beforeExpr:!0}),_else:Mu("else",Du),_finally:Mu("finally"),_for:Mu("for",{isLoop:!0}),_function:Mu("function",Cu),_if:Mu("if"),_return:Mu("return",Du),_switch:Mu("switch"),_throw:Mu("throw",Du),_try:Mu("try"),_var:Mu("var"),_const:Mu("const"),_while:Mu("while",{isLoop:!0}),_with:Mu("with"),_new:Mu("new",{beforeExpr:!0,startsExpr:!0}),_this:Mu("this",Cu),_super:Mu("super",Cu),_class:Mu("class",Cu),_extends:Mu("extends",Du),_export:Mu("export"),_import:Mu("import",Cu),_null:Mu("null",Cu),_true:Mu("true",Cu),_false:Mu("false",Cu),_in:Mu("in",{beforeExpr:!0,binop:7}),_instanceof:Mu("instanceof",{beforeExpr:!0,binop:7}),_typeof:Mu("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Mu("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Mu("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Nu=/\r\n?|\n|\u2028|\u2029/,Fu=new RegExp(Nu.source,"g");function Uu(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var Vu=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Pu=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ru=Object.prototype,ju=Ru.hasOwnProperty,zu=Ru.toString;function $u(t,e){return ju.call(t,e)}var Wu=Array.isArray||function(t){return"[object Array]"===zu.call(t)};function qu(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var Hu=function(t,e){this.line=t,this.column=e};Hu.prototype.offset=function(t){return new Hu(this.line,this.column+t)};var Yu=function(t,e,r){this.start=e,this.end=r,null!==t.sourceFile&&(this.source=t.sourceFile)};function Gu(t,e){for(var r=1,i=0;;){Fu.lastIndex=i;var n=Fu.exec(t);if(!(n&&n.index<e))return new Hu(r,e-i);++r,i=n.index+n[0].length}}var Ku={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ju=!1;function Qu(t){var e={};for(var r in Ku)e[r]=t&&$u(t,r)?t[r]:Ku[r];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!Ju&&"object"==typeof console&&console.warn&&(Ju=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),Wu(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return Wu(e.onComment)&&(e.onComment=function(t,e){return function(r,i,n,s,a,o){var c={type:r?"Block":"Line",value:i,start:n,end:s};t.locations&&(c.loc=new Yu(this,a,o)),t.ranges&&(c.range=[n,s]),e.push(c)}}(e,e.onComment)),e}function Zu(t,e){return 2|(t?4:0)|(e?8:0)}var Xu=function(t,e,r){this.options=t=Qu(t),this.sourceFile=t.sourceFile,this.keywords=qu(bu[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=yu[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=qu(i);var n=(i?i+" ":"")+yu.strict;this.reservedWordsStrict=qu(n),this.reservedWordsStrictBind=qu(n+" "+yu.strictBind),this.input=String(e),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Nu).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Ou.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},th={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Xu.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},th.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},th.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},th.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},th.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},th.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},th.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},th.inNonArrowFunction.get=function(){return(2&this.currentThisScope().flags)>0},Xu.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r},Xu.parse=function(t,e){return new this(e,t).parse()},Xu.parseExpressionAt=function(t,e,r){var i=new this(r,t,e);return i.nextToken(),i.parseExpression()},Xu.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(Xu.prototype,th);var eh=Xu.prototype,rh=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function ih(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}eh.strictDirective=function(t){for(;;){Pu.lastIndex=t,t+=Pu.exec(this.input)[0].length;var e=rh.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){Pu.lastIndex=t+e[0].length;var r=Pu.exec(this.input),i=r.index+r[0].length,n=this.input.charAt(i);return";"===n||"}"===n||Nu.test(r[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||"!"===n&&"="===this.input.charAt(i+1))}t+=e[0].length,Pu.lastIndex=t,t+=Pu.exec(this.input)[0].length,";"===this.input[t]&&t++}},eh.eat=function(t){return this.type===t&&(this.next(),!0)},eh.isContextual=function(t){return this.type===Ou.name&&this.value===t&&!this.containsEsc},eh.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},eh.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},eh.canInsertSemicolon=function(){return this.type===Ou.eof||this.type===Ou.braceR||Nu.test(this.input.slice(this.lastTokEnd,this.start))},eh.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},eh.semicolon=function(){this.eat(Ou.semi)||this.insertSemicolon()||this.unexpected()},eh.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},eh.expect=function(t){this.eat(t)||this.unexpected()},eh.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},eh.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var r=e?t.parenthesizedAssign:t.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},eh.checkExpressionErrors=function(t,e){if(!t)return!1;var r=t.shorthandAssign,i=t.doubleProto;if(!e)return r>=0||i>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},eh.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},eh.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var nh=Xu.prototype;nh.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==Ou.eof;){var r=this.parseStatement(null,!0,e);t.body.push(r)}if(this.inModule)for(var i=0,n=Object.keys(this.undefinedExports);i<n.length;i+=1){var s=n[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var sh={kind:"loop"},ah={kind:"switch"};nh.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Pu.lastIndex=this.pos;var e=Pu.exec(this.input),r=this.pos+e[0].length,i=this.input.charCodeAt(r);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(Tu(i,!0)){for(var n=r+1;Eu(this.input.charCodeAt(n),!0);)++n;var s=this.input.slice(r,n);if(!gu.test(s))return!0}return!1},nh.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Pu.lastIndex=this.pos;var t=Pu.exec(this.input),e=this.pos+t[0].length;return!(Nu.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&Eu(this.input.charAt(e+8)))},nh.parseStatement=function(t,e,r){var i,n=this.type,s=this.startNode();switch(this.isLet(t)&&(n=Ou._var,i="let"),n){case Ou._break:case Ou._continue:return this.parseBreakContinueStatement(s,n.keyword);case Ou._debugger:return this.parseDebuggerStatement(s);case Ou._do:return this.parseDoStatement(s);case Ou._for:return this.parseForStatement(s);case Ou._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case Ou._class:return t&&this.unexpected(),this.parseClass(s,!0);case Ou._if:return this.parseIfStatement(s);case Ou._return:return this.parseReturnStatement(s);case Ou._switch:return this.parseSwitchStatement(s);case Ou._throw:return this.parseThrowStatement(s);case Ou._try:return this.parseTryStatement(s);case Ou._const:case Ou._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case Ou._while:return this.parseWhileStatement(s);case Ou._with:return this.parseWithStatement(s);case Ou.braceL:return this.parseBlock(!0,s);case Ou.semi:return this.parseEmptyStatement(s);case Ou._export:case Ou._import:if(this.options.ecmaVersion>10&&n===Ou._import){Pu.lastIndex=this.pos;var a=Pu.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===Ou._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var u=this.value,h=this.parseExpression();return n===Ou.name&&"Identifier"===h.type&&this.eat(Ou.colon)?this.parseLabeledStatement(s,u,h,t):this.parseExpressionStatement(s,h)}},nh.parseBreakContinueStatement=function(t,e){var r="break"===e;this.next(),this.eat(Ou.semi)||this.insertSemicolon()?t.label=null:this.type!==Ou.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var n=this.labels[i];if(null==t.label||n.name===t.label.name){if(null!=n.kind&&(r||"loop"===n.kind))break;if(t.label&&r)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},nh.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},nh.parseDoStatement=function(t){return this.next(),this.labels.push(sh),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(Ou._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Ou.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},nh.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(sh),this.enterScope(0),this.expect(Ou.parenL),this.type===Ou.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var r=this.isLet();if(this.type===Ou._var||this.type===Ou._const||r){var i=this.startNode(),n=r?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),(this.type===Ou._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===Ou._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=new ih,a=this.parseExpression(!0,s);return this.type===Ou._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===Ou._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,s),this.checkLValPattern(a),this.parseForIn(t,a)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},nh.parseFunctionStatement=function(t,e,r){return this.next(),this.parseFunction(t,ch|(r?0:uh),!1,e)},nh.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(Ou._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},nh.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Ou.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},nh.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Ou.braceL),this.labels.push(ah),this.enterScope(0);for(var r=!1;this.type!==Ou.braceR;)if(this.type===Ou._case||this.type===Ou._default){var i=this.type===Ou._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(Ou.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},nh.parseThrowStatement=function(t){return this.next(),Nu.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var oh=[];nh.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Ou._catch){var e=this.startNode();if(this.next(),this.eat(Ou.parenL)){e.param=this.parseBindingAtom();var r="Identifier"===e.param.type;this.enterScope(r?32:0),this.checkLValPattern(e.param,r?4:2),this.expect(Ou.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Ou._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},nh.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},nh.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(sh),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},nh.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},nh.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},nh.parseLabeledStatement=function(t,e,r,i){for(var n=0,s=this.labels;n<s.length;n+=1){s[n].name===e&&this.raise(r.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===Ou._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},nh.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},nh.parseBlock=function(t,e,r){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(Ou.braceL),t&&this.enterScope(0);this.type!==Ou.braceR;){var i=this.parseStatement(null);e.body.push(i)}return r&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},nh.parseFor=function(t,e){return t.init=e,this.expect(Ou.semi),t.test=this.type===Ou.semi?null:this.parseExpression(),this.expect(Ou.semi),t.update=this.type===Ou.parenR?null:this.parseExpression(),this.expect(Ou.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},nh.parseForIn=function(t,e){var r=this.type===Ou._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(Ou.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,r?"ForInStatement":"ForOfStatement")},nh.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i,r),this.eat(Ou.eq)?i.init=this.parseMaybeAssign(e):"const"!==r||this.type===Ou._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===Ou._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(Ou.comma))break}return t},nh.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var ch=1,uh=2;nh.parseFunction=function(t,e,r,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===Ou.star&&e&uh&&this.unexpected(),t.generator=this.eat(Ou.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&ch&&(t.id=4&e&&this.type!==Ou.name?null:this.parseIdent(),!t.id||e&uh||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Zu(t.async,t.generator)),e&ch||(t.id=this.type===Ou.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,r,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,e&ch?"FunctionDeclaration":"FunctionExpression")},nh.parseFunctionParams=function(t){this.expect(Ou.parenL),t.params=this.parseBindingList(Ou.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},nh.parseClass=function(t,e){this.next();var r=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),n=!1;for(i.body=[],this.expect(Ou.braceL);this.type!==Ou.braceR;){var s=this.parseClassElement(null!==t.superClass);s&&(i.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(n&&this.raise(s.start,"Duplicate constructor in the same class"),n=!0))}return this.strict=r,this.next(),t.body=this.finishNode(i,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},nh.parseClassElement=function(t){var e=this;if(this.eat(Ou.semi))return null;var r=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var n=e.start,s=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===Ou.parenL||i&&e.canInsertSemicolon())||(r.key&&e.unexpected(),r.computed=!1,r.key=e.startNodeAt(n,s),r.key.name=t,e.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=i("static");var n=this.eat(Ou.star),s=!1;n||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(Ou.star)):i("get")?r.kind="get":i("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var a=r.key,o=!1;return r.computed||r.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?r.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),n&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),r.kind="constructor",o=t),this.parseClassMethod(r,n,s,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},nh.parseClassMethod=function(t,e,r,i){return t.value=this.parseMethod(e,r,i),this.finishNode(t,"MethodDefinition")},nh.parseClassId=function(t,e){this.type===Ou.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},nh.parseClassSuper=function(t){t.superClass=this.eat(Ou._extends)?this.parseExprSubscripts():null},nh.parseExport=function(t,e){if(this.next(),this.eat(Ou.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==Ou.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(Ou._default)){var r;if(this.checkExport(e,"default",this.lastTokStart),this.type===Ou._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),t.declaration=this.parseFunction(i,4|ch,!1,r)}else if(this.type===Ou._class){var n=this.startNode();t.declaration=this.parseClass(n,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Ou.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},nh.checkExport=function(t,e,r){t&&($u(t,e)&&this.raiseRecoverable(r,"Duplicate export '"+e+"'"),t[e]=!0)},nh.checkPatternExport=function(t,e){var r=e.type;if("Identifier"===r)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===r)for(var i=0,n=e.properties;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===r)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===r?this.checkPatternExport(t,e.value):"AssignmentPattern"===r?this.checkPatternExport(t,e.left):"RestElement"===r?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(t,e.expression)},nh.checkVariableExport=function(t,e){if(t)for(var r=0,i=e;r<i.length;r+=1){var n=i[r];this.checkPatternExport(t,n.id)}},nh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},nh.parseExportSpecifiers=function(t){var e=[],r=!0;for(this.expect(Ou.braceL);!this.eat(Ou.braceR);){if(r)r=!1;else if(this.expect(Ou.comma),this.afterTrailingComma(Ou.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},nh.parseImport=function(t){return this.next(),this.type===Ou.string?(t.specifiers=oh,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===Ou.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},nh.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===Ou.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(Ou.comma))return t}if(this.type===Ou.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(Ou.braceL);!this.eat(Ou.braceR);){if(e)e=!1;else if(this.expect(Ou.comma),this.afterTrailingComma(Ou.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportSpecifier"))}return t},nh.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},nh.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var hh=Xu.prototype;hh.toAssignable=function(t,e,r){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,r);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return t},hh.toAssignableList=function(t,e){for(var r=t.length,i=0;i<r;i++){var n=t[i];n&&this.toAssignable(n,e)}if(r){var s=t[r-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},hh.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},hh.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Ou.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},hh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Ou.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Ou.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Ou.braceL:return this.parseObj(!0)}return this.parseIdent()},hh.parseBindingList=function(t,e,r){for(var i=[],n=!0;!this.eat(t);)if(n?n=!1:this.expect(Ou.comma),e&&this.type===Ou.comma)i.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===Ou.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===Ou.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},hh.parseBindingListItem=function(t){return t},hh.parseMaybeDefault=function(t,e,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Ou.eq))return r;var i=this.startNodeAt(t,e);return i.left=r,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},hh.checkLValSimple=function(t,e,r){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),r&&($u(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,r);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},hh.checkLValPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,e,r)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,r)}break;default:this.checkLValSimple(t,e,r)}},hh.checkLValInnerPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,r);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,r);break;case"RestElement":this.checkLValPattern(t.argument,e,r);break;default:this.checkLValPattern(t,e,r)}};var lh=Xu.prototype;lh.checkPropClash=function(t,e,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,n=t.key;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=String(n.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(r?r.doubleProto<0&&(r.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(n.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},lh.parseExpression=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===Ou.comma){var s=this.startNodeAt(r,i);for(s.expressions=[n];this.eat(Ou.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return n},lh.parseMaybeAssign=function(t,e,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,n=-1,s=-1;e?(n=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new ih,i=!0);var a=this.start,o=this.startLoc;this.type!==Ou.parenL&&this.type!==Ou.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(r&&(c=r.call(this,c,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,this.type===Ou.eq&&(c=this.toAssignable(c,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===Ou.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),n>-1&&(e.parenthesizedAssign=n),s>-1&&(e.trailingComma=s),c},lh.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(Ou.question)){var s=this.startNodeAt(r,i);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(Ou.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return n},lh.parseExprOps=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||n.start===r&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,r,i,-1,t)},lh.parseExprOp=function(t,e,r,i,n){var s=this.type.binop;if(null!=s&&(!n||this.type!==Ou._in)&&s>i){var a=this.type===Ou.logicalOR||this.type===Ou.logicalAND,o=this.type===Ou.coalesce;o&&(s=Ou.logicalAND.binop);var c=this.value;this.next();var u=this.start,h=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,h,s,n),p=this.buildBinary(e,r,t,l,c,a||o);return(a&&this.type===Ou.coalesce||o&&(this.type===Ou.logicalOR||this.type===Ou.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,r,i,n)}return t},lh.buildBinary=function(t,e,r,i,n,s){var a=this.startNodeAt(t,e);return a.left=r,a.operator=n,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},lh.parseMaybeUnary=function(t,e){var r,i=this.start,n=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===Ou.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,r=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(i,n);o.operator=this.value,o.prefix=!1,o.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(Ou.starstar)?this.buildBinary(i,n,r,this.parseMaybeUnary(null,!1),"**",!1):r},lh.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,i=this.parseExprAtom(t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var n=this.parseSubscripts(i,e,r);return t&&"MemberExpression"===n.type&&(t.parenthesizedAssign>=n.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=n.start&&(t.parenthesizedBind=-1)),n},lh.parseSubscripts=function(t,e,r,i){for(var n=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,s=!1;;){var a=this.parseSubscript(t,e,r,i,n,s);if(a.optional&&(s=!0),a===t||"ArrowFunctionExpression"===a.type){if(s){var o=this.startNodeAt(e,r);o.expression=a,a=this.finishNode(o,"ChainExpression")}return a}t=a}},lh.parseSubscript=function(t,e,r,i,n,s){var a=this.options.ecmaVersion>=11,o=a&&this.eat(Ou.questionDot);i&&o&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(Ou.bracketL);if(c||o&&this.type!==Ou.parenL&&this.type!==Ou.backQuote||this.eat(Ou.dot)){var u=this.startNodeAt(e,r);u.object=t,u.property=c?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),u.computed=!!c,c&&this.expect(Ou.bracketR),a&&(u.optional=o),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(Ou.parenL)){var h=new ih,l=this.yieldPos,p=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var f=this.parseExprList(Ou.parenR,this.options.ecmaVersion>=8,!1,h);if(n&&!o&&!this.canInsertSemicolon()&&this.eat(Ou.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=p,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(e,r),f,!0);this.checkExpressionErrors(h,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var y=this.startNodeAt(e,r);y.callee=t,y.arguments=f,a&&(y.optional=o),t=this.finishNode(y,"CallExpression")}else if(this.type===Ou.backQuote){(o||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,r);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},lh.parseExprAtom=function(t){this.type===Ou.slash&&this.readRegexp();var e,r=this.potentialArrowAt===this.start;switch(this.type){case Ou._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==Ou.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==Ou.dot&&this.type!==Ou.bracketL&&this.type!==Ou.parenL&&this.unexpected(),this.finishNode(e,"Super");case Ou._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case Ou.name:var i=this.start,n=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(Ou._function))return this.parseFunction(this.startNodeAt(i,n),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(Ou.arrow))return this.parseArrowExpression(this.startNodeAt(i,n),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===Ou.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ou.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,n),[a],!0)}return a;case Ou.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case Ou.num:case Ou.string:return this.parseLiteral(this.value);case Ou._null:case Ou._true:case Ou._false:return(e=this.startNode()).value=this.type===Ou._null?null:this.type===Ou._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case Ou.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(r);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case Ou.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(Ou.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case Ou.braceL:return this.parseObj(!1,t);case Ou._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case Ou._class:return this.parseClass(this.startNode(),!1);case Ou._new:return this.parseNew();case Ou.backQuote:return this.parseTemplate();case Ou._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},lh.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case Ou.parenL:return this.parseDynamicImport(t);case Ou.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},lh.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(Ou.parenR)){var e=this.start;this.eat(Ou.comma)&&this.eat(Ou.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},lh.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},lh.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},lh.parseParenExpression=function(){this.expect(Ou.parenL);var t=this.parseExpression();return this.expect(Ou.parenR),t},lh.parseParenAndDistinguishExpression=function(t){var e,r=this.start,i=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,c=[],u=!0,h=!1,l=new ih,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Ou.parenR;){if(u?u=!1:this.expect(Ou.comma),n&&this.afterTrailingComma(Ou.parenR,!0)){h=!0;break}if(this.type===Ou.ellipsis){s=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===Ou.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,l,this.parseParenItem))}var f=this.start,y=this.startLoc;if(this.expect(Ou.parenR),t&&!this.canInsertSemicolon()&&this.eat(Ou.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(r,i,c);c.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(l,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,c.length>1?((e=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(e,"SequenceExpression",f,y)):e=c[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},lh.parseParenItem=function(t){return t},lh.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var ph=[];lh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Ou.dot)){t.meta=e;var r=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),r&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,n=this.startLoc,s=this.type===Ou._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0),s&&"ImportExpression"===t.callee.type&&this.raise(i,"Cannot use new with import()"),this.eat(Ou.parenL)?t.arguments=this.parseExprList(Ou.parenR,this.options.ecmaVersion>=8,!1):t.arguments=ph,this.finishNode(t,"NewExpression")},lh.parseTemplateElement=function(t){var e=t.isTagged,r=this.startNode();return this.type===Ou.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===Ou.backQuote,this.finishNode(r,"TemplateElement")},lh.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(r.quasis=[i];!i.tail;)this.type===Ou.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ou.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(Ou.braceR),r.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(r,"TemplateLiteral")},lh.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Ou.name||this.type===Ou.num||this.type===Ou.string||this.type===Ou.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Ou.star)&&!Nu.test(this.input.slice(this.lastTokEnd,this.start))},lh.parseObj=function(t,e){var r=this.startNode(),i=!0,n={};for(r.properties=[],this.next();!this.eat(Ou.braceR);){if(i)i=!1;else if(this.expect(Ou.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Ou.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,n,e),r.properties.push(s)}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},lh.parseProperty=function(t,e){var r,i,n,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Ou.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===Ou.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===Ou.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===Ou.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(n=this.start,s=this.startLoc),t||(r=this.eat(Ou.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(Ou.star),this.parsePropertyName(a,e)):i=!1,this.parsePropertyValue(a,t,r,i,n,s,e,o),this.finishNode(a,"Property")},lh.parsePropertyValue=function(t,e,r,i,n,s,a,o){if((r||i)&&this.type===Ou.colon&&this.unexpected(),this.eat(Ou.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===Ou.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Ou.comma||this.type===Ou.braceR||this.type===Ou.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((r||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),t.kind="init",e?t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key)):this.type===Ou.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(r||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},lh.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Ou.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Ou.bracketR),t.key;t.computed=!1}return t.key=this.type===Ou.num||this.type===Ou.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},lh.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},lh.parseMethod=function(t,e,r){var i=this.startNode(),n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Zu(e,i.generator)|(r?128:0)),this.expect(Ou.parenL),i.params=this.parseBindingList(Ou.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},lh.parseArrowExpression=function(t,e,r){var i=this.yieldPos,n=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|Zu(r,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=n,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},lh.parseFunctionBody=function(t,e,r){var i=e&&this.type!==Ou.braceL,n=this.strict,s=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);n&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!n&&!s&&!e&&!r&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,s&&!n),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope()},lh.isSimpleParamList=function(t){for(var e=0,r=t;e<r.length;e+=1){if("Identifier"!==r[e].type)return!1}return!0},lh.checkParams=function(t,e){for(var r=Object.create(null),i=0,n=t.params;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,1,e?null:r)}},lh.parseExprList=function(t,e,r,i){for(var n=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(Ou.comma),e&&this.afterTrailingComma(t))break;var a=void 0;r&&this.type===Ou.comma?a=null:this.type===Ou.ellipsis?(a=this.parseSpread(i),i&&this.type===Ou.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),n.push(a)}return n},lh.checkUnreserved=function(t){var e=t.start,r=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},lh.parseIdent=function(t,e){var r=this.startNode();return this.type===Ou.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(r,"Identifier"),t||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},lh.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Ou.semi||this.canInsertSemicolon()||this.type!==Ou.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Ou.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},lh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var dh=Xu.prototype;dh.raise=function(t,e){var r=Gu(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i},dh.raiseRecoverable=dh.raise,dh.curPosition=function(){if(this.options.locations)return new Hu(this.curLine,this.pos-this.lineStart)};var fh=Xu.prototype,yh=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};fh.enterScope=function(t){this.scopeStack.push(new yh(t))},fh.exitScope=function(){this.scopeStack.pop()},fh.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},fh.declareName=function(t,e,r){var i=!1;if(2===e){var n=this.currentScope();i=n.lexical.indexOf(t)>-1||n.functions.indexOf(t)>-1||n.var.indexOf(t)>-1,n.lexical.push(t),this.inModule&&1&n.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}i&&this.raiseRecoverable(r,"Identifier '"+t+"' has already been declared")},fh.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},fh.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},fh.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},fh.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var mh=function(t,e,r){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Yu(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},bh=Xu.prototype;function gh(t,e,r,i){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=r),t}bh.startNode=function(){return new mh(this,this.start,this.startLoc)},bh.startNodeAt=function(t,e){return new mh(this,t,e)},bh.finishNode=function(t,e){return gh.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},bh.finishNodeAt=function(t,e,r,i){return gh.call(this,t,e,r,i)},bh.copyNode=function(t){var e=new mh(this,t.start,this.startLoc);for(var r in t)e[r]=t[r];return e};var _h=function(t,e,r,i,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!r,this.override=i,this.generator=!!n},vh={b_stat:new _h("{",!1),b_expr:new _h("{",!0),b_tmpl:new _h("${",!1),p_stat:new _h("(",!1),p_expr:new _h("(",!0),q_tmpl:new _h("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new _h("function",!1),f_expr:new _h("function",!0),f_expr_gen:new _h("function",!0,!1,null,!0),f_gen:new _h("function",!1,!1,null,!0)},wh=Xu.prototype;wh.initialContext=function(){return[vh.b_stat]},wh.braceIsBlock=function(t){var e=this.curContext();return e===vh.f_expr||e===vh.f_stat||(t!==Ou.colon||e!==vh.b_stat&&e!==vh.b_expr?t===Ou._return||t===Ou.name&&this.exprAllowed?Nu.test(this.input.slice(this.lastTokEnd,this.start)):t===Ou._else||t===Ou.semi||t===Ou.eof||t===Ou.parenR||t===Ou.arrow||(t===Ou.braceL?e===vh.b_stat:t!==Ou._var&&t!==Ou._const&&t!==Ou.name&&!this.exprAllowed):!e.isExpr)},wh.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},wh.updateContext=function(t){var e,r=this.type;r.keyword&&t===Ou.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},Ou.parenR.updateContext=Ou.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===vh.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},Ou.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?vh.b_stat:vh.b_expr),this.exprAllowed=!0},Ou.dollarBraceL.updateContext=function(){this.context.push(vh.b_tmpl),this.exprAllowed=!0},Ou.parenL.updateContext=function(t){var e=t===Ou._if||t===Ou._for||t===Ou._with||t===Ou._while;this.context.push(e?vh.p_stat:vh.p_expr),this.exprAllowed=!0},Ou.incDec.updateContext=function(){},Ou._function.updateContext=Ou._class.updateContext=function(t){!t.beforeExpr||t===Ou._else||t===Ou.semi&&this.curContext()!==vh.p_stat||t===Ou._return&&Nu.test(this.input.slice(this.lastTokEnd,this.start))||(t===Ou.colon||t===Ou.braceL)&&this.curContext()===vh.b_stat?this.context.push(vh.f_stat):this.context.push(vh.f_expr),this.exprAllowed=!1},Ou.backQuote.updateContext=function(){this.curContext()===vh.q_tmpl?this.context.pop():this.context.push(vh.q_tmpl),this.exprAllowed=!1},Ou.star.updateContext=function(t){if(t===Ou._function){var e=this.context.length-1;this.context[e]===vh.f_expr?this.context[e]=vh.f_expr_gen:this.context[e]=vh.f_gen}this.exprAllowed=!0},Ou.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Ou.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var xh="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ih=xh+" Extended_Pictographic",Sh={9:xh,10:Ih,11:Ih,12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},Ah="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Th="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Eh=Th+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",kh=Eh+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Bh={9:Th,10:Eh,11:kh,12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},Dh={};function Ch(t){var e=Dh[t]={binary:qu(Sh[t]+" "+Ah),nonBinary:{General_Category:qu(Ah),Script:qu(Bh[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Ch(9),Ch(10),Ch(11),Ch(12);var Lh=Xu.prototype,Mh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Dh[t.options.ecmaVersion>=12?12:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Oh(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Nh(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Fh(t){return t>=65&&t<=90||t>=97&&t<=122}function Uh(t){return Fh(t)||95===t}function Vh(t){return Uh(t)||Ph(t)}function Ph(t){return t>=48&&t<=57}function Rh(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function jh(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function zh(t){return t>=48&&t<=55}Mh.prototype.reset=function(t,e,r){var i=-1!==r.indexOf("u");this.start=0|t,this.source=e+"",this.flags=r,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},Mh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Mh.prototype.at=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return-1;var n=r.charCodeAt(t);if(!e&&!this.switchU||n<=55295||n>=57344||t+1>=i)return n;var s=r.charCodeAt(t+1);return s>=56320&&s<=57343?(n<<10)+s-56613888:n},Mh.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return i;var n,s=r.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(n=r.charCodeAt(t+1))<56320||n>57343?t+1:t+2},Mh.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Mh.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Mh.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Mh.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Lh.validateRegExpFlags=function(t){for(var e=t.validFlags,r=t.flags,i=0;i<r.length;i++){var n=r.charAt(i);-1===e.indexOf(n)&&this.raise(t.start,"Invalid regular expression flag"),r.indexOf(n,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Lh.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Lh.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,r=t.backReferenceNames;e<r.length;e+=1){var i=r[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},Lh.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Lh.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Lh.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Lh.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!r,!0}return t.pos=e,!1},Lh.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Lh.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Lh.regexp_eatBracedQuantifier=function(t,e){var r=t.pos;if(t.eat(123)){var i=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return-1!==n&&n<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=r}return!1},Lh.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Lh.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Lh.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Lh.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Lh.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Lh.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Lh.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Nh(e)&&(t.lastIntValue=e,t.advance(),!0)},Lh.regexp_eatPatternCharacters=function(t){for(var e=t.pos,r=0;-1!==(r=t.current())&&!Nh(r);)t.advance();return t.pos!==e},Lh.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Lh.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Lh.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Lh.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Oh(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Oh(t.lastIntValue);return!0}return!1},Lh.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return Tu(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lh.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return Eu(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lh.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Lh.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var r=t.lastIntValue;if(t.switchU)return r>t.maxBackReference&&(t.maxBackReference=r),!0;if(r<=t.numCapturingParens)return!0;t.pos=e}return!1},Lh.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Lh.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Lh.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Lh.regexp_eatZero=function(t){return 48===t.current()&&!Ph(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Lh.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Lh.regexp_eatControlLetter=function(t){var e=t.current();return!!Fh(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lh.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var r,i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(n&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((r=t.lastIntValue)>=0&&r<=1114111))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Lh.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Lh.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Lh.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Lh.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var r=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,r,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n),!0}return!1},Lh.regexp_validateUnicodePropertyNameAndValue=function(t,e,r){$u(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(r)||t.raise("Invalid property value")},Lh.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Lh.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Uh(e=t.current());)t.lastStringValue+=Oh(e),t.advance();return""!==t.lastStringValue},Lh.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Vh(e=t.current());)t.lastStringValue+=Oh(e),t.advance();return""!==t.lastStringValue},Lh.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Lh.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Lh.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var r=t.lastIntValue;!t.switchU||-1!==e&&-1!==r||t.raise("Invalid character class"),-1!==e&&-1!==r&&e>r&&t.raise("Range out of order in character class")}}},Lh.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var r=t.current();(99===r||zh(r))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},Lh.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Lh.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Ph(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lh.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Lh.regexp_eatDecimalDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;Ph(r=t.current());)t.lastIntValue=10*t.lastIntValue+(r-48),t.advance();return t.pos!==e},Lh.regexp_eatHexDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;Rh(r=t.current());)t.lastIntValue=16*t.lastIntValue+jh(r),t.advance();return t.pos!==e},Lh.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var r=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*r+t.lastIntValue:t.lastIntValue=8*e+r}else t.lastIntValue=e;return!0}return!1},Lh.regexp_eatOctalDigit=function(t){var e=t.current();return zh(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Lh.regexp_eatFixedHexDigits=function(t,e){var r=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var n=t.current();if(!Rh(n))return t.pos=r,!1;t.lastIntValue=16*t.lastIntValue+jh(n),t.advance()}return!0};var $h=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Yu(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Wh=Xu.prototype;function qh(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}function Hh(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Wh.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new $h(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wh.getToken=function(){return this.next(),new $h(this)},"undefined"!=typeof Symbol&&(Wh[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Ou.eof,value:e}}}}),Wh.curContext=function(){return this.context[this.context.length-1]},Wh.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Ou.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Wh.readToken=function(t){return Tu(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Wh.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Wh.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),r=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(Fu.lastIndex=r;(t=Fu.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,i),r,this.pos,e,this.curPosition())},Wh.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Uu(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},Wh.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&Vu.test(String.fromCharCode(t))))break t;++this.pos}}},Wh.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},Wh.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Ou.ellipsis)):(++this.pos,this.finishToken(Ou.dot))},Wh.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Ou.assign,2):this.finishOp(Ou.slash,1)},Wh.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1,i=42===t?Ou.star:Ou.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++r,i=Ou.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Ou.assign,r+1):this.finishOp(i,r)},Wh.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(Ou.assign,3);return this.finishOp(124===t?Ou.logicalOR:Ou.logicalAND,2)}return 61===e?this.finishOp(Ou.assign,2):this.finishOp(124===t?Ou.bitwiseOR:Ou.bitwiseAND,1)},Wh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ou.assign,2):this.finishOp(Ou.bitwiseXOR,1)},Wh.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Nu.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ou.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Ou.assign,2):this.finishOp(Ou.plusMin,1)},Wh.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(Ou.assign,r+1):this.finishOp(Ou.bitShift,r)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(r=2),this.finishOp(Ou.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Wh.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Ou.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Ou.arrow)):this.finishOp(61===t?Ou.eq:Ou.prefix,1)},Wh.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var r=this.input.charCodeAt(this.pos+2);if(r<48||r>57)return this.finishOp(Ou.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(Ou.assign,3);return this.finishOp(Ou.coalesce,2)}}return this.finishOp(Ou.question,1)},Wh.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ou.parenL);case 41:return++this.pos,this.finishToken(Ou.parenR);case 59:return++this.pos,this.finishToken(Ou.semi);case 44:return++this.pos,this.finishToken(Ou.comma);case 91:return++this.pos,this.finishToken(Ou.bracketL);case 93:return++this.pos,this.finishToken(Ou.bracketR);case 123:return++this.pos,this.finishToken(Ou.braceL);case 125:return++this.pos,this.finishToken(Ou.braceR);case 58:return++this.pos,this.finishToken(Ou.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Ou.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(Ou.prefix,1)}this.raise(this.pos,"Unexpected character '"+Hh(t)+"'")},Wh.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)},Wh.readRegexp=function(){for(var t,e,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Nu.test(i)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var n=this.input.slice(r,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Mh(this));o.reset(r,n,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(n,a)}catch(t){}return this.finishToken(Ou.regexp,{pattern:n,flags:a,value:c})},Wh.readInt=function(t,e,r){for(var i=this.options.ecmaVersion>=12&&void 0===e,n=r&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,u=null==e?1/0:e;c<u;++c,++this.pos){var h=this.input.charCodeAt(this.pos),l=void 0;if(i&&95===h)n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=h;else{if((l=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=t)break;o=h,a=a*t+l}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Wh.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);return null==r&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r=qh(this.input.slice(e,this.pos)),++this.pos):Tu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ou.num,r)},Wh.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var r=this.pos-e>=2&&48===this.input.charCodeAt(e);r&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!r&&!t&&this.options.ecmaVersion>=11&&110===i){var n=qh(this.input.slice(e,this.pos));return++this.pos,Tu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ou.num,n)}r&&/[89]/.test(this.input.slice(e,this.pos))&&(r=!1),46!==i||r||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||r||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),Tu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),r?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(Ou.num,a)},Wh.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Wh.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(Uu(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(Ou.string,e)};var Yh={};Wh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Yh)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Wh.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Yh;this.raise(t,e)},Wh.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==Ou.template&&this.type!==Ou.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(Ou.template,t)):36===r?(this.pos+=2,this.finishToken(Ou.dollarBraceL)):(++this.pos,this.finishToken(Ou.backQuote));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Uu(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Wh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(Ou.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Wh.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Hh(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var r=this.pos-1;return this.invalidStringToken(r,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return Uu(e)?"":String.fromCharCode(e)}},Wh.readHexChar=function(t){var e=this.pos,r=this.readInt(16,t);return null===r&&this.invalidStringToken(e,"Bad character escape sequence"),r},Wh.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Eu(n,i))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Tu:Eu)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Hh(a),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},Wh.readWord=function(){var t=this.readWord1(),e=Ou.name;return this.keywords.test(t)&&(e=Lu[t]),this.finishToken(e,t)};Xu.acorn={Parser:Xu,version:"8.0.5",defaultOptions:Ku,Position:Hu,SourceLocation:Yu,getLineInfo:Gu,Node:mh,TokenType:ku,tokTypes:Ou,keywordTypes:Lu,TokContext:_h,tokContexts:vh,isIdentifierChar:Eu,isIdentifierStart:Tu,Token:$h,isNewLine:Uu,lineBreak:Nu,lineBreakG:Fu,nonASCIIwhitespace:Vu};const Gh="Identifier",Kh="Literal",Jh="MemberExpression",Qh="ObjectPattern",Zh="Column",Xh="Dictionary",tl="Function";function el(t,e,r,i){const n=r[t.type]||r.Default;if(n&&!1===n(t,e,i))return;const s=cl[t.type];s&&s(t,e,r)}const rl=(t,e,r)=>{el(t.argument,e,r,t)},il=(t,e,r)=>{el(t.left,e,r,t),el(t.right,e,r,t)},nl=(t,e,r)=>{el(t.test,e,r,t),el(t.consequent,e,r,t),t.alternate&&el(t.alternate,e,r,t)},sl=(t,e,r)=>{ol(t.params,e,r,t),el(t.body,e,r,t)},al=(t,e,r)=>{el(t.callee,e,r,t),ol(t.arguments,e,r,t)},ol=(t,e,r,i)=>{t.forEach((t=>el(t,e,r,i)))},cl={TemplateLiteral:(t,e,r)=>{ol(t.expressions,e,r,t),ol(t.quasis,e,r,t)},MemberExpression:(t,e,r)=>{el(t.object,e,r,t),el(t.property,e,r,t)},CallExpression:al,NewExpression:al,ArrayExpression:(t,e,r)=>{ol(t.elements,e,r,t)},AssignmentExpression:il,AwaitExpression:rl,BinaryExpression:il,LogicalExpression:il,UnaryExpression:rl,UpdateExpression:rl,ConditionalExpression:nl,ObjectExpression:(t,e,r)=>{ol(t.properties,e,r,t)},Property:(t,e,r)=>{el(t.key,e,r,t),el(t.value,e,r,t)},ArrowFunctionExpression:sl,FunctionExpression:sl,FunctionDeclaration:sl,VariableDeclaration:(t,e,r)=>{ol(t.declarations,e,r,t)},VariableDeclarator:(t,e,r)=>{el(t.id,e,r,t),el(t.init,e,r,t)},SpreadElement:(t,e,r)=>{el(t.argument,e,r,t)},BlockStatement:(t,e,r)=>{ol(t.body,e,r,t)},ExpressionStatement:(t,e,r)=>{el(t.expression,e,r,t)},IfStatement:nl,ForStatement:(t,e,r)=>{el(t.init,e,r,t),el(t.test,e,r,t),el(t.update,e,r,t),el(t.body,e,r,t)},WhileStatement:(t,e,r)=>{el(t.test,e,r,t),el(t.body,e,r,t)},DoWhileStatement:(t,e,r)=>{el(t.body,e,r,t),el(t.test,e,r,t)},SwitchStatement:(t,e,r)=>{el(t.discriminant,e,r,t),ol(t.cases,e,r,t)},SwitchCase:(t,e,r)=>{t.test&&el(t.test,e,r,t),ol(t.consequent,e,r,t)},ReturnStatement:rl,Program:(t,e,r)=>{el(t.body[0],e,r,t)}};function ul(t){delete t.start,delete t.end,delete t.optional}function hl(t){ul(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}const ll=(t,e)=>{const r=gl[t.type];return r?r(t,e):s(`Unsupported expression construct: ${t.type}`)},pl=(t,e)=>"("+ll(t.left,e)+" "+t.operator+" "+ll(t.right,e)+")",dl=(t,e)=>"("+yl(t.params,e)+")=>"+ll(t.body,e),fl=(t,e)=>ll(t.callee,e)+"("+yl(t.arguments,e)+")",yl=(t,e,r=",")=>t.map((t=>ll(t,e))).join(r),ml=t=>t.computed?`[${Vc(t.name)}]`:`.${t.name}`,bl=(t,e,r)=>{const i=t.table||"";return`data${i}${ml(t)}.${r}(${e.index}${i})`},gl={Constant:t=>t.raw,Column:(t,e)=>bl(t,e,"get"),Dictionary:(t,e)=>bl(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${ml(t)}`,Op:(t,e)=>`op(${Vc(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:r,expressions:i}=t,n=i.length;let s=r[0].value.raw;for(let t=0;t<n;)s+="${"+ll(i[t],e)+"}"+r[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const r=!t.computed,i=ll(t.object,e),n=ll(t.property,e);return i+(r?"."+n:"["+n+"]")},CallExpression:fl,NewExpression:(t,e)=>"new "+fl(t,e),ArrayExpression:(t,e)=>"["+yl(t.elements,e)+"]",AssignmentExpression:pl,BinaryExpression:pl,LogicalExpression:pl,UnaryExpression:(t,e)=>"("+t.operator+ll(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+ll(t.test,e)+"?"+ll(t.consequent,e)+":"+ll(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+yl(t.properties,e)+"})",Property:(t,e)=>ll(t.key,e)+":"+ll(t.value,e),ArrowFunctionExpression:dl,FunctionExpression:dl,FunctionDeclaration:dl,ArrayPattern:(t,e)=>"["+yl(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+yl(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+yl(t.declarations,e,","),VariableDeclarator:(t,e)=>ll(t.id,e)+"="+ll(t.init,e),SpreadElement:(t,e)=>"..."+ll(t.argument,e),BlockStatement:(t,e)=>"{"+yl(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>ll(t.expression,e),IfStatement:(t,e)=>"if ("+ll(t.test,e)+")"+ll(t.consequent,e)+(t.alternate?" else "+ll(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+ll(t.discriminant,e)+") {"+yl(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+ll(t.test,e):"default")+": "+yl(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+ll(t.argument,e),Program:(t,e)=>ll(t.body[0],e)};function _l(t,e={index:"row"}){return ll(t,e)}function vl(t){const r=typeof t;return"string"===r?`"${t}"`:"object"===r&&t?l(t)?+t:e(t)||jc(t)?`[${t.map(vl)}]`:d(t)?t+"":function(t){let e="{",r=-1;for(const i in t)++r>0&&(e+=","),e+=`"${i}":${vl(t[i])}`;return e+="}",e}(t):t}function wl(t,e){const r=t.length;return 1===r?(e,r)=>vl(t[0](e,r)):(i,n)=>{let s="";for(let a=0;a<r;++a){a>0&&(s+="|");const r=t[a](i,n);if(e&&(null==r||r!=r))return null;s+=vl(r)}return s}}function xl(){}var Il=void 0;function Sl(t){return t.init=t.init||xl,t.add=t.add||xl,t.rem=t.rem||xl,t}function Al(t,e){return t.product_v=!1,t.product=e}var Tl={count:{create:()=>Sl({value:t=>t.count}),param:[]},values:{create:()=>Sl({init:t=>t.values=!0,value:t=>t.list.values().slice()}),param:[1]},any:{create:()=>Sl({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:Il}),param:[1]},valid:{create:()=>Sl({value:t=>t.valid}),param:[1]},invalid:{create:()=>Sl({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const r=vl(e),i=t.get(r);i?++i.n:t.set(r,{v:e,n:1})},decrement(e){const r=vl(e),i=t.get(r);1===i.n?t.delete(r):--i.n},forEach(e){t.forEach((({v:t,n:r})=>e(t,r)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},unique:{create:()=>Sl({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Sl({value:t=>{let e=Il,r=0;return t.distinct.forEach(((t,i)=>{i>r&&(r=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:Il,add:(t,e)=>Uc(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>Al(t,1),value:t=>t.valid?t.product_v?Al(t,function(t,e=0,r=t.length){let i=t[e++];for(let n=e;n<r;++n)i*=t[n];return i}(t.list.values())):t.product:void 0,add:(t,e)=>Uc(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["values"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:Il,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>Sl({value:t=>t.valid?t.mean:Il}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):Il,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Sl({value:t=>t.valid>1?t.dev/t.valid:Il}),param:[1],req:["variance"]},stdev:{create:()=>Sl({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):Il}),param:[1],req:["variance"]},stdevp:{create:()=>Sl({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):Il}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=Il,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===Il)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["values"]},max:{create:()=>({init:t=>t.max=Il,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===Il)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["values"]},quantile:{create:t=>Sl({value:e=>e.list.quantile(t)}),param:[1,1],req:["values"]},median:{create:()=>Sl({value:t=>t.list.quantile(.5)}),param:[1],req:["values"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):Il,add:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=n/t.valid;const s=r-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=n*s,t.cov+=i*s},rem:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?n/t.valid:t.mean_y;const s=r-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=n*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>Sl({value:t=>t.valid>1?t.cov/t.valid:Il}),param:[2],req:["covariance"]},corr:{create:()=>Sl({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):Il}),param:[2],req:["covariance"]},bins:{create:(t,e,r)=>Sl({value:i=>function(t,e,r=15,i=!0,n=0){const s=[5,2],a=Math.LN10,o=Math.ceil(Math.log(r)/a),c=e-t||Math.abs(t)||1;let u=Math.max(n,Math.pow(10,Math.round(Math.log(c)/a)-o));for(;Math.ceil(c/u)>r;)u*=10;const h=s.length;for(let t=0;t<h;++t){const e=u/s[t];e>=n&&c/e<=r&&(u=e)}if(i){let r=Math.log(u);const i=r>=0?0:1+~~(-r/a),n=Math.pow(10,-i-1);r=Math.floor(t/u+n)*u,t=t<r?r-u:r,e=Math.ceil(e/u)*u}return[t,e===t?t+u:e,u]}(i.min,i.max,t,e,r)}),param:[1,3],req:["min","max"]}};function El(t){return null!=t&&t==t}const kl={create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?t=r+1:t}}},param:[]},Bl={create(){let t;return{init:()=>t=0,value:e=>{const{index:r,peer:i,size:n}=e;let s=r;if(t<s){for(;s+1<n&&i(s+1);)++s;t=s}return(1+t)/n}}},param:[]};var Dl={row_number:{create:()=>({init:xl,value:t=>t.index+1}),param:[]},rank:kl,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:r=>{const i=r.index;if(i>=t){for(e=t=i+1;r.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=kl.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:Bl,ntile:{create(t){(t=+t)>0||s("ntile num must be greater than zero.");const{init:e,value:r}=Bl.create();return{init:e,value:e=>Math.ceil(t*r(e))}},param:[0,1]},lag:{create:(t,e)=>(t=+t||1,{init:xl,value:(r,i)=>{const n=r.index-t;return n>=0?r.value(n,i):e}}),param:[1,2]},lead:{create:(t,e)=>(t=+t||1,{init:xl,value:(r,i)=>{const n=r.index+t;return n<r.size?r.value(n,i):e}}),param:[1,2]},first_value:{create:()=>({init:xl,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:xl,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||s("nth_value nth must be greater than zero."),{init:xl,value:(e,r)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,r):Il}}),param:[1,1]},fill_down:{create(t){let e;return{init:()=>e=t,value:(t,r)=>{const i=t.value(t.index,r);return El(i)?e=i:e}}},param:[1,1]},fill_up:{create(t){let e,r;return{init:()=>(e=t,r=-1),value:(i,n)=>i.index<=r?e:(r=function(t,e,r){for(const i=t.size;r<i;++r)if(El(t.value(r,e)))return r;return-1}(i,n,i.index))>=0?e=i.value(r,n):(r=i.size,e=t)}},param:[1,1]}};const Cl=t=>zc(t)?t:null,Ll=t=>zc(t)||f(t)?t:null;var Ml={concat:(...t)=>[].concat(...t),includes:(t,e,r)=>Ll(t).includes(e,r),indexof:(t,e)=>Ll(t).indexOf(e),join:(t,e)=>Cl(t).join(e),lastindexof:(t,e)=>Ll(t).lastIndexOf(e),length:t=>t.length,pluck:(t,e)=>Cl(t).map((t=>El(t)?t[e]:Il)),reverse:t=>Cl(t).slice().reverse(),slice:(t,e,r)=>Ll(t).slice(e,r)};const Ol=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Nl(t){return t.match(Ol)}const Fl=864e5,Ul=6048e5,Vl=new Date,Pl=new Date,Rl=t=>(Vl.setTime("string"==typeof t?function(t,e=Date.parse){return Nl(t)?e(t):t}(t):t),Vl);var jl={format_date:(t,e)=>nu(Rl(t),!e),format_utcdate:(t,e)=>su(Rl(t),!e),timestamp:t=>+Rl(t),year:t=>Rl(t).getFullYear(),quarter:t=>Math.floor(Rl(t).getMonth()/3),month:t=>Rl(t).getMonth(),date:t=>Rl(t).getDate(),dayofweek:t=>Rl(t).getDay(),hours:t=>Rl(t).getHours(),minutes:t=>Rl(t).getMinutes(),seconds:t=>Rl(t).getSeconds(),milliseconds:t=>Rl(t).getMilliseconds(),utcyear:t=>Rl(t).getUTCFullYear(),utcquarter:t=>Math.floor(Rl(t).getUTCMonth()/3),utcmonth:t=>Rl(t).getUTCMonth(),utcdate:t=>Rl(t).getUTCDate(),utcdayofweek:t=>Rl(t).getUTCDay(),utchours:t=>Rl(t).getUTCHours(),utcminutes:t=>Rl(t).getUTCMinutes(),utcseconds:t=>Rl(t).getUTCSeconds(),utcmilliseconds:t=>Rl(t).getUTCMilliseconds(),datetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){Pl.setTime(+t),Pl.setHours(0,0,0,0),Vl.setTime(+Pl),Vl.setMonth(0),Vl.setDate(1);const e=6e4*(Pl.getTimezoneOffset()-Vl.getTimezoneOffset());return Math.floor(1+(Pl-Vl-e)/Fl)},week:function(t,e){const r=e||0;Pl.setTime(+t),Pl.setDate(Pl.getDate()-(Pl.getDay()+7-r)%7),Pl.setHours(0,0,0,0),Vl.setTime(+t),Vl.setMonth(0),Vl.setDate(1),Vl.setDate(1-(Vl.getDay()+7-r)%7),Vl.setHours(0,0,0,0);const i=6e4*(Pl.getTimezoneOffset()-Vl.getTimezoneOffset());return Math.floor((Pl-Vl+1-i)/Ul)},utcdatetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){Pl.setTime(+t),Pl.setUTCHours(0,0,0,0);const e=Date.UTC(Pl.getUTCFullYear(),0,1);return Math.floor(1+(Pl-e)/Fl)},utcweek:function(t,e){const r=e||0;return Pl.setTime(+t),Pl.setUTCDate(Pl.getUTCDate()-(Pl.getUTCDay()+7-r)%7),Pl.setUTCHours(0,0,0,0),Vl.setTime(+t),Vl.setUTCMonth(0),Vl.setUTCDate(1),Vl.setUTCDate(1-(Vl.getUTCDay()+7-r)%7),Vl.setUTCHours(0,0,0,0),Math.floor((Pl-Vl+1)/Ul)},now:Date.now};function zl(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(l(t)||l(e)?+t==+e:d(t)&&d(e)?t+""==e+"":!(!p(t)||!p(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return $l(t,e);const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(r.sort(),i.sort(),!$l(r,i,((t,e)=>t===e)))return!1;const n=r.length;for(let i=0;i<n;++i){const n=r[i];if(!zl(t[n],e[n]))return!1}return!0}(t,e)))}function $l(t,e,r=zl){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;++n)if(!r(t[n],e[n]))return!1;return!0}let Wl=Math.random;function ql(){return Wl()}function Hl(t,e,r){let i=arguments.length;t=+t,e=+e,r=i<2?(e=t,t=0,1):i<3?1:+r,i=0|Math.max(0,Math.ceil((e-t)/r));const n=new Array(i);for(let e=0;e<i;++e)n[e]=t+e*r;return n}var Yl={bin:function(t,e,r,i,n){return null==t?null:t<e?-1/0:t>r?1/0:(t=Math.max(e,Math.min(t,r)),e+i*Math.floor(1e-14+(t-e)/i+(n||0)))},equal:zl,recode:function(t,e,r){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(g(e,t))return e[t];return void 0!==r?r:t},sequence:Hl,...Ml,...jl,...{random:ql,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},...{has:(t,e)=>g(t,e),keys:t=>Object.keys(t),values:t=>Object.values(t)},...{parse_date:t=>new Date(t),parse_float:t=>Number.parseFloat(t),parse_int:(t,e)=>Number.parseInt(t,e),endswith:(t,e,r)=>String(t).endsWith(e,r),match:(t,e,r)=>{const i=String(t).match(e);return null==r||null==i?i:"number"==typeof r?i[r]:i.groups?i.groups[r]:null},normalize:(t,e)=>String(t).normalize(e),padend:(t,e,r)=>String(t).padEnd(e,r),padstart:(t,e,r)=>String(t).padStart(e,r),upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),repeat:(t,e)=>String(t).repeat(e),replace:(t,e,r)=>String(t).replace(e,String(r)),substring:(t,e,r)=>String(t).substring(e,r),split:(t,e,r)=>String(t).split(e,r),startswith:(t,e,r)=>String(t).startsWith(e,r),trim:t=>String(t).trim()}};function Gl(t){return g(Tl,t)}function Kl(t){return g(Dl,t)}function Jl(t){return Gl(t)&&Tl[t]}function Ql(t){return Kl(t)&&Dl[t]}function Zl(t){return g(Yl,t)&&Yl[t]}function Xl(t,e){return t=`"use strict"; return ${t};`,Function("fn","$",t)(Yl,e)}var tp={expr:(t,e)=>Xl(`(row,data,op)=>${t}`,e),expr2:(t,e)=>Xl(`(row0,data0,row,data)=>${t}`,e),join:(t,e)=>Xl(`(row1,data1,row2,data2)=>${t}`,e),param:(t,e)=>Xl(t,e)},ep={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const rp={"==":1,"!=":1,"===":1,"!==":1};function ip(t,e,r,i,n){if(t.type=Zh,t.name=r,t.table=i,!(e&&n&&a(n.keyFor)))return;const s=rp[e.operator]?e.left===t?e.right:e.left:e.callee&&"equal"===e.callee.name?e.arguments[e.arguments[0]===t?1:0]:null;s&&s.type===Kh&&function(t,e,r,i){i<0?(t.type=Kh,t.value=!1,t.raw="false"):(e.type=Xh,r.value=i,r.raw=i+"")}(e,t,s,n.keyFor(s.value))}function np(t){return e(t)?t:function(t){return t instanceof Map}(t)?t.entries():t?Object.entries(t):[]}const sp={ecmaVersion:11},ap=t=>(e,r)=>r.error(t+" not allowed",e),op=ap("Aggregate function"),cp=ap("Aggregate function"),up="Invalid column reference",hp="Invalid function call",lp="Invalid operator parameter",pp={[Zh]:1,Op:1},dp=(t,e)=>e&&e.type===t;function fp(t,e={}){const r=e.generate||_l,i=e.compiler||tp,n=yp(e),a={},o={},c=[],u=[];let h=0,l=-1;const d=e.join?i.join:1==e.index?i.expr2:i.expr,f={op(t){const e=`${t.name}(${t.fields.concat(t.params).join(",")})`;return o[e]||(t.id=++l,o[e]=t)},field(t){const e=r(t);return a[e]||(a[e]=++h)},param:t=>dp(Kh,t)?t.value:i.param(r(t),n),value(t,i){c.push(t);const s=e.ast?function(t){return el(t,null,{Column:hl,Constant:hl,Default:ul}),t}(i):d(r(i),n);u.push(s),pp[i.type]&&s!==i&&p(s)&&(s.field=i.name)},error(t,e){const r=e.start-6,i=e.end-6;s(`${t}: "${String(f.spec).slice(r,i)}"`)}};Object.assign(f,e,{params:n});for(const[e,r]of np(t))Bp(f,e+"",r);if(e.ast)return{names:c,exprs:u};const y=[];for(const t in a)y[a[t]]=i.expr(t,n);const m=Object.values(o);return m.forEach((t=>t.fields=t.fields.map((t=>y[t])))),{names:c,exprs:u,ops:m}}const yp=t=>(t.table?mp(t.table):t.join?{...mp(t.join[1]),...mp(t.join[0])}:{})||{},mp=t=>t&&a(t.params)?t.params():{},bp=(t,e)=>dp(Gh,e)?e.name:dp(Jh,e)?e.property.name:null;function gp(t,e,r){const{name:i}=t;if(dp(Jh,r)&&r.property===t);else if(dp("Property",r)&&r.key===t);else if(e.paramsRef.has(i))xp(t,e.paramsRef.get(i));else if(e.columnRef.has(i))vp(t,i,e,r);else if(g(e.params,i))xp(t,i);else{if(!g(ep,i))return!0;Ip(t,i)}}function _p(t,e,r,i,n){const s=0===r?i.table:r>0?i.join[r-1]:null,a=s&&s.column(e);s&&!a&&i.error(up,t),i.aggronly&&!i.$op&&(i.$op||i.error("Invalid column reference (must be input to an aggregate function)",t)),ip(t,n,e,r,a)}function vp(t,e,r,i){const[n,s]=r.columnRef.get(e);_p(t,n,s,r,i)}function wp(t,e,r,i){i.params&&!g(i.params,e)&&i.error("Invalid param reference",t),xp(t,e)}function xp(t,e){t.type="Parameter",t.name=e}function Ip(t,e){t.type="Constant",t.name=e,t.raw=ep[e]}function Sp(t,e){dp(Gh,t)?e.scope.add(t.name):dp("ArrayPattern",t)?t.elements.forEach((t=>Sp(t,e))):dp(Qh,t)?t.properties.forEach((t=>Sp(t.value,e))):e.error("Unsupported variable declaration",t.id)}const Ap={FunctionDeclaration:ap("Function definitions"),ForStatement:ap("For loops"),ForOfStatement:ap("For-of loops"),ForInStatement:ap("For-in loops"),WhileStatement:ap("While loops"),DoWhileStatement:ap("Do-while loops"),AwaitExpression:ap("Await expressions"),ArrowFunctionExpression:ap("Function definitions"),AssignmentExpression:ap("Assignments"),FunctionExpression:ap("Function definitions"),NewExpression:ap('Use of "new"'),UpdateExpression:ap("Update expressions"),VariableDeclarator(t,e){Sp(t.id,e)},Identifier(t,e,r){gp(t,e,r)&&!e.scope.has(t.name)&&e.error("Invalid variable reference",t)},CallExpression(t,e){const r=bp(0,t.callee),i=Jl(r)||Ql(r);if(i){if((e.join||!1===e.aggregate)&&Gl(i)&&op(t,e),(e.join||!1===e.window)&&Kl(i)&&cp(t,e),e.$op=1,e.ast)t.callee={type:tl,name:r},t.arguments.forEach((t=>el(t,e,Ep)));else{const n=e.op(function(t,e,r,i){const n=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,r)=>{r<a?(el(e,t,Ep),n.push(t.field(e))):r<o?(el(e,t,Ep),s.push(t.param(e))):t.error(lp,e)})),{name:r,fields:n,params:s,...t.spec.window||{}}}(e,i,r,t.arguments));Object.assign(t,{type:"Op",name:n.id})}return e.$op=0,!1}Zl(r)?t.callee={type:tl,name:r}:e.error(hp,t)},MemberExpression(t,e,r){const{object:i,property:n}=t;if(!dp(Gh,i))return;const{name:s}=i;if("Math"===s&&dp(Gh,n)&&g(ep,n.name))return void Ip(t,n.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?Tp(t,a,e,_p,r):s===e.$param?Tp(t,a,e,wp):void(e.paramsRef.has(s)?xp(t,e.paramsRef.get(s)):e.columnRef.has(s)?vp(i,s,e,t):g(e.params,s)&&xp(i,s))}};function Tp(t,e,r,i,n){const{property:s,computed:a}=t;let o;if(a)if(dp(Kh,s))o=s.value;else try{o=r.param(s)}catch(e){r.error("Invalid member expression",t)}else o=s.name;return i(t,o,e,r,n),!1}const Ep={...Ap,VariableDeclarator:ap("Variable declaration in operator call"),Identifier(t,e,r){gp(t,e,r)&&e.error("Variable not accessible in operator call",t)},CallExpression(t,e){const r=bp(0,t.callee);Zl(r)?t.callee={type:tl,name:r}:e.error(hp,t)}};function kp(t){try{const i=t.field?(t=>{const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`})(t):t;return(e=`expr=(${i})`,r=sp,Xu.parse(e,r)).body[0].expression.right}catch(e){s("Expression parse error: "+(t+""))}var e,r}function Bp(t,e,r){const i=kp(r);let n=t.root=i;t.spec=r,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,(t=>dp("FunctionExpression",t)||dp("ArrowFunctionExpression",t))(n)?(!function(t,e){t.generator&&ap("Generator functions")(t,e);t.async&&ap("Async functions")(t,e);const{params:r}=t,i=r.length,n=t=>(r,i)=>e.columnRef.set(r,[i,t]),s=(t,r)=>e.paramsRef.set(t,r);i&&(e.join?(Dp(e,r[0],"tuple1",n(1)),i>1&&Dp(e,r[1],"tuple2",n(2)),i>2&&Dp(e,r[2],"$param",s)):(Dp(e,r[0],"tuple",n(0)),i>1&&Dp(e,r[1],"$param",s)));e.root=t.body}(n,t),n=n.body):t.join?(t.scope.add(t.tuple1="d1"),t.scope.add(t.tuple2="d2"),t.scope.add(t.$param="$")):(t.scope.add(t.tuple="d"),t.scope.add(t.$param="$")),el(n,t,Ap),t.value(e,t.root)}function Dp(t,e,r,i){dp(Gh,e)?(t.scope.add(e.name),t[r]=e.name):dp(Qh,e)&&e.properties.forEach((e=>{const r=dp(Gh,e.key)?e.key.name:dp(Kh,e.key)?e.key.value:t.error("Invalid argument",e);dp(Gh,e.value)||t.error("Unsupported destructuring pattern",e.value),i(e.value.name,r)}))}const Cp="Expr",Lp="ExprList",Mp="ExprNumber",Op="ExprObject",Np="JoinKeys",Fp="JoinValues",Up="Options",Vp="OrderKeys",Pp="SelectionList",Rp="TableRef",jp="TableRefList";function zp(t,e){return t&&t.expr?new $p({...t,...e}):new $p(e,t)}class $p{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...a(this.expr)?{func:!0}:{}}}}function Wp(t){return zp(t,{desc:!0})}function qp(t,e,r=0){const i=r?{field:!0,table:r}:{field:!0};return zp(t,e?{expr:e,...i}:i)}function Hp(t,e,r){return zp(t,{window:{frame:e||[-1/0,0],peers:!!r}})}function Yp(t,e){for(const[r,i]of np(e))t.set(r,i);return t}function Gp(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Kp(t){return"number"==typeof t}function Jp(t,r,i=new Map){return f(r=Kp(r)?t.columnName(r):r)?i.set(r,r):e(r)?r.forEach((e=>Jp(t,e,i))):a(r)?Jp(t,r(t),i):p(r)?Yp(i,r):s(`Invalid column selection: ${Vc(r)}`),i}function Qp(t,e){return t.toObject=e,t}function Zp(t){return e(t)?t.map(Zp):t&&t.toObject?t.toObject():t}function Xp(){return Qp((t=>t.columnNames()),(()=>({all:[]})))}function td(...t){return t=t.flat(),Qp((e=>{const r=Jp(e,t);return e.columnNames((t=>!r.has(t)))}),(()=>({not:Zp(t)})))}function ed(t,e){return Qp((r=>{let i=Kp(t)?t:r.columnIndex(t),n=Kp(e)?e:r.columnIndex(e);if(n<i){const t=n;n=i,i=t}return r.columnNames().slice(i,n+1)}),(()=>({range:[t,e]})))}function rd(t){return f(t)&&(t=RegExp(Gp(t))),Qp((e=>e.columnNames((e=>t.test(e)))),(()=>({matches:[t.source,t.flags]})))}function id(t,e){return(e=e&&a(e.query)?e.query():e)&&a(e.evaluate)?e.evaluate(null,t):t(e)}function nd(t){return p(t)&&(e(t.all)||e(t.matches)||e(t.not)||e(t.range))}function sd(t){return t&&a(t.toObject)?t.toObject():a(t)?{expr:String(t),func:!0}:e(t)?t.map(sd):p(t)?ou(t,(t=>sd(t))):t}function ad(t){return e(t)?t.map(ad):p(t)?e(t.verbs)?xd.from(t):e(t.all)?Xp():e(t.range)?ed(...t.range):e(t.match)?rd(RegExp(...t.match)):e(t.not)?td(t.not.map(sd)):function(t){let e=t,r=t.expr;if(null!=r){if(!0===t.field?e=r=qp(r):!0===t.func&&(e=r=function(t){const e=t=>t;return e.toString=()=>t,e}(r)),p(t.window)){const{frame:i,peers:n}=t.window;e=r=Hp(r,i,n)}!0===t.desc&&(e=Wp(r))}return t===e?ou(t,(t=>ad(t))):e}(t):t}function od(t){const e=[];return r(t).forEach((t=>{Kp(t)?e.push(t):f(t)?e.push(qp(t,null)):p(t)&&t.expr||a(t)?e.push(t):s("Invalid key value: "+(t+""))})),e}function cd(t,e){return e<2?r(t):t}const ud={[Cp]:md,[Lp]:bd,[Mp]:function(t){return Kp(t)?t:dd(t)},[Op]:dd,[Np]:function(t){return e(t)?t.map(bd):dd(t,{join:!0})},[Fp]:function(t){return e(t)?t.map(((t,e)=>e<2?bd(t):dd(t,{join:!0}))):dd(t,{join:!0})},[Vp]:bd,[Pp]:function(t){return r(t).map(yd).flat()}};function hd(t,e,r){return e===Up?t?function(t,e={}){const r={};for(const i in t){const n=t[i];r[i]=e[i]?hd(n,e[i]):n}return r}(t,r):t:ud[e](t)}function ld(t){return{type:Zh,name:t}}function pd(t){return{type:Zh,index:t}}function dd(t,e){if(f(t))return function(t,e){return fp({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let r;if(!0===t.field?r=ld(t.expr):!0===t.func&&(r=dd(t.expr,e)),r)return t.desc&&(r={type:"Descending",expr:r}),t.window&&(r={type:"Window",expr:r,...t.window}),r}return Object.keys(t).map((r=>({...dd(t[r],e),as:r})))}function fd(t){const e="Selection";return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:bd(t.not)}:t.range?{type:e,operator:"range",arguments:bd(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:s("Invalid input")}function yd(t){return nd(t)?fd(t):Kp(t)?pd(t):f(t)?ld(t):p(t)?Object.keys(t).map((e=>({type:Zh,name:e,as:t[e]}))):s("Invalid input")}function md(t){return nd(t)?fd(t):Kp(t)?pd(t):f(t)?ld(t):p(t)?dd(t):s("Invalid input")}function bd(t){return r(t).map(md).flat()}function gd(t){return t&&a(t.toAST)?t.toAST():t}class _d{constructor(t,r=[],i=[]){this.verb=t,this.schema=r,r.forEach(((t,r)=>{const n=t.type,o=i[r],c=n===Np?e(u=o)?u.map(od):u:n===Fp?function(t){return e(t)?t.map(cd):t}(o):n===Vp?function(t){const e=[];return t.forEach((t=>{const r=null!=t.expr?t.expr:t;if(p(r)&&!a(r))for(const t in r)e.push(r[t]);else t=Kp(r)?r:f(r)?qp(t):a(r)?t:s("Invalid orderby field: "+t),e.push(t)})),e}(o):o;var u;this[t.name]=void 0!==c?c:t.default}))}static from(t){const e=wd[t.verb];return e(...(e.schema||[]).map((({name:e})=>ad(t[e]))))}evaluate(t,e){const r=this.schema.map((({name:t,type:r})=>{const i=this[t];return r===Rp?id(e,i):r===jp?i.map((t=>id(e,t))):i}));return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=sd(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:r,props:i})=>{t[e]=function(t,e,r){return e===Rp?gd(t):e===jp?t.map(gd):hd(sd(t),e,r)}(this[e],r,i)})),t}}function vd(t,e){return Object.assign(((...r)=>new _d(t,e,r)),{schema:e})}const wd={count:vd("count",[{name:"options",type:Up}]),derive:vd("derive",[{name:"values",type:Op},{name:"options",type:Up,props:{before:Pp,after:Pp}}]),filter:vd("filter",[{name:"criteria",type:Op}]),groupby:vd("groupby",[{name:"keys",type:Lp}]),orderby:vd("orderby",[{name:"keys",type:Vp}]),relocate:vd("relocate",[{name:"columns",type:Pp},{name:"options",type:Up,props:{before:Pp,after:Pp}}]),rollup:vd("rollup",[{name:"values",type:Op}]),sample:vd("sample",[{name:"size",type:Mp},{name:"options",type:Up,props:{weight:Cp}}]),select:vd("select",[{name:"columns",type:Pp}]),ungroup:vd("ungroup"),unorder:vd("unorder"),reify:vd("reify"),dedupe:vd("dedupe",[{name:"keys",type:Lp,default:[]}]),impute:vd("impute",[{name:"values",type:Op},{name:"options",type:Up,props:{expand:Lp}}]),fold:vd("fold",[{name:"values",type:Lp},{name:"options",type:Up}]),pivot:vd("pivot",[{name:"keys",type:Lp},{name:"values",type:Lp},{name:"options",type:Up}]),spread:vd("spread",[{name:"values",type:Lp},{name:"options",type:Up}]),unroll:vd("unroll",[{name:"values",type:Lp},{name:"options",type:Up,props:{drop:Lp}}]),lookup:vd("lookup",[{name:"table",type:Rp},{name:"on",type:Np},{name:"values",type:Lp}]),join:vd("join",[{name:"table",type:Rp},{name:"on",type:Np},{name:"values",type:Fp},{name:"options",type:Up}]),cross:vd("cross",[{name:"table",type:Rp},{name:"values",type:Fp},{name:"options",type:Up}]),semijoin:vd("semijoin",[{name:"table",type:Rp},{name:"on",type:Np}]),antijoin:vd("antijoin",[{name:"table",type:Rp},{name:"on",type:Np}]),concat:vd("concat",[{name:"tables",type:jp}]),union:vd("union",[{name:"tables",type:jp}]),intersect:vd("intersect",[{name:"tables",type:jp}]),except:vd("except",[{name:"tables",type:jp}])};class xd extends n{constructor(t,e,r){super(e),this._verbs=t||[],this._table=r}static from({verbs:t,table:e,params:r}){return new xd(t.map(_d.from),r,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),e);return t}toObject(){return Id(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Id(this,"toAST",{type:"Query"})}}function Id(t,e,r){return{...r,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function Sd(t,e){return new xd(t._verbs.concat(e),t._params,t._table)}for(const t in wd){const e=wd[t];xd.prototype["__"+t]=function(t,...r){return Sd(t,e(...r))}}function Ad(t){const{chunks:e,dictionary:r,length:i,nullCount:n}=t,s=r.length,a=function(t,e,r,i){const n=t.length>1||r?function(t,e,r){const i=new r.ArrayType(e),n=t.length;for(let e,r=0,s=0;r<n;++r)e=t[r].length,i.set(t[r].values.subarray(0,e),s),s+=e;return i}(t,e,t[0].type.indices):t[0].values;return r?function(t,e,r){const i=t.length;for(let n,s,a,o,c=0,u=0;c<i;++c){if(a=t[c].nullBitmap,n=t[c].length>>3,a&&a.length)for(let t=0;t<=n;++t)255!==(o=a[t])&&(s=u+(t<<3),0==(1&o)&&(e[s+0]=r),0==(2&o)&&(e[s+1]=r),0==(4&o)&&(e[s+2]=r),0==(8&o)&&(e[s+3]=r),0==(16&o)&&(e[s+4]=r),0==(32&o)&&(e[s+5]=r),0==(64&o)&&(e[s+6]=r),0==(128&o)&&(e[s+7]=r));u+=t[c].length}return e}(t,n,i):n}(e||[t],i,n,s),o=Array(s),c=t=>null==t||t<0||t>=s?null:void 0!==o[t]?o[t]:o[t]=r.get(t);return{vector:t,length:i,get:t=>c(a[t]),key:t=>a[t],keyFor(t){if(null===t)return n?s:-1;for(let e=0;e<s;++e)if(void 0===o[e]&&(o[e]=r.get(e)),o[e]===t)return e;return-1},groups(t){const e=s+(n?1:0);return{keys:a,get:[c],names:t,rows:Hl(0,e),size:e}},[Symbol.iterator]:()=>t[Symbol.iterator]()}}function Td(t,e){if(t.dictionary)return Ad(t);const{typeId:r,chunks:i,length:n,numChildren:s}=t,a=i&&1===i.length?i[0]:t,o=s&&e?Bd(a):s?Ed(Bd(a)):r===w.Utf8?Ed((t=>a.get(t))):null;return o?{vector:a,length:n,get:o,[Symbol.iterator]:()=>function*(t,e){for(let r=0;r<t;++r)yield e(r)}(n,o)}:a}function Ed(t){const e=[];return r=>{const i=e[r];return void 0!==i?i:e[r]=t(r)}}const kd=t=>t.numChildren?o(t.length,Bd(t)):t.nullCount?[...t]:t.toArray(),Bd=t=>{return(e=t.typeId)===w.List||e===w.FixedSizeList?Dd(t):t.typeId===w.Struct?function(t){const e=[],r=[];t.type.children.forEach(((i,n)=>{e.push(Td(t.getChildAt(n),!0)),r.push(`${Vc(i.name)}:_${n}.get(row)`)}));const i=lu("row","({"+r+"})",e);return t.nullCount?e=>t.isValid(e)?i(e):null:i}(t):s(`Unsupported Arrow type: ${Vc(t.VectorName)}`);var e},Dd=t=>t.nullCount?e=>t.isValid(e)?kd(t.get(e)):null:e=>kd(t.get(e));const Cd=2147483648;class Ld{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let r=0;r<t;++r)for(let t=this._bits[r];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&Cd>>>t}set(t){this._bits[t>>5]|=Cd>>>t}clear(t){this._bits[t>>5]&=~(Cd>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,r=e.length;let i=t>>5,n=e[i]&4294967295>>>t;for(;i<r;n=e[++i])if(0!==n)return(i<<5)+Math.clz32(n);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let r=0;r<e;++r)t[r]=~t[r];const r=this._size%32;return r&&(t[e-1]&=Cd>>r-1),this}and(t){if(t){const e=this._bits,r=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=r[t]}return this}or(t){if(t){const e=this._bits,r=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=r[t]}return this}}function Md(t,e={}){t=function(t){return t&&t.chunks?t:Jc().from(t)}(t);const{chunks:r,length:i,schema:n}=t,s=n.fields.map((t=>t.name)),a=Jp({columnNames:t=>t?s.filter(t):s.slice(),columnIndex:t=>s.indexOf(t)},e.columns||Xp()),o=_();a.forEach(((e,r)=>{o.add(e,Td(t.getColumn(r)))}));const c=t.count()!==i?new Ld(i):null;if(c){let e=0,i=0;t.scan((t=>c.set(e+t)),(t=>{for(;r[i]!==t;)e+=r[i++].length}))}return new du(o.data,o.names,c)}var Od=t=>t;const Nd={},Fd={};const Ud=[[t=>"true"===t||"false"===t,t=>"false"!==t],[t=>"NaN"===t||(t=+t)===t,t=>+t],[Nl,t=>new Date(Date.parse(t))]];function Vd(t,e){const r=t.length;for(let i=0;i<r;++i){const r=t[i];if(null!=r&&!e(r))return!1}return!0}function Pd(t,e={}){const r=null==e.delimiter?",":e.delimiter,i=!1!==e.header,n=+e.autoMax||1e3;r.length>1&&s("CSV delimiter should be a single character.");const c=function(t,e){let r,i=t.length,n=0,s=i<=0,a=!1;function o(){if(s)return Fd;if(a)return a=!1,Nd;const r=n;let o,c;if(34===t.charCodeAt(r)){for(;n++<i&&34!==t.charCodeAt(n)||34===t.charCodeAt(++n););return(o=n)>=i?s=!0:10===(c=t.charCodeAt(n++))?a=!0:13===c&&(a=!0,10===t.charCodeAt(n)&&++n),t.slice(r+1,o-1).replace(/""/g,'"')}for(;n<i;){if(10===(c=t.charCodeAt(o=n++)))a=!0;else if(13===c)a=!0,10===t.charCodeAt(n)&&++n;else if(c!==e)continue;return t.slice(r,o)}return s=!0,t.slice(r,i)}return 10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i,{next(){if((r=o())!==Fd){const t=[];for(;r!==Nd&&r!==Fd;)t.push(r),r=o();return t}}}}(t,(r+"").charCodeAt(0));let u=c.next()||[];const h=u.length,l=o(h,(()=>[])),p=i?u:o(h,(t=>`col${t+1}`));let d=0;for(u=i?c.next():u;d<n&&u;++d,u=c.next())for(let t=0;t<h;++t)l[t].push(""===u[t]?null:u[t]);const f=!1===e.autoType?Array(h).fill(Od):function(t,e,r={}){return t.map(((t,i)=>a(r[t])?r[t]:function(t){const e=Ud.length;for(let r=0;r<e;++r){const[e,i]=Ud[r];if(Vd(t,e))return i}return Od}(e[i])))}(p,l,e.parse);for(f.forEach(((t,e)=>{if(t===Od)return;const r=l[e];for(let e=0;e<d;++e)null!=r[e]&&(r[e]=t(r[e]))}));u;u=c.next())for(let t=0;t<h;++t)l[t].push(""===u[t]?null:f[t](u[t]));const y={};return p.forEach(((t,e)=>y[t]=l[e])),new du(y,p)}function Rd(t){const e=t.length;for(let r=0;r<e;++r){const e=t.charCodeAt(r);if(e<48||e>57)return!1}return!0}function jd(t,e={}){const r=uu(e.autoType);f(t)&&(t=JSON.parse(t));let i,n=t.data;if(p(n)&&!zc(n)?t.schema&&t.schema.fields&&(i=t.schema.fields.map((t=>t.name))):n=t,r||e.parse){const t=e.parse||{};for(const e in n){const i=n[e],s=i.length;if(t[e])for(let r=0;r<s;++r)i[r]=t[e](i[r]);else if(r)for(let t=0;t<s;++t){const e=i[t];f(e)&&Nl(e)&&!Rd(e)&&(i[t]=new Date(e))}}}return new du(n,i)}function zd(t,e){const r=_();return e.forEach(((e,i)=>{const n=f(e)?e:i;if(n){const e=t.column(i)||s(`Unrecognized column: ${i}`);r.add(n,e)}})),t.create(r)}function $d(t,e,{before:r,after:i}={}){const n=null!=r,a=null!=i;n||a||s("relocate requires a before or after option."),n&&a&&s("relocate accepts only one of the before or after options."),e=Jp(t,e);const o=[...Jp(t,n?r:i).keys()],c=n?o[0]:o.pop(),u=new Map;return t.columnNames().forEach((t=>{const r=!e.has(t);if(t===c){a&&r&&u.set(t,t);for(const[t,r]of e)u.set(t,r);if(a)return}r&&u.set(t,t)})),zd(t,u)}function Wd(t,e=(t=>t),r=""){const i=t.length;if(!i)return"";let n=e(t[0],0);for(let s=1;s<i;++s)n+=r+e(t[s],s);return n}function qd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hd(t){return Uc(t)?t:+t}class Yd{constructor(t){this.values(t||[])}values(t){if(!arguments.length)return this._start&&(this._values=this._values.slice(this._start),this._start=0),this._values;this._values=t,this._sorted=null,this._start=0}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,r=t.length){let i=r?t[e++]:Il;for(let n=e;n<r;++n)i>t[n]&&(i=t[n]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,r=t.length){let i=r?t[e++]:Il;for(let n=e;n<r;++n)i<t[n]&&(i=t[n]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values().slice(),this._sorted.sort(qd)),function(t,e){const r=t.length;if(!r)return Il;if((e=+e)<=0||r<2)return Hd(t[0]);if(e>=1)return Hd(t[r-1]);const i=(r-1)*e,n=Math.floor(i),s=Hd(t[n]);return Uc(s)?s:s+(Hd(t[n+1])-s)*(i-n)}(this._sorted,t)}}const Gd=(t,e,r)=>lu(e,"{"+Wd(t,((t,i)=>`_${i}.${r}(${e});`))+"}",t);function Kd(t,e){const{ops:r,output:i}=function(t,e){const r={},i=[];function n(t,s=[]){const a=t+":"+s;if(r[a])return r[a];const o=Jl(t),c=o.create(...s);return e&&o.stream&&o.stream.forEach((t=>n(t,[]))),o.req&&o.req.forEach((t=>n(t,[]))),r[a]=c,i.push(c),c}const s=t.map((t=>{const e=n(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),n=t[0].fields,a=n.length;return new(0===a?Jd:1===a?Qd:2===a?Zd:s("Unsupported field count: "+a))(n,r,i)}class Jd extends fu{constructor(t,e,r){super(r),this._op=e,this._fields=t}init(){const t={count:0,valid:0};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new Yd),t}write(t,e,r){const i=this._outputs,n=i.length;for(let s=0;s<n;++s)e[i[s].output][r]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Qd extends Jd{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=Gd(e,i,"add"),this._rem=Gd(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r);++t.count,El(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,r){const i=this._fields[0](e,r);--t.count,El(i)&&(--t.valid,t.list&&t.list.rem(i),this._rem(t,i))}}class Zd extends Jd{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=Gd(e,i,"add"),this._rem=Gd(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);++t.count,El(i)&&El(n)&&(++t.valid,this._add(t,i,n))}rem(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);--t.count,El(i)&&El(n)&&(--t.valid,this._rem(t,i,n))}}function Xd(t,e,r){if(e.length){const i=t.data(),{keys:n}=t.groups()||{},s=tf(t,e),a=n?(t,e)=>s[t][n[e]]:t=>s[t][0];r=r.map((t=>e=>t(e,i,a)))}return r}function tf(t,e,r){if(!e.length)return r;const i=ef(e),n=t.groups(),s=n?n.size:1;return r=r||o(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=nf(t,e,n);for(let t=0;t<s;++t)e.write(i[t],r,t)})):i.forEach((e=>{const i=rf(t,e);e.write(i,r,0)})),r}function ef(t,e){const r=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)r.push(Kd(i[t],e));return r}function rf(t,e){const r=e.init(),i=t.totalRows(),n=t.data(),s=t.mask();if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(r,t,n);else for(let t=0;t<i;++t)e.add(r,t,n);return r}function nf(t,e,r){const{keys:i,size:n}=r,s=o(n,(()=>e.init())),a=t.totalRows(),c=t.data(),u=t.mask();if(u)for(let t=u.next(0);t>=0;t=u.next(t+1))e.add(s[i[t]],t,c);else for(let t=0;t<a;++t)e.add(s[i[t]],t,c);return s}function sf(t,e){const{get:r,names:i,rows:n,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=r[e];for(let t=0;t<s;++t)a[t]=o(n[t])}}function af(t){return{left(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){const s=i+n>>>1;t(e[s],r)<0?i=s+1:n=s}return i},right(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){const s=i+n>>>1;t(e[s],r)>0?n=s:i=s+1}return i}}}const of=af(qd);function cf(t,e,r,i={},n){const s=t.data(),a=function(t,e){const r={};return t.forEach((t=>{const e=(t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?t:null)))(t),i=(t=>!!t.peers)(t),n=`${e},${i}`,{aggOps:s,winOps:a}=r[n]||(r[n]={frame:e,peers:i,aggOps:[],winOps:[]});Gl(t.name)?s.push(t):a.push(function(t){const{id:e,name:r,fields:i=[],params:n=[]}=t,s=Ql(r).create(...n);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(r).map((t=>function(t,e,r,i,n){let s,a,o,c,u;const h=t=>a[t-1]===a[t],l=i.length,p=n.length,d=i.length?lu(["w","r","k"],"{"+Wd(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},f={i0:0,i1:0,index:0,size:0,peer:h,init(t,e,r,h){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,c=r,u=h,o=n?n.map((t=>t.init())):null;for(let t=0;t<l;++t)i[t].init();return f},value:(e,r)=>r(s[e],t),step(i){const[l,y]=e,m=f.size,b=f.i0,g=f.i1;f.i0=null!=l?Math.max(0,i-Math.abs(l)):0,f.i1=null!=y?Math.min(m,i+Math.abs(y)+1):m,f.index=i,r&&(f.i0>0&&h(f.i0)&&(f.i0=of.left(a,a[f.i0])),f.i1<m&&h(f.i1)&&(f.i1=of.right(a,a[f.i1-1])));for(let e=0;e<p;++e){const r=n[e],i=o[e];for(let e=b;e<f.i0;++e)r.rem(i,s[e],t);for(let e=g;e<f.i1;++e)r.add(i,s[e],t);r.write(i,c,u)}return d(f,c,u),c}};return f}(e,t.frame,t.peers,t.winOps,ef(t.aggOps,null!=t.frame[0]))))}(n,s),o=a.length,c=lu(["r","d","op"],"{"+Wd(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,r);t.partitions().forEach(((e,r)=>{const n=e.length,u=function(t,e){if(t.isOrdered()){const r=t.comparator(),i=t.data(),n=e.length,s=new Uint32Array(n);for(let t=1,a=0;t<n;++t)s[t]=r(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,u,i,r);const h=t=>i[t][r];for(let t=0;t<n;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,h)}}))}function uf(t){return Kl(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function hf(t,{names:e,exprs:r,ops:i},n={}){const s=t.totalRows(),a=_(n.drop?null:t),c=e.map((t=>a.add(t,Array(s)))),[u,h]=function(t){const e=[],r=[],i=t.length;for(let n=0;n<i;++n){const i=t[n];i.id=n,(uf(i)?r:e).push(i)}return[e,r]}(i),l=t.isGrouped()?t.groups().size:1,p=tf(t,u,o(i.length,(()=>Array(l))));return h.length?cf(t,c,r,p,h):function(t,e,r,i){const n=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],c=e.length;for(let i=0;i<c;++i){const a=r[i],c=e[i];if(n)for(let t=n.next(0);t>=0;t=n.next(t+1))c[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)c[t]=a(t,s,o)}}}(t,c,r,p),t.create(a)}function lf(t,{names:e=[],exprs:i=[],ops:n=[]},s={}){if(!e.length)return t;const a=s.limit>0?+s.limit:1/0,o=s.index?!0===s.index?"index":s.index+"":null,c=new Set(s.drop),u=Xd(t,n,i),h=_(),l=new Set(e),p=[],d=[],f=[];t.columnNames().forEach((e=>{if(!c.has(e)){const r=h.add(e,[]);l.has(e)||(p.push(t.column(e)),d.push(r))}})),e.forEach((t=>{c.has(t)||(h.has(t)||h.add(t,[]),f.push(h.data[t]))}));const y=o?h.add(o,[]):null;let m=0;const b=p.length,g=f.length,v=(t,e)=>{for(let r=0;r<b;++r)d[r].length=m+e,d[r].fill(p[r].get(t),m,m+e)},w=y?(t,e)=>{for(let r=0;r<e;++r)y[t+r]=r}:()=>{};if(1===g){const e=u[0],i=f[0];t.scan(((t,n)=>{const s=r(e(t,n)),o=Math.min(s.length,a);v(t,o);for(let t=0;t<o;++t)i[m+t]=s[t];w(m,o),m+=o}))}else t.scan(((t,e)=>{let i=0;const n=u.map((n=>{const s=r(n(t,e));return i=Math.min(Math.max(i,s.length),a),s}));v(t,i);for(let t=0;t<g;++t){const e=f[t],r=n[t];for(let t=0;t<i;++t)e[m+t]=r[t]}w(m,i),m+=i}));return t.create(h.new())}function pf(t,e,i,n={window:!1}){const o=new Map,c=r=>{f(r=Kp(r)?e.columnName(r):r)?o.set(r,qp(r)):a(r)?Jp(e,r).forEach(c):p(r)?Yp(o,r):s(`Invalid ${t} value: ${r+""}`)};return r(i).forEach(c),n.preparse&&n.preparse(o),fp(o,{table:e,...n})}function df(t,e,r,i){const n=r&&r.length;return function(t,{names:e,exprs:r,ops:i},n){const s=Xd(t,i,r),a=n?null:_(t),o=t.totalRows();return e.forEach(((e,r)=>{const i=t.column(e),c=n?i.data:a.add(e,Array(o)),u=s[r];t.scan((t=>{const e=i.get(t);c[t]=El(e)?e:u(t)}))})),n?t:t.create(a)}(n?function(t,e,r){const i=t.groups(),n=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=wl(a);t.scan(((t,e)=>o.add(c(t,e))));const u=t.columnNames(),h=_(),l=u.map((t=>h.add(t,[])));u.forEach(((e,r)=>{const i=n[e],s=l[r];t.scan((t=>s.push(i.get(t))))}));const p=wl(a.map(((t,e)=>t=>t[e]))),d=lu("v","{"+l.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",l,u.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=r.reduce(((t,e)=>t*e.length),i.size),n=new Uint32Array(e+(t-o.size));n.set(i.keys),ff(i,r,((e,r)=>{o.has(p(e))||(d(e),n[t++]=r[0])})),h.groupby({...i,keys:n})}else ff(i,r,(t=>{o.has(p(t))||d(t)}));return t.create(h.new())}(t,r,i):t,e,n)}function ff(t,e,r){const i=t?t.get.length:0,n=t?1:0,s=n+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:r,size:n}=t;a[0]=n,c.push(((t,n)=>{const s=r[n];for(let r=0;r<i;++r)t[r]=e[r](s)}))}e.forEach(((t,e)=>{const r=e+i;a[e+n]=t.length,c.push(((e,i)=>e[r]=t[i]))}));const u=Array(i+e.length);for(let t=0;t<s;++t)c[t](u,0);r(u,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](u,e),r(u,o),t=s-1):(o[t]=0,c[t](u,0),--t)}}function yf(t,{names:e,exprs:r,ops:i}){const n=_(),s=t.groups();return s&&sf(n,s),function(t,e,r,i=[],n){if(!i.length)return;const s=r?r.size:1,a=(t,e)=>i[t][e],o=t.length;for(let r=0;r<o;++r){const o=e[r];if(null!=o.field)n.add(t[r],i[o.field]);else if(s>1){const e=n.add(t[r],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else n.add(t[r],[o(0,null,a)])}}(e,r,s,tf(t,i),n),t.create(n.new())}function mf(t,e=[],i=[]){return new bf(t,r(e),r(i))}class bf{constructor(t,e,r){this.name=t,this.fields=e,this.params=r}toString(){const t=[...this.fields.map((t=>`d[${Vc(t)}]`)),...this.params.map(Vc)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}const gf=t=>mf("any",t),_f=()=>mf("count"),vf=t=>mf("unique",t);var wf={...Yl,count:_f,any:gf,values:t=>mf("values",t),valid:t=>mf("valid",t),invalid:t=>mf("invalid",t),distinct:t=>mf("distinct",t),unique:vf,mode:t=>mf("mode",t),sum:t=>mf("sum",t),product:t=>mf("product",t),mean:t=>mf("mean",t),average:t=>mf("average",t),variance:t=>mf("variance",t),variancep:t=>mf("variancep",t),stdev:t=>mf("stdev",t),stdevp:t=>mf("stdevp",t),min:t=>mf("min",t),max:t=>mf("max",t),quantile:(t,e)=>mf("quantile",t,e),median:t=>mf("median",t),covariance:(t,e)=>mf("covariance",[t,e]),covariancep:(t,e)=>mf("covariancep",[t,e]),corr:(t,e)=>mf("corr",[t,e]),bins:(t,e,r,i)=>mf("bins",t,[e,r,i]),row_number:()=>mf("row_number"),rank:()=>mf("rank"),avg_rank:()=>mf("avg_rank"),dense_rank:()=>mf("dense_rank"),percent_rank:()=>mf("percent_rank"),cume_dist:()=>mf("cume_dist"),ntile:t=>mf("ntile",null,t),lag:(t,e,r)=>mf("lag",t,[e,r]),lead:(t,e,r)=>mf("lead",t,[e,r]),first_value:t=>mf("first_value",t),last_value:t=>mf("last_value",t),nth_value:(t,e)=>mf("nth_value",t,e),fill_down:(t,e)=>mf("fill_down",t,e),fill_up:(t,e)=>mf("fill_up",t,e)};function xf(t){t.forEach(((e,r)=>e.field?t.set(r,vf(e+"")):0))}function If(t,r,i,{names:n,exprs:s},a={}){const o=t.data(),c=t.indices(!1),u=c.length,h=new Int32Array(u),l=r.data(),p=r.indices(!1),d=p.length,f=new Int32Array(d),y=n.length,m=_(),b=Array(y),g=Array(y);for(let t=0;t<n.length;++t)b[t]=m.add(n[t],[]),g[t]=s[t];const v=function(t,e){const r=["i","a","j","b"];return lu(r,"{"+Wd(t,((t,e)=>`_${e}.push($${e}(${r}));`))+"}",t,e)}(b,g);if((e(i)?Af:Sf)(v,i,o,l,c,p,h,f,u,d),a.left)for(let t=0;t<u;++t)h[t]||v(c[t],o,-1,l);if(a.right)for(let t=0;t<d;++t)f[t]||v(-1,o,p[t],l);return t.create(m.new())}function Sf(t,e,r,i,n,s,a,o,c,u){for(let h=0;h<c;++h){const c=n[h];for(let n=0;n<u;++n){const u=s[n];e(c,r,u,i)&&(t(c,r,u,i),a[h]=1,o[n]=1)}}}function Af(t,[e,r],i,n,s,a,o,c,u,h){let l,p,d,f,y,m,b,g,_,v,w=t;u>=h?(l=i,p=e,d=o,f=s,y=u,m=n,b=r,g=c,_=a,v=h):(l=n,p=r,d=c,f=a,y=h,m=i,b=e,g=o,_=s,v=u,w=(e,r,i,n)=>t(i,n,e,r));const x=new Map;for(let t=0;t<v;++t){const e=b(_[t],m);null!=e&&e==e&&(x.has(e)||x.set(e,[]),x.get(e).push(t))}for(let t=0;t<y;++t){const e=f[t],r=x.get(p(e,l));if(r){const i=r.length;for(let t=0;t<i;++t){const i=r[t];w(e,l,_[i],m),g[i]=1}d[t]=1}}}function Tf(t,e,i){const n=new Map;r(i).forEach(((r,i)=>{f(r=Kp(r)?e.columnName(r):r)?n.set(i,qp(r)):a(r)||p(r)&&r.expr?n.set(i,r):s(`Invalid ${t} key value: ${r+""}`)}));return wl(fp(n,{table:e,aggregate:!1,window:!1}).exprs,!0)}const Ef={aggregate:!1,window:!1,index:1};function kf(t,i,n,a,o={}){n=Bf(t,i,n);const c={join:[t,i]};let u;if(e(n)){const[e,c]=n.map(r);e.length!==c.length&&s("Mismatched number of join keys"),u=[Tf("join",t,e),Tf("join",i,c)],a||(a=function(t,e,r,i){const n=[];e.forEach(((t,e)=>f(t)&&t===r[e]?n.push(t):0));const s=td(n);if(i.left&&i.right){const e=new Set(n);return[t.columnNames().map((t=>{const r=`[${Vc(t)}]`;return e.has(t)?{[t]:`(a, b) => a${r} == null ? b${r} : a${r}`}:t})),s]}return i.right?[s,Xp()]:[Xp(),s]}(t,e,c,o))}else u=fp({on:n},c).exprs[0],a||(a=[Xp(),Xp()]);return If(t,i,u,function(t,r,i,n,s=[]){if(e(i)){let e,a,o,c=i.length;e=a=o={names:[],exprs:[]},c--&&(e=pf("join",t,i[0],n)),c--&&(a=pf("join",r,i[1],Ef)),c--&&(o=fp(i[2],n));const u=new Set,h=new Set(e.names);return a.names.forEach((t=>{h.has(t)&&u.add(t)})),u.size&&(Df(e.names,u,s[0]||"_1"),Df(a.names,u,s[1]||"_2")),{names:e.names.concat(a.names,o.names),exprs:e.exprs.concat(a.exprs,o.exprs)}}return fp(i,n)}(t,i,a,c,o&&o.suffix),o)}function Bf(t,r,i){if(i)f(i)?i=[i,i]:e(i)&&1===i.length&&(i=[i[0],i[0]]);else{const e=function(t,e){const r=new Set(e);return t.filter((t=>r.has(t)))}(t.columnNames(),r.columnNames());e.length||s("Natural join requires shared column names."),i=[e,e]}return i}function Df(t,e,r){t.forEach(((i,n)=>e.has(i)?t[n]=i+r:0))}function Cf(t,r,i,n){var s,a;return i=Bf(t,r,i),function(t,e,r,i={}){const n=new Ld(t.totalRows()),s=t.numRows(),a=e.numRows(),o=t.data(),c=e.data();if(t.isFiltered()||e.isFiltered()){const i=t.indices(!1),u=e.indices(!1);for(let t=0;t<s;++t){const e=i[t];for(let t=0;t<a;++t)if(r(e,o,u[t],c)){n.set(e);break}}}else for(let t=0;t<s;++t)for(let e=0;e<a;++e)if(r(t,o,e,c)){n.set(t);break}return i.anti&&n.not().and(t.mask()),t.create({filter:n})}(t,r,i=e(i)?(s=Tf("join",t,i[0]),a=Tf("join",r,i[1]),(t,e,r,i)=>{const n=s(t,e),o=a(r,i);return n===o&&null!=n&&null!=o}):fp({on:i},{join:[t,r]}).exprs[0],n)}const Lf=(t,e)=>null!=t?t:e;function Mf(t,e,r,i={}){const{keys:n,keyColumn:s}=function(t,e,r){const i=r.limit>0?+r.limit:1/0,n=Lf(r.sort,!0),s=Lf(r.keySeparator,"_"),a=Xd(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((r=>r(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const u=tf(t.ungroup(),[{id:0,name:"unique",fields:[t=>c[t]],params:[]}])[0][0],h=n?u.sort():u;return{keys:Number.isFinite(i)?h.slice(0,i):h,keyColumn:c}}(t,e,i),a=Lf(i.valueSeparator,"_"),o=r.names.length>1?(t,e)=>e+a+n[t]:t=>n[t],c=n.map((e=>tf(t,r.ops.map((t=>{const r=t.fields.map((t=>{const r=(r,i)=>e===s[r]?t(r,i):NaN;return r.toString=()=>e+":"+t,r}));return{...t,fields:r}})))));return t.create(function({names:t,exprs:e},r,i,n){const s=i?i.size:1,a=_(),o=n.length,c=t.length;let u;const h=(t,e)=>u[t][e];i&&sf(a,i);for(let i=0;i<c;++i){const c=e[i];if(null!=c.field)for(let e=0;e<o;++e)a.add(r(e,t[i]),n[e][c.field]);else if(s>1)for(let e=0;e<o;++e){u=n[e];const o=a.add(r(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=c(t,null,h)}else for(let e=0;e<o;++e)u=n[e],a.add(r(e,t[i]),[c(0,null,h)])}return a.new()}(r,o,t.groups(),c))}function Of(t){t.forEach(((e,r)=>e.field?t.set(r,gf(e+"")):0))}function Nf(t,e){return yf(t,fp(e,{table:t,aggronly:!0}))}function Ff(t,e,r,i){return(e?i?Vf:Uf:i?Rf:Pf)(t.length,t,r,i)}function Uf(t,e,r){const i=r.length;for(let n=0;n<t;++n)e[n]=r[i*ql()|0];return e}function Vf(t,e,r,i){const n=r.length,s=new Float64Array(n);let a=0;for(let t=0;t<n;++t)s[t]=a+=i(r[t]);const o=af(qd).right;for(let i=0;i<t;++i)e[i]=r[o(s,a*ql())];return e}function Pf(t,e,r){const i=r.length;if(t>=i)return r;for(let i=0;i<t;++i)e[i]=r[i];for(let n=t;n<i;++n){const i=n*ql();i<t&&(e[0|i]=r[n])}return e}function Rf(t,e,r,i){const n=r.length;if(t>=n)return r;const s=new Float32Array(n),a=new Uint32Array(n);for(let t=0;t<n;++t)a[t]=t,s[t]=-Math.log(ql())/i(r[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=r[a[i]];return e}const jf=t=>e=>t.get(e)||0;function zf(t,{names:e,exprs:i,ops:n=[]},s={}){if(0===e.length)return t;const a=1===e.length&&s.as||[],o=null==s.drop||!!s.drop,c=null==s.limit?a.length||1/0:Math.max(1,+s.limit||1),u=Xd(t,n,i),h=_(),l=e.reduce(((t,e,r)=>t.set(e,r)),new Map),p=(e,i)=>{const n=function(t,e,i){const n=t.totalRows(),s=[];return t.scan(((t,a)=>{const o=r(e(t,a)),c=Math.min(o.length,i);for(let e=0;e<c;++e){(s[e]||(s[e]=Array(n).fill(Il)))[t]=o[e]}})),s}(t,u[e],c),s=n.length;for(let t=0;t<s;++t)h.add(a[t]||`${i}_${t+1}`,n[t])};return t.columnNames().forEach((e=>{l.has(e)?(o||h.add(e,t.column(e)),p(l.get(e),e),l.delete(e)):h.add(e,t.column(e))})),l.forEach(p),t.create(h)}function $f(t,{names:e=[],exprs:r=[],ops:i=[]}){const n=e.length;if(0===n)return null;if(1===n&&!t.isFiltered()&&r[0].field){const i=t.column(r[0].field);if(i.groups)return i.groups(e)}let s=Xd(t,i,r);const a=wl(s),o=t.totalRows(),c=new Uint32Array(o),u={},h=[],l=t.data(),p=t.mask();if(p)for(let t=p.next(0);t>=0;t=p.next(t+1)){const e=a(t,l)+"",r=u[e];c[t]=null!=r?r:u[e]=h.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,l)+"",r=u[e];c[t]=null!=r?r:u[e]=h.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,l)))),{keys:c,get:s,names:e,rows:h,size:h.length}}const Wf=(t,e,r,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}\n    : v !== v && u === u ? ${i} : `;var qf={__antijoin:(t,e,r)=>Cf(t,e,r,{anti:!0}),__count:(t,e={})=>Nf(t,{[e.as||"count"]:_f()}),__cross:(t,e,r,i)=>kf(t,e,(()=>!0),r,{...i,left:!0,right:!0}),__concat:function(t,e){const r=t.numRows(),i=r+e.reduce(((t,e)=>t+e.numRows()),0);if(r===i)return t;const n=[t,...e],s=_();return t.columnNames().forEach((t=>{const e=Array(i);let r=0;n.forEach((i=>{const n=i.column(t)||{get:()=>Il};i.scan((t=>e[r++]=n.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").reify()},__derive:function(t,e,r={}){const i=hf(t,fp(e,{table:t}),r);return r.drop||null==r.before&&null==r.after?i:$d(i,Object.keys(e).filter((e=>!t.column(e))),r)},__except:function(t,e){if(0===e.length)return t;const r=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(r))),t).dedupe()},__filter:function(t,e){const r=fp({p:e},{table:t});let i=r.exprs[0];if(r.ops.length){const{data:e}=hf(t,r,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const r=t.totalRows(),i=t.mask(),n=t.data(),s=new Ld(r);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,n)&&s.set(t);else for(let t=0;t<r;++t)e(t,n)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,r){return function(t,{names:e=[],exprs:r=[],ops:i=[]},n={}){if(0===e.length)return t;const[s="key",a="value"]=n.as||[],o=Xd(t,i,r);return lf(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((r=>r(t,e)))]},{...n,drop:e})}(t,pf("fold",t,e),r)},__impute:function(t,e,r={}){if((e=fp(e,{table:t})).names.forEach((e=>t.column(e)?0:s(`Invalid impute column ${Vc(e)}`))),r.expand){const i=pf("impute",t,r.expand,{preparse:xf}),n=yf(t.ungroup(),i);return df(t,e,i.names,i.names.map((t=>n.get(t,0))))}return df(t,e)},__intersect:function(t,e){const r=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(r))),t).dedupe():t.reify([])},__join:kf,__lookup:function(t,e,r,i){return function(t,e,[r,i],{names:n,exprs:s,ops:a}){const o=_(t),c=t.totalRows();n.forEach((t=>o.add(t,Array(c))));const u=new Map;e.scan(((t,e)=>{const r=i(t,e);null!=r&&r==r&&u.set(i(t,e),t)}));const h=new Int32Array(t.numRows()),l=new Int32Array(t.numRows());let p=0;t.scan(((t,e)=>{const i=u.get(r(t,e));h[p]=t,l[p]=null==i?-1:i,++p}));const d=e.data(),f=Xd(e,a,s),y=f.length;for(let t=0;t<y;++t){const e=o.data[n[t]],r=f[t];for(let t=0;t<p;++t){const i=l[t];e[h[t]]=i>=0?r(i,d):Il}}return t.create(o)}(t,e,[Tf("lookup",t,(r=Bf(t,e,r))[0]),Tf("lookup",e,r[1])],pf("lookup",e,i))},__pivot:function(t,e,r,i){return Mf(t,pf("fold",t,e),pf("fold",t,r,{preparse:Of,aggronly:!0}),i)},__relocate:$d,__rollup:Nf,__sample:function(t,e,r={}){return function(t,e,r,i={}){const n=!!i.replace,s=t.partitions(!1);let a=0;e=s.map(((t,r)=>{let i=e(r);return a+=i=n?i:Math.min(t.length,i),i}));const o=new Uint32Array(a);let c=0;return s.forEach(((t,i)=>{const s=e[i],a=o.subarray(c,c+=s);n||s!==t.length?Ff(a,n,t,r):a.set(t)})),t.reify(o)}(t,function(t,e){return Kp(e)?()=>e:jf(yf(t,fp({size:e},{table:t})).column("size"))}(t,e),function(t,e){return null==e?null:(e=Kp(e)?t.columnName(e):e,jf(f(e)?t.column(e):hf(t,fp({w:e},{table:t}),{drop:!0}).column("w")))}(t,r.weight),r)},__select:function(t,e){return zd(t,Jp(t,e))},__semijoin:Cf,__spread:function(t,e,r){return zf(t,pf("spread",t,e),r)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,r){return lf(t,pf("unroll",t,e),r&&r.drop?{...r,drop:pf("unroll",t,r.drop).names}:r)},__groupby:function(t,e){return function(t,e){return t.create({groups:$f(t,e)})}(t,pf("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let r=-1;const i=new Map,n=t=>i.set(++r+"",t);return e.forEach((e=>{const r=null!=e.expr?e.expr:e;if(p(r)&&!a(r))for(const t in r)n(r[t]);else n(Kp(r)?qp(e,t.columnName(r)):f(r)?qp(e):a(r)?e:s("Invalid orderby field: "+(e+"")))})),function(t,e){const r=[],i=[];let n=null,s="0",a="0";t.isGrouped()&&(n=t.groups().keys,s="ka",a="kb");const{ops:o}=fp(e,{table:t,value:(t,e)=>{r.push(t),i.push([_l(e,{index:"a",op:s}),_l(e,{index:"b",op:a})])},window:!1}),c=tf(t,o),u=(t,e)=>c[t][e],h=r.length;let l="return (a, b) => {"+(u&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const n=e.get(r[t]).desc?-1:1,[s,a]=i[t];l+=Wf(s,a,-n,n)}return l+="0;};",Function("op","keys","data",l)(u,n,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const r=_(),i=t.groups(),{get:n,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach((t=>r.add(t,null)));const u=i?nf(t,e,i):[rf(t,e)];e.outputs().map((t=>r.add(t,[])));const h=c.length-1;let l=0;for(let t=0;t<h;++t)l+=c[t+1]=e.write(u[t],r.data,c[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=r.data[t]=Array(l),u=n[i];for(let t=0,r=0;t<o;++t)s.fill(u(a[t],e),r,r+=c[t+1])}))}return t.create(r.new())}};function Hf(t,e){return du.from(t,e)}function Yf(t,e={}){const r=e.using||Pd;return fetch(t,e.fetch).then((t=>t[e.as||"text"]())).then((t=>r(t,e)))}function Gf(t,r){return e(t)?Hf(t):jd(t,r)}Object.assign(du.prototype,qf);const Kf=(t,e)=>s(`Illegal ${e} name: ${Vc(t)}`);function Jf(t,e,r=wf,i="function"){t||Kf(t,i),!e.override&&g(r,t)&&((t,e)=>{s(`The ${e} ${Vc(t)} is already defined. Use override option?`)})(t,i)}function Qf(t,e,r,i){return r[t]===e||Jf(t,i)}function Zf(t,e,r,i={}){if(Qf(t,e,r,i))return;const[n=0,s=0]=e.param;r[t]=e,wf[t]=(...e)=>mf(t,e.slice(0,n),e.slice(n,n+s))}function Xf(t,e,r){Zf(t,e,Tl,r)}function ty(t,e,r){Zf(t,e,Dl,r)}function ey(t,e,r={}){1===arguments.length&&(""!==(t=(e=t).name)&&"anonymous"!==t||s("Anonymous function provided, please include a name argument.")),Qf(t,e,Yl,r)||(Yl[t]=e,wf[t]=e)}const ry=du.prototype;let iy;function ny(t){for(;t;t=Object.getPrototypeOf(t))Object.getOwnPropertyNames(t).forEach((t=>iy[t]=1))}function sy(t,e,r){const i="method";if(ry[t]&&ry[t].fn===e)return!0;iy||(iy={},ny(ry),ny(xd.prototype)),iy[t]&&((t,e)=>{s(`The ${e} name ${Vc(t)} is reserved and can not be overridden.`)})(t,i),"_"===(t+"")[0]&&Kf(t,i),Jf(t,r,ry,i)}function ay(t,e,r={}){sy(t,e,r)||(ry[t]=function(...t){return e(this,...t)},ry[t].fn=e)}function oy(t,e,r,i={}){ay(t,e,i),function(t,e){xd.prototype[t]=function(...t){return Sd(this,e(...t))}}(t,wd[t]=vd(t,r))}const cy={Table:c,ColumnTable:du,Transformable:n,Query:xd,Reducer:fu,Verb:_d,Verbs:wd,columnFactory:function(t){return arguments.length?h=t:h},parse:fp,walk_ast:el},{Query:uy,Verbs:hy}=cy;class ly extends uy{constructor(t,e,r,i){super(e,r,t),this._worker=i}static for(t,e){return new ly(t,null,null,e)}fetch(t){return this._worker.query(this.toObject(),t)}}for(const t in hy){const e=hy[t];ly.prototype["__"+t]=(t,...r)=>new ly(t._table,t._verbs.concat(e(...r)),t._params,t._worker)}function py(t,e){const{status:r,request:i}=t,n=i.id;if(e.has(n)){const{resolve:i,reject:s}=e.get(n);switch(r){case"result":i(t.result);break;case"error":s(t.error)}e.delete(n)}}function dy(t){let e,r=0;const i=new Map;if("undefined"==typeof Worker){const{Worker:r}=require("worker_threads");e=new r(t||__dirname+"/arquero-node-worker.js"),e.on("message",(t=>py(t,i)))}else e=new Worker(t),e.onmessage=t=>py(t.data,i);return e.post=(t,n)=>{const s=++r;return e.postMessage({id:s,...t},n),new Promise(((t,e)=>{i.set(s,{resolve:t,reject:e})}))},e}class fy{constructor(t,e={}){this._worker=dy(t),this._format=e.format||"json"}post(t,e){return this._worker.post(t,e)}terminate(){this._worker.terminate()}async list(){return(await this.post({method:"list"})).list}async seed(t){return(await this.post({method:"seed",params:{seed:t}})).seed}async drop(t){t&&t.tableName&&!t.length&&(t=t.tableName());return(await this.post({method:"drop",params:{name:t}})).drop}async table(t,e){if(e){const r=ArrayBuffer.isView(e)?[e]:void 0;t=(await this.post({method:"add",params:{name:t,data:e}},r)).table}return ly.for(t,this)}async load(t,e,r="csv",i={},n=!1){const s=await this.post({method:"load",params:{name:t,url:e,format:r,options:i,append:n}});return ly.for(s.table,this)}async query(t,e,r){const i=this._format,n=await this.post({method:"query",params:{query:t,as:r,format:i,options:e}});return r?ly.for(n.table,this):yy(n.data)}async fetch(t,e){const r=this._format;return yy((await this.post({method:"fetch",params:{name:t,format:r,options:e}})).data)}}function yy(t){return ArrayBuffer.isView(t)?Md(t):"string"==typeof t?jd(t):function(t){throw Error(t)}("Unrecognized table data format")}t.Type=w,t.addAggregateFunction=Xf,t.addFunction=ey,t.addPackage=function(t,e={}){const r=t&&t.arquero_package||t,i={functions:[(t,e,r)=>Qf(t,e,Yl,r),ey],aggregateFunctions:[(t,e,r)=>Qf(t,e,Tl,r),Xf],windowFunctions:[(t,e,r)=>Qf(t,e,Dl,r),ty],tableMethods:[sy,ay],verbs:[(t,e,r)=>sy(t,e.method,r),(t,e,r)=>oy(t,e.method,e.params,r)]};function n(t){for(const n in i){const s=i[n],a=r[n];for(const r in a)s[t](r,a[r],e)}}n(0),n(1)},t.addTableMethod=ay,t.addVerb=oy,t.addWindowFunction=ty,t.all=Xp,t.bin=function(t,e={}){const r=`d[${JSON.stringify(t)}]`,{maxbins:i,nice:n,minstep:s,offset:a}=e,o=[i,n,s];let c=o.length;for(;c&&null==o[--c];)o.pop();return`d => op.bin(${r}, ...${`op.bins(${r}${o.length?", "+o.join(", "):""})`}, ${a||0})`},t.desc=Wp,t.endswith=function(t){return rd(RegExp(Gp(t)+"$"))},t.field=qp,t.frac=function(t){return`() => op.round(${+t} * op.count())`},t.from=Hf,t.fromArrow=Md,t.fromCSV=Pd,t.fromJSON=jd,t.internal=cy,t.load=Yf,t.loadArrow=function(t,e){return Yf(t,{...e,as:"arrayBuffer",using:Md})},t.loadCSV=function(t,e){return Yf(t,{...e,as:"text",using:Pd})},t.loadJSON=function(t,e){return Yf(t,{...e,as:"json",using:Gf})},t.matches=rd,t.not=td,t.op=wf,t.query=function(t){return new xd(null,null,t)},t.queryFrom=function(t){return xd.from(t)},t.range=ed,t.rolling=Hp,t.seed=function(t){Wl=El(t)&&isFinite(t=+t)?function(t){const e=1664525,r=1013904223,i=1/4294967296;return t=0|(0<=t&&t<1?t/i:Math.abs(t)),()=>i*((t=e*t+r|0)>>>0)}(t):Math.random},t.startswith=function(t){return rd(RegExp("^"+Gp(t)))},t.table=function(t,e){const r=np(t);return new du(r.reduce(((t,[e,r])=>(t[e]=r,t)),{}),e||r.map((t=>t[0])))},t.toArrow=Qc,t.version="3.0.0",t.worker=function(t,e){return new fy(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=arquero-worker-client.min.js.map
